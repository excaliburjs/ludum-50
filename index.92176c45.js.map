{"mappings":"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","sources":["node_modules/store/storages/localStorage.js","node_modules/store/src/util.js","node_modules/store/storages/oldFF-globalStorage.js","node_modules/store/storages/oldIE-userDataStorage.js","node_modules/store/storages/cookieStorage.js","node_modules/store/storages/sessionStorage.js","node_modules/store/storages/memoryStorage.js","node_modules/store/plugins/json2.js","node_modules/store/plugins/lib/json2.js","src/main.ts","node_modules/store/src/store-engine.js","node_modules/store/storages/all.js","node_modules/store/dist/store.legacy.js","src/preferences.ts","src/level.ts","src/grid.ts","src/sandcastle.ts","src/enemyGenerator.ts","src/tower-placer.ts","src/wave-dispatcher.ts","src/game-over.ts","src/sound-manager.ts","node_modules/classnames/index.js","src/water-edge.ts","node_modules/@excaliburjs/dev-tools/dist/webpack:/ex.DevTools/webpack/universalModuleDefinition","node_modules/@excaliburjs/dev-tools/dist/webpack:/ex.DevTools/picker-system.ts","node_modules/@excaliburjs/dev-tools/dist/webpack:/ex.DevTools/node_modules/tweakpane/dist/tweakpane.js","node_modules/@excaliburjs/dev-tools/dist/webpack:/ex.DevTools/external umd {\"commonjs\":\"excalibur\",\"commonjs2\":\"excalibur\",\"amd\":\"excalibur\",\"root\":\"ex\"}","node_modules/@excaliburjs/dev-tools/dist/webpack:/ex.DevTools/webpack/bootstrap","node_modules/@excaliburjs/dev-tools/dist/webpack:/ex.DevTools/webpack/runtime/compat get default export","node_modules/@excaliburjs/dev-tools/dist/webpack:/ex.DevTools/webpack/runtime/define property getters","node_modules/@excaliburjs/dev-tools/dist/webpack:/ex.DevTools/webpack/runtime/hasOwnProperty shorthand","node_modules/@excaliburjs/dev-tools/dist/webpack:/ex.DevTools/webpack/runtime/make namespace object","node_modules/@excaliburjs/dev-tools/dist/webpack:/ex.DevTools/dev-tools.ts","node_modules/dat.gui/src/dat/color/toString.js","node_modules/dat.gui/src/dat/utils/common.js","node_modules/dat.gui/src/dat/color/interpret.js","node_modules/dat.gui/src/dat/color/math.js","node_modules/dat.gui/src/dat/color/Color.js","node_modules/dat.gui/src/dat/controllers/Controller.js","node_modules/dat.gui/src/dat/dom/dom.js","node_modules/dat.gui/src/dat/controllers/BooleanController.js","node_modules/dat.gui/src/dat/controllers/OptionController.js","node_modules/dat.gui/src/dat/controllers/StringController.js","node_modules/dat.gui/src/dat/controllers/NumberController.js","node_modules/dat.gui/src/dat/controllers/NumberControllerBox.js","node_modules/dat.gui/src/dat/controllers/NumberControllerSlider.js","node_modules/dat.gui/src/dat/controllers/FunctionController.js","node_modules/dat.gui/src/dat/controllers/ColorController.js","node_modules/dat.gui/src/dat/utils/css.js","node_modules/dat.gui/src/dat/gui/saveDialogue.html.js","node_modules/dat.gui/src/dat/controllers/ControllerFactory.js","node_modules/dat.gui/src/dat/utils/requestAnimationFrame.js","node_modules/dat.gui/src/dat/dom/CenteredDiv.js","node_modules/dat.gui/src/dat/gui/GUI.js","node_modules/dat.gui/src/dat/index.js"],"sourcesContent":["var util = require('../src/util')\nvar Global = util.Global\n\nmodule.exports = {\n\tname: 'localStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nfunction localStorage() {\n\treturn Global.localStorage\n}\n\nfunction read(key) {\n\treturn localStorage().getItem(key)\n}\n\nfunction write(key, data) {\n\treturn localStorage().setItem(key, data)\n}\n\nfunction each(fn) {\n\tfor (var i = localStorage().length - 1; i >= 0; i--) {\n\t\tvar key = localStorage().key(i)\n\t\tfn(read(key), key)\n\t}\n}\n\nfunction remove(key) {\n\treturn localStorage().removeItem(key)\n}\n\nfunction clearAll() {\n\treturn localStorage().clear()\n}\n","var assign = make_assign()\nvar create = make_create()\nvar trim = make_trim()\nvar Global = (typeof window !== 'undefined' ? window : global)\n\nmodule.exports = {\n\tassign: assign,\n\tcreate: create,\n\ttrim: trim,\n\tbind: bind,\n\tslice: slice,\n\teach: each,\n\tmap: map,\n\tpluck: pluck,\n\tisList: isList,\n\tisFunction: isFunction,\n\tisObject: isObject,\n\tGlobal: Global\n}\n\nfunction make_assign() {\n\tif (Object.assign) {\n\t\treturn Object.assign\n\t} else {\n\t\treturn function shimAssign(obj, props1, props2, etc) {\n\t\t\tfor (var i = 1; i < arguments.length; i++) {\n\t\t\t\teach(Object(arguments[i]), function(val, key) {\n\t\t\t\t\tobj[key] = val\n\t\t\t\t})\n\t\t\t}\t\t\t\n\t\t\treturn obj\n\t\t}\n\t}\n}\n\nfunction make_create() {\n\tif (Object.create) {\n\t\treturn function create(obj, assignProps1, assignProps2, etc) {\n\t\t\tvar assignArgsList = slice(arguments, 1)\n\t\t\treturn assign.apply(this, [Object.create(obj)].concat(assignArgsList))\n\t\t}\n\t} else {\n\t\tfunction F() {} // eslint-disable-line no-inner-declarations\n\t\treturn function create(obj, assignProps1, assignProps2, etc) {\n\t\t\tvar assignArgsList = slice(arguments, 1)\n\t\t\tF.prototype = obj\n\t\t\treturn assign.apply(this, [new F()].concat(assignArgsList))\n\t\t}\n\t}\n}\n\nfunction make_trim() {\n\tif (String.prototype.trim) {\n\t\treturn function trim(str) {\n\t\t\treturn String.prototype.trim.call(str)\n\t\t}\n\t} else {\n\t\treturn function trim(str) {\n\t\t\treturn str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '')\n\t\t}\n\t}\n}\n\nfunction bind(obj, fn) {\n\treturn function() {\n\t\treturn fn.apply(obj, Array.prototype.slice.call(arguments, 0))\n\t}\n}\n\nfunction slice(arr, index) {\n\treturn Array.prototype.slice.call(arr, index || 0)\n}\n\nfunction each(obj, fn) {\n\tpluck(obj, function(val, key) {\n\t\tfn(val, key)\n\t\treturn false\n\t})\n}\n\nfunction map(obj, fn) {\n\tvar res = (isList(obj) ? [] : {})\n\tpluck(obj, function(v, k) {\n\t\tres[k] = fn(v, k)\n\t\treturn false\n\t})\n\treturn res\n}\n\nfunction pluck(obj, fn) {\n\tif (isList(obj)) {\n\t\tfor (var i=0; i<obj.length; i++) {\n\t\t\tif (fn(obj[i], i)) {\n\t\t\t\treturn obj[i]\n\t\t\t}\n\t\t}\n\t} else {\n\t\tfor (var key in obj) {\n\t\t\tif (obj.hasOwnProperty(key)) {\n\t\t\t\tif (fn(obj[key], key)) {\n\t\t\t\t\treturn obj[key]\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction isList(val) {\n\treturn (val != null && typeof val != 'function' && typeof val.length == 'number')\n}\n\nfunction isFunction(val) {\n\treturn val && {}.toString.call(val) === '[object Function]'\n}\n\nfunction isObject(val) {\n\treturn val && {}.toString.call(val) === '[object Object]'\n}\n","// oldFF-globalStorage provides storage for Firefox\n// versions 6 and 7, where no localStorage, etc\n// is available.\n\nvar util = require('../src/util')\nvar Global = util.Global\n\nmodule.exports = {\n\tname: 'oldFF-globalStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar globalStorage = Global.globalStorage\n\nfunction read(key) {\n\treturn globalStorage[key]\n}\n\nfunction write(key, data) {\n\tglobalStorage[key] = data\n}\n\nfunction each(fn) {\n\tfor (var i = globalStorage.length - 1; i >= 0; i--) {\n\t\tvar key = globalStorage.key(i)\n\t\tfn(globalStorage[key], key)\n\t}\n}\n\nfunction remove(key) {\n\treturn globalStorage.removeItem(key)\n}\n\nfunction clearAll() {\n\teach(function(key, _) {\n\t\tdelete globalStorage[key]\n\t})\n}\n","// oldIE-userDataStorage provides storage for Internet Explorer\n// versions 6 and 7, where no localStorage, sessionStorage, etc\n// is available.\n\nvar util = require('../src/util')\nvar Global = util.Global\n\nmodule.exports = {\n\tname: 'oldIE-userDataStorage',\n\twrite: write,\n\tread: read,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar storageName = 'storejs'\nvar doc = Global.document\nvar _withStorageEl = _makeIEStorageElFunction()\nvar disable = (Global.navigator ? Global.navigator.userAgent : '').match(/ (MSIE 8|MSIE 9|MSIE 10)\\./) // MSIE 9.x, MSIE 10.x\n\nfunction write(unfixedKey, data) {\n\tif (disable) { return }\n\tvar fixedKey = fixKey(unfixedKey)\n\t_withStorageEl(function(storageEl) {\n\t\tstorageEl.setAttribute(fixedKey, data)\n\t\tstorageEl.save(storageName)\n\t})\n}\n\nfunction read(unfixedKey) {\n\tif (disable) { return }\n\tvar fixedKey = fixKey(unfixedKey)\n\tvar res = null\n\t_withStorageEl(function(storageEl) {\n\t\tres = storageEl.getAttribute(fixedKey)\n\t})\n\treturn res\n}\n\nfunction each(callback) {\n\t_withStorageEl(function(storageEl) {\n\t\tvar attributes = storageEl.XMLDocument.documentElement.attributes\n\t\tfor (var i=attributes.length-1; i>=0; i--) {\n\t\t\tvar attr = attributes[i]\n\t\t\tcallback(storageEl.getAttribute(attr.name), attr.name)\n\t\t}\n\t})\n}\n\nfunction remove(unfixedKey) {\n\tvar fixedKey = fixKey(unfixedKey)\n\t_withStorageEl(function(storageEl) {\n\t\tstorageEl.removeAttribute(fixedKey)\n\t\tstorageEl.save(storageName)\n\t})\n}\n\nfunction clearAll() {\n\t_withStorageEl(function(storageEl) {\n\t\tvar attributes = storageEl.XMLDocument.documentElement.attributes\n\t\tstorageEl.load(storageName)\n\t\tfor (var i=attributes.length-1; i>=0; i--) {\n\t\t\tstorageEl.removeAttribute(attributes[i].name)\n\t\t}\n\t\tstorageEl.save(storageName)\n\t})\n}\n\n// Helpers\n//////////\n\n// In IE7, keys cannot start with a digit or contain certain chars.\n// See https://github.com/marcuswestin/store.js/issues/40\n// See https://github.com/marcuswestin/store.js/issues/83\nvar forbiddenCharsRegex = new RegExp(\"[!\\\"#$%&'()*+,/\\\\\\\\:;<=>?@[\\\\]^`{|}~]\", \"g\")\nfunction fixKey(key) {\n\treturn key.replace(/^\\d/, '___$&').replace(forbiddenCharsRegex, '___')\n}\n\nfunction _makeIEStorageElFunction() {\n\tif (!doc || !doc.documentElement || !doc.documentElement.addBehavior) {\n\t\treturn null\n\t}\n\tvar scriptTag = 'script',\n\t\tstorageOwner,\n\t\tstorageContainer,\n\t\tstorageEl\n\n\t// Since #userData storage applies only to specific paths, we need to\n\t// somehow link our data to a specific path.  We choose /favicon.ico\n\t// as a pretty safe option, since all browsers already make a request to\n\t// this URL anyway and being a 404 will not hurt us here.  We wrap an\n\t// iframe pointing to the favicon in an ActiveXObject(htmlfile) object\n\t// (see: http://msdn.microsoft.com/en-us/library/aa752574(v=VS.85).aspx)\n\t// since the iframe access rules appear to allow direct access and\n\t// manipulation of the document element, even for a 404 page.  This\n\t// document can be used instead of the current document (which would\n\t// have been limited to the current path) to perform #userData storage.\n\ttry {\n\t\t/* global ActiveXObject */\n\t\tstorageContainer = new ActiveXObject('htmlfile')\n\t\tstorageContainer.open()\n\t\tstorageContainer.write('<'+scriptTag+'>document.w=window</'+scriptTag+'><iframe src=\"/favicon.ico\"></iframe>')\n\t\tstorageContainer.close()\n\t\tstorageOwner = storageContainer.w.frames[0].document\n\t\tstorageEl = storageOwner.createElement('div')\n\t} catch(e) {\n\t\t// somehow ActiveXObject instantiation failed (perhaps some special\n\t\t// security settings or otherwse), fall back to per-path storage\n\t\tstorageEl = doc.createElement('div')\n\t\tstorageOwner = doc.body\n\t}\n\n\treturn function(storeFunction) {\n\t\tvar args = [].slice.call(arguments, 0)\n\t\targs.unshift(storageEl)\n\t\t// See http://msdn.microsoft.com/en-us/library/ms531081(v=VS.85).aspx\n\t\t// and http://msdn.microsoft.com/en-us/library/ms531424(v=VS.85).aspx\n\t\tstorageOwner.appendChild(storageEl)\n\t\tstorageEl.addBehavior('#default#userData')\n\t\tstorageEl.load(storageName)\n\t\tstoreFunction.apply(this, args)\n\t\tstorageOwner.removeChild(storageEl)\n\t\treturn\n\t}\n}\n","// cookieStorage is useful Safari private browser mode, where localStorage\n// doesn't work but cookies do. This implementation is adopted from\n// https://developer.mozilla.org/en-US/docs/Web/API/Storage/LocalStorage\n\nvar util = require('../src/util')\nvar Global = util.Global\nvar trim = util.trim\n\nmodule.exports = {\n\tname: 'cookieStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar doc = Global.document\n\nfunction read(key) {\n\tif (!key || !_has(key)) { return null }\n\tvar regexpStr = \"(?:^|.*;\\\\s*)\" +\n\t\tescape(key).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") +\n\t\t\"\\\\s*\\\\=\\\\s*((?:[^;](?!;))*[^;]?).*\"\n\treturn unescape(doc.cookie.replace(new RegExp(regexpStr), \"$1\"))\n}\n\nfunction each(callback) {\n\tvar cookies = doc.cookie.split(/; ?/g)\n\tfor (var i = cookies.length - 1; i >= 0; i--) {\n\t\tif (!trim(cookies[i])) {\n\t\t\tcontinue\n\t\t}\n\t\tvar kvp = cookies[i].split('=')\n\t\tvar key = unescape(kvp[0])\n\t\tvar val = unescape(kvp[1])\n\t\tcallback(val, key)\n\t}\n}\n\nfunction write(key, data) {\n\tif(!key) { return }\n\tdoc.cookie = escape(key) + \"=\" + escape(data) + \"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/\"\n}\n\nfunction remove(key) {\n\tif (!key || !_has(key)) {\n\t\treturn\n\t}\n\tdoc.cookie = escape(key) + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/\"\n}\n\nfunction clearAll() {\n\teach(function(_, key) {\n\t\tremove(key)\n\t})\n}\n\nfunction _has(key) {\n\treturn (new RegExp(\"(?:^|;\\\\s*)\" + escape(key).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\")).test(doc.cookie)\n}\n","var util = require('../src/util')\nvar Global = util.Global\n\nmodule.exports = {\n\tname: 'sessionStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll\n}\n\nfunction sessionStorage() {\n\treturn Global.sessionStorage\n}\n\nfunction read(key) {\n\treturn sessionStorage().getItem(key)\n}\n\nfunction write(key, data) {\n\treturn sessionStorage().setItem(key, data)\n}\n\nfunction each(fn) {\n\tfor (var i = sessionStorage().length - 1; i >= 0; i--) {\n\t\tvar key = sessionStorage().key(i)\n\t\tfn(read(key), key)\n\t}\n}\n\nfunction remove(key) {\n\treturn sessionStorage().removeItem(key)\n}\n\nfunction clearAll() {\n\treturn sessionStorage().clear()\n}\n","// memoryStorage is a useful last fallback to ensure that the store\n// is functions (meaning store.get(), store.set(), etc will all function).\n// However, stored values will not persist when the browser navigates to\n// a new page or reloads the current page.\n\nmodule.exports = {\n\tname: 'memoryStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar memoryStorage = {}\n\nfunction read(key) {\n\treturn memoryStorage[key]\n}\n\nfunction write(key, data) {\n\tmemoryStorage[key] = data\n}\n\nfunction each(callback) {\n\tfor (var key in memoryStorage) {\n\t\tif (memoryStorage.hasOwnProperty(key)) {\n\t\t\tcallback(memoryStorage[key], key)\n\t\t}\n\t}\n}\n\nfunction remove(key) {\n\tdelete memoryStorage[key]\n}\n\nfunction clearAll(key) {\n\tmemoryStorage = {}\n}\n","module.exports = json2Plugin\n\nfunction json2Plugin() {\n\trequire('./lib/json2')\n\treturn {}\n}\n","/* eslint-disable */\n\n//  json2.js\n//  2016-10-28\n//  Public Domain.\n//  NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\n//  See http://www.JSON.org/js.html\n//  This code should be minified before deployment.\n//  See http://javascript.crockford.com/jsmin.html\n\n//  USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO\n//  NOT CONTROL.\n\n//  This file creates a global JSON object containing two methods: stringify\n//  and parse. This file provides the ES5 JSON capability to ES3 systems.\n//  If a project might run on IE8 or earlier, then this file should be included.\n//  This file does nothing on ES5 systems.\n\n//      JSON.stringify(value, replacer, space)\n//          value       any JavaScript value, usually an object or array.\n//          replacer    an optional parameter that determines how object\n//                      values are stringified for objects. It can be a\n//                      function or an array of strings.\n//          space       an optional parameter that specifies the indentation\n//                      of nested structures. If it is omitted, the text will\n//                      be packed without extra whitespace. If it is a number,\n//                      it will specify the number of spaces to indent at each\n//                      level. If it is a string (such as \"\\t\" or \"&nbsp;\"),\n//                      it contains the characters used to indent at each level.\n//          This method produces a JSON text from a JavaScript value.\n//          When an object value is found, if the object contains a toJSON\n//          method, its toJSON method will be called and the result will be\n//          stringified. A toJSON method does not serialize: it returns the\n//          value represented by the name/value pair that should be serialized,\n//          or undefined if nothing should be serialized. The toJSON method\n//          will be passed the key associated with the value, and this will be\n//          bound to the value.\n\n//          For example, this would serialize Dates as ISO strings.\n\n//              Date.prototype.toJSON = function (key) {\n//                  function f(n) {\n//                      // Format integers to have at least two digits.\n//                      return (n < 10)\n//                          ? \"0\" + n\n//                          : n;\n//                  }\n//                  return this.getUTCFullYear()   + \"-\" +\n//                       f(this.getUTCMonth() + 1) + \"-\" +\n//                       f(this.getUTCDate())      + \"T\" +\n//                       f(this.getUTCHours())     + \":\" +\n//                       f(this.getUTCMinutes())   + \":\" +\n//                       f(this.getUTCSeconds())   + \"Z\";\n//              };\n\n//          You can provide an optional replacer method. It will be passed the\n//          key and value of each member, with this bound to the containing\n//          object. The value that is returned from your method will be\n//          serialized. If your method returns undefined, then the member will\n//          be excluded from the serialization.\n\n//          If the replacer parameter is an array of strings, then it will be\n//          used to select the members to be serialized. It filters the results\n//          such that only members with keys listed in the replacer array are\n//          stringified.\n\n//          Values that do not have JSON representations, such as undefined or\n//          functions, will not be serialized. Such values in objects will be\n//          dropped; in arrays they will be replaced with null. You can use\n//          a replacer function to replace those with JSON values.\n\n//          JSON.stringify(undefined) returns undefined.\n\n//          The optional space parameter produces a stringification of the\n//          value that is filled with line breaks and indentation to make it\n//          easier to read.\n\n//          If the space parameter is a non-empty string, then that string will\n//          be used for indentation. If the space parameter is a number, then\n//          the indentation will be that many spaces.\n\n//          Example:\n\n//          text = JSON.stringify([\"e\", {pluribus: \"unum\"}]);\n//          // text is '[\"e\",{\"pluribus\":\"unum\"}]'\n\n//          text = JSON.stringify([\"e\", {pluribus: \"unum\"}], null, \"\\t\");\n//          // text is '[\\n\\t\"e\",\\n\\t{\\n\\t\\t\"pluribus\": \"unum\"\\n\\t}\\n]'\n\n//          text = JSON.stringify([new Date()], function (key, value) {\n//              return this[key] instanceof Date\n//                  ? \"Date(\" + this[key] + \")\"\n//                  : value;\n//          });\n//          // text is '[\"Date(---current time---)\"]'\n\n//      JSON.parse(text, reviver)\n//          This method parses a JSON text to produce an object or array.\n//          It can throw a SyntaxError exception.\n\n//          The optional reviver parameter is a function that can filter and\n//          transform the results. It receives each of the keys and values,\n//          and its return value is used instead of the original value.\n//          If it returns what it received, then the structure is not modified.\n//          If it returns undefined then the member is deleted.\n\n//          Example:\n\n//          // Parse the text. Values that look like ISO date strings will\n//          // be converted to Date objects.\n\n//          myData = JSON.parse(text, function (key, value) {\n//              var a;\n//              if (typeof value === \"string\") {\n//                  a =\n//   /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2}(?:\\.\\d*)?)Z$/.exec(value);\n//                  if (a) {\n//                      return new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],\n//                          +a[5], +a[6]));\n//                  }\n//              }\n//              return value;\n//          });\n\n//          myData = JSON.parse('[\"Date(09/09/2001)\"]', function (key, value) {\n//              var d;\n//              if (typeof value === \"string\" &&\n//                      value.slice(0, 5) === \"Date(\" &&\n//                      value.slice(-1) === \")\") {\n//                  d = new Date(value.slice(5, -1));\n//                  if (d) {\n//                      return d;\n//                  }\n//              }\n//              return value;\n//          });\n\n//  This is a reference implementation. You are free to copy, modify, or\n//  redistribute.\n\n/*jslint\n    eval, for, this\n*/\n\n/*property\n    JSON, apply, call, charCodeAt, getUTCDate, getUTCFullYear, getUTCHours,\n    getUTCMinutes, getUTCMonth, getUTCSeconds, hasOwnProperty, join,\n    lastIndex, length, parse, prototype, push, replace, slice, stringify,\n    test, toJSON, toString, valueOf\n*/\n\n\n// Create a JSON object only if one does not already exist. We create the\n// methods in a closure to avoid creating global variables.\n\nif (typeof JSON !== \"object\") {\n    JSON = {};\n}\n\n(function () {\n    \"use strict\";\n\n    var rx_one = /^[\\],:{}\\s]*$/;\n    var rx_two = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\n    var rx_three = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\n    var rx_four = /(?:^|:|,)(?:\\s*\\[)+/g;\n    var rx_escapable = /[\\\\\"\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n    var rx_dangerous = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n\n    function f(n) {\n        // Format integers to have at least two digits.\n        return n < 10\n            ? \"0\" + n\n            : n;\n    }\n\n    function this_value() {\n        return this.valueOf();\n    }\n\n    if (typeof Date.prototype.toJSON !== \"function\") {\n\n        Date.prototype.toJSON = function () {\n\n            return isFinite(this.valueOf())\n                ? this.getUTCFullYear() + \"-\" +\n                        f(this.getUTCMonth() + 1) + \"-\" +\n                        f(this.getUTCDate()) + \"T\" +\n                        f(this.getUTCHours()) + \":\" +\n                        f(this.getUTCMinutes()) + \":\" +\n                        f(this.getUTCSeconds()) + \"Z\"\n                : null;\n        };\n\n        Boolean.prototype.toJSON = this_value;\n        Number.prototype.toJSON = this_value;\n        String.prototype.toJSON = this_value;\n    }\n\n    var gap;\n    var indent;\n    var meta;\n    var rep;\n\n\n    function quote(string) {\n\n// If the string contains no control characters, no quote characters, and no\n// backslash characters, then we can safely slap some quotes around it.\n// Otherwise we must also replace the offending characters with safe escape\n// sequences.\n\n        rx_escapable.lastIndex = 0;\n        return rx_escapable.test(string)\n            ? \"\\\"\" + string.replace(rx_escapable, function (a) {\n                var c = meta[a];\n                return typeof c === \"string\"\n                    ? c\n                    : \"\\\\u\" + (\"0000\" + a.charCodeAt(0).toString(16)).slice(-4);\n            }) + \"\\\"\"\n            : \"\\\"\" + string + \"\\\"\";\n    }\n\n\n    function str(key, holder) {\n\n// Produce a string from holder[key].\n\n        var i;          // The loop counter.\n        var k;          // The member key.\n        var v;          // The member value.\n        var length;\n        var mind = gap;\n        var partial;\n        var value = holder[key];\n\n// If the value has a toJSON method, call it to obtain a replacement value.\n\n        if (value && typeof value === \"object\" &&\n                typeof value.toJSON === \"function\") {\n            value = value.toJSON(key);\n        }\n\n// If we were called with a replacer function, then call the replacer to\n// obtain a replacement value.\n\n        if (typeof rep === \"function\") {\n            value = rep.call(holder, key, value);\n        }\n\n// What happens next depends on the value's type.\n\n        switch (typeof value) {\n        case \"string\":\n            return quote(value);\n\n        case \"number\":\n\n// JSON numbers must be finite. Encode non-finite numbers as null.\n\n            return isFinite(value)\n                ? String(value)\n                : \"null\";\n\n        case \"boolean\":\n        case \"null\":\n\n// If the value is a boolean or null, convert it to a string. Note:\n// typeof null does not produce \"null\". The case is included here in\n// the remote chance that this gets fixed someday.\n\n            return String(value);\n\n// If the type is \"object\", we might be dealing with an object or an array or\n// null.\n\n        case \"object\":\n\n// Due to a specification blunder in ECMAScript, typeof null is \"object\",\n// so watch out for that case.\n\n            if (!value) {\n                return \"null\";\n            }\n\n// Make an array to hold the partial results of stringifying this object value.\n\n            gap += indent;\n            partial = [];\n\n// Is the value an array?\n\n            if (Object.prototype.toString.apply(value) === \"[object Array]\") {\n\n// The value is an array. Stringify every element. Use null as a placeholder\n// for non-JSON values.\n\n                length = value.length;\n                for (i = 0; i < length; i += 1) {\n                    partial[i] = str(i, value) || \"null\";\n                }\n\n// Join all of the elements together, separated with commas, and wrap them in\n// brackets.\n\n                v = partial.length === 0\n                    ? \"[]\"\n                    : gap\n                        ? \"[\\n\" + gap + partial.join(\",\\n\" + gap) + \"\\n\" + mind + \"]\"\n                        : \"[\" + partial.join(\",\") + \"]\";\n                gap = mind;\n                return v;\n            }\n\n// If the replacer is an array, use it to select the members to be stringified.\n\n            if (rep && typeof rep === \"object\") {\n                length = rep.length;\n                for (i = 0; i < length; i += 1) {\n                    if (typeof rep[i] === \"string\") {\n                        k = rep[i];\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (\n                                gap\n                                    ? \": \"\n                                    : \":\"\n                            ) + v);\n                        }\n                    }\n                }\n            } else {\n\n// Otherwise, iterate through all of the keys in the object.\n\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (\n                                gap\n                                    ? \": \"\n                                    : \":\"\n                            ) + v);\n                        }\n                    }\n                }\n            }\n\n// Join all of the member texts together, separated with commas,\n// and wrap them in braces.\n\n            v = partial.length === 0\n                ? \"{}\"\n                : gap\n                    ? \"{\\n\" + gap + partial.join(\",\\n\" + gap) + \"\\n\" + mind + \"}\"\n                    : \"{\" + partial.join(\",\") + \"}\";\n            gap = mind;\n            return v;\n        }\n    }\n\n// If the JSON object does not yet have a stringify method, give it one.\n\n    if (typeof JSON.stringify !== \"function\") {\n        meta = {    // table of character substitutions\n            \"\\b\": \"\\\\b\",\n            \"\\t\": \"\\\\t\",\n            \"\\n\": \"\\\\n\",\n            \"\\f\": \"\\\\f\",\n            \"\\r\": \"\\\\r\",\n            \"\\\"\": \"\\\\\\\"\",\n            \"\\\\\": \"\\\\\\\\\"\n        };\n        JSON.stringify = function (value, replacer, space) {\n\n// The stringify method takes a value and an optional replacer, and an optional\n// space parameter, and returns a JSON text. The replacer can be a function\n// that can replace values, or an array of strings that will select the keys.\n// A default replacer method can be provided. Use of the space parameter can\n// produce text that is more easily readable.\n\n            var i;\n            gap = \"\";\n            indent = \"\";\n\n// If the space parameter is a number, make an indent string containing that\n// many spaces.\n\n            if (typeof space === \"number\") {\n                for (i = 0; i < space; i += 1) {\n                    indent += \" \";\n                }\n\n// If the space parameter is a string, it will be used as the indent string.\n\n            } else if (typeof space === \"string\") {\n                indent = space;\n            }\n\n// If there is a replacer, it must be a function or an array.\n// Otherwise, throw an error.\n\n            rep = replacer;\n            if (replacer && typeof replacer !== \"function\" &&\n                    (typeof replacer !== \"object\" ||\n                    typeof replacer.length !== \"number\")) {\n                throw new Error(\"JSON.stringify\");\n            }\n\n// Make a fake root object containing our value under the key of \"\".\n// Return the result of stringifying the value.\n\n            return str(\"\", {\"\": value});\n        };\n    }\n\n\n// If the JSON object does not yet have a parse method, give it one.\n\n    if (typeof JSON.parse !== \"function\") {\n        JSON.parse = function (text, reviver) {\n\n// The parse method takes a text and an optional reviver function, and returns\n// a JavaScript value if the text is a valid JSON text.\n\n            var j;\n\n            function walk(holder, key) {\n\n// The walk method is used to recursively walk the resulting structure so\n// that modifications can be made.\n\n                var k;\n                var v;\n                var value = holder[key];\n                if (value && typeof value === \"object\") {\n                    for (k in value) {\n                        if (Object.prototype.hasOwnProperty.call(value, k)) {\n                            v = walk(value, k);\n                            if (v !== undefined) {\n                                value[k] = v;\n                            } else {\n                                delete value[k];\n                            }\n                        }\n                    }\n                }\n                return reviver.call(holder, key, value);\n            }\n\n\n// Parsing happens in four stages. In the first stage, we replace certain\n// Unicode characters with escape sequences. JavaScript handles many characters\n// incorrectly, either silently deleting them, or treating them as line endings.\n\n            text = String(text);\n            rx_dangerous.lastIndex = 0;\n            if (rx_dangerous.test(text)) {\n                text = text.replace(rx_dangerous, function (a) {\n                    return \"\\\\u\" +\n                            (\"0000\" + a.charCodeAt(0).toString(16)).slice(-4);\n                });\n            }\n\n// In the second stage, we run the text against regular expressions that look\n// for non-JSON patterns. We are especially concerned with \"()\" and \"new\"\n// because they can cause invocation, and \"=\" because it can cause mutation.\n// But just to be safe, we want to reject all unexpected forms.\n\n// We split the second stage into 4 regexp operations in order to work around\n// crippling inefficiencies in IE's and Safari's regexp engines. First we\n// replace the JSON backslash pairs with \"@\" (a non-JSON character). Second, we\n// replace all simple value tokens with \"]\" characters. Third, we delete all\n// open brackets that follow a colon or comma or that begin the text. Finally,\n// we look to see that the remaining characters are only whitespace or \"]\" or\n// \",\" or \":\" or \"{\" or \"}\". If that is so, then the text is safe for eval.\n\n            if (\n                rx_one.test(\n                    text\n                        .replace(rx_two, \"@\")\n                        .replace(rx_three, \"]\")\n                        .replace(rx_four, \"\")\n                )\n            ) {\n\n// In the third stage we use the eval function to compile the text into a\n// JavaScript structure. The \"{\" operator is subject to a syntactic ambiguity\n// in JavaScript: it can begin a block or an object literal. We wrap the text\n// in parens to eliminate the ambiguity.\n\n                j = eval(\"(\" + text + \")\");\n\n// In the optional fourth stage, we recursively walk the new structure, passing\n// each name/value pair to a reviver function for possible transformation.\n\n                return (typeof reviver === \"function\")\n                    ? walk({\"\": j}, \"\")\n                    : j;\n            }\n\n// If the text is not JSON parseable, then a SyntaxError is thrown.\n\n            throw new SyntaxError(\"JSON.parse\");\n        };\n    }\n}());","import { DisplayMode, Engine, Loader, Input, Logger, Color } from \"excalibur\";\nimport { loadPreferences } from \"./preferences\";\nimport { Level } from \"./level\";\nimport { Resources } from \"./resources\";\nimport { SoundManager } from \"./sound-manager\";\nimport { DevTool } from \"@excaliburjs/dev-tools\";\nimport config from \"./config\";\nimport * as dat from \"dat.gui\"\n\nconst getNumDigits = (val: any) => {\n    return (`${val}`.match(/\\d/g) || []).length //a regex to compute the number of digits in a number. Note that decimals will get counted as digits, which is why to establish our limit and step we rounded\n  }\nconst buildGui = (gui: any, folder: any,  obj: any) => {\n    for(const key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            let val = obj[key];\n            if (typeof val == 'number') { //if the value of the object key is a number, establish limits and step\n                const numgiDigits = getNumDigits(val);\n                let step, limit;\n                if (val > -1 && val < 1) { //if it's a small decimal number, give it a GUI range of -1,1 with a step of 0.1...\n                    step = 0.1;\n                    limit = 1;\n                } else { //otherwise, calculate the limits and step based on # of digits in the number\n                    const numDigits = getNumDigits(Math.round(val)); //to establish a step and limit, we'll use a base number that is an integer\n                    limit = Math.pow(10, numDigits); //make the limit one digit higher than the number of digits of the itself, i.e. '150' would have a range of -1000 to 1000...\n                    step = 1; //...with a step one less than the number of digits, i.e. '10'\n                }\n                folder.add(obj, key, 0, limit).step(step); //add the value to your GUI folder\n            } else if (typeof val === 'object') {\n                let subfolder = folder.addFolder(key);\n                buildGui(gui, subfolder, val); //if the key is an object itself, call this function again to loop through that subobject, assigning it to the same folder\n            } else {\n                folder.add(obj, key); //...this would include things like boolean values as checkboxes, and strings as text fields\n            }\n        }\n    }\n}\n\nif(true){\n    const gui = new dat.GUI({name: \"Ludum 50\"});\n    let folder= gui.addFolder(\"Ludum 50\");\n    buildGui(gui, folder, config);\n}\n\n\n\nloadPreferences();\nSoundManager.init();\nexport class Game extends Engine {\n    showDevTool: boolean = config.ShowDevTool;\n    devTool!: DevTool;\n    constructor() {\n        super({\n            canvasElementId: 'game',\n            displayMode: DisplayMode.FitScreen,\n            antialiasing: false,\n            // .5 tile of padding for now\n            resolution: { width: config.grid.tileWidth * (config.grid.width + config.grid.padding), height: config.grid.tileHeight * (config.grid.height + config.grid.padding) }\n        });\n    }\n\n    init() {\n        this.startLevel();\n        const loader = new Loader();\n        for (const resource of Object.values(Resources)) {\n            loader.addResource(resource);\n        }\n        this.start(loader).then(() => {\n            // game start stuff\n            this.screen.forceResize();\n        });\n\n    }\n\n    startLevel = () => {\n        const level = new Level();\n        this.addScene(\"main\", level);\n        this.goToScene(\"main\");\n    }\n\n    setupDevTool = () => {\n        if (this.showDevTool) {\n            this.devTool = new DevTool(this);\n            let configTab = this.devTool.pane.addTab({\n                pages: [{\n                    title: \"Config\"\n                }]\n            })\n            let configPage = configTab.pages[0];\n\n            const recurse = (config: any, currentKey: string, maxDepth: number) => {\n                for (let key in config) {\n                    if (maxDepth <= 0) return;\n                    const newKey = (currentKey === '' ? '' : currentKey + '_') + key;\n\n                    if (config[key] instanceof Color) {\n                        configPage.addInput(config, key, {\n                            label: newKey\n                        });\n                        return;\n                    }\n\n                    if (typeof config[key] === 'object') {\n                        recurse(config[key], newKey, maxDepth - 1);\n                    } else {\n                        configPage.addInput(config, key as any, {\n                            disabled: true, // config not editable yet,\n                            label: newKey\n                        })\n                    }\n                }\n            }\n\n            recurse(config, '', 6);\n        }\n    }\n}\n\n\n\nexport const game = new Game();\n\ngame.backgroundColor = Color.fromHex('#eec39a');\n\n// debugging hotkeys\n// Pressing 'p' on the keyboard will toggle pause/resume of the game\n// Pressing ';' will toggle excalibur debug mode (this won't update unless game is running)\n// game.input.keyboard.on('release', (event) => {\n//     switch(event.key) {\n//         case Input.Keys.P : \n//             if (game.isRunning()) {\n//                 game.stop();\n//                 Logger.getInstance().info('game paused');\n//             } else {\n//                 game.start();\n//                 Logger.getInstance().info('game resumed');\n//             }\n//             break;\n//         case Input.Keys.Semicolon :\n//             game.toggleDebug();\n//             break;\n//         case Input.Keys.Equal :\n//             game.setupDevTool();\n//             break;\n//     }\n// });\n\ngame.init();","var util = require('./util')\nvar slice = util.slice\nvar pluck = util.pluck\nvar each = util.each\nvar bind = util.bind\nvar create = util.create\nvar isList = util.isList\nvar isFunction = util.isFunction\nvar isObject = util.isObject\n\nmodule.exports = {\n\tcreateStore: createStore\n}\n\nvar storeAPI = {\n\tversion: '2.0.12',\n\tenabled: false,\n\t\n\t// get returns the value of the given key. If that value\n\t// is undefined, it returns optionalDefaultValue instead.\n\tget: function(key, optionalDefaultValue) {\n\t\tvar data = this.storage.read(this._namespacePrefix + key)\n\t\treturn this._deserialize(data, optionalDefaultValue)\n\t},\n\n\t// set will store the given value at key and returns value.\n\t// Calling set with value === undefined is equivalent to calling remove.\n\tset: function(key, value) {\n\t\tif (value === undefined) {\n\t\t\treturn this.remove(key)\n\t\t}\n\t\tthis.storage.write(this._namespacePrefix + key, this._serialize(value))\n\t\treturn value\n\t},\n\n\t// remove deletes the key and value stored at the given key.\n\tremove: function(key) {\n\t\tthis.storage.remove(this._namespacePrefix + key)\n\t},\n\n\t// each will call the given callback once for each key-value pair\n\t// in this store.\n\teach: function(callback) {\n\t\tvar self = this\n\t\tthis.storage.each(function(val, namespacedKey) {\n\t\t\tcallback.call(self, self._deserialize(val), (namespacedKey || '').replace(self._namespaceRegexp, ''))\n\t\t})\n\t},\n\n\t// clearAll will remove all the stored key-value pairs in this store.\n\tclearAll: function() {\n\t\tthis.storage.clearAll()\n\t},\n\n\t// additional functionality that can't live in plugins\n\t// ---------------------------------------------------\n\n\t// hasNamespace returns true if this store instance has the given namespace.\n\thasNamespace: function(namespace) {\n\t\treturn (this._namespacePrefix == '__storejs_'+namespace+'_')\n\t},\n\n\t// createStore creates a store.js instance with the first\n\t// functioning storage in the list of storage candidates,\n\t// and applies the the given mixins to the instance.\n\tcreateStore: function() {\n\t\treturn createStore.apply(this, arguments)\n\t},\n\t\n\taddPlugin: function(plugin) {\n\t\tthis._addPlugin(plugin)\n\t},\n\t\n\tnamespace: function(namespace) {\n\t\treturn createStore(this.storage, this.plugins, namespace)\n\t}\n}\n\nfunction _warn() {\n\tvar _console = (typeof console == 'undefined' ? null : console)\n\tif (!_console) { return }\n\tvar fn = (_console.warn ? _console.warn : _console.log)\n\tfn.apply(_console, arguments)\n}\n\nfunction createStore(storages, plugins, namespace) {\n\tif (!namespace) {\n\t\tnamespace = ''\n\t}\n\tif (storages && !isList(storages)) {\n\t\tstorages = [storages]\n\t}\n\tif (plugins && !isList(plugins)) {\n\t\tplugins = [plugins]\n\t}\n\n\tvar namespacePrefix = (namespace ? '__storejs_'+namespace+'_' : '')\n\tvar namespaceRegexp = (namespace ? new RegExp('^'+namespacePrefix) : null)\n\tvar legalNamespaces = /^[a-zA-Z0-9_\\-]*$/ // alpha-numeric + underscore and dash\n\tif (!legalNamespaces.test(namespace)) {\n\t\tthrow new Error('store.js namespaces can only have alphanumerics + underscores and dashes')\n\t}\n\t\n\tvar _privateStoreProps = {\n\t\t_namespacePrefix: namespacePrefix,\n\t\t_namespaceRegexp: namespaceRegexp,\n\n\t\t_testStorage: function(storage) {\n\t\t\ttry {\n\t\t\t\tvar testStr = '__storejs__test__'\n\t\t\t\tstorage.write(testStr, testStr)\n\t\t\t\tvar ok = (storage.read(testStr) === testStr)\n\t\t\t\tstorage.remove(testStr)\n\t\t\t\treturn ok\n\t\t\t} catch(e) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\n\t\t_assignPluginFnProp: function(pluginFnProp, propName) {\n\t\t\tvar oldFn = this[propName]\n\t\t\tthis[propName] = function pluginFn() {\n\t\t\t\tvar args = slice(arguments, 0)\n\t\t\t\tvar self = this\n\n\t\t\t\t// super_fn calls the old function which was overwritten by\n\t\t\t\t// this mixin.\n\t\t\t\tfunction super_fn() {\n\t\t\t\t\tif (!oldFn) { return }\n\t\t\t\t\teach(arguments, function(arg, i) {\n\t\t\t\t\t\targs[i] = arg\n\t\t\t\t\t})\n\t\t\t\t\treturn oldFn.apply(self, args)\n\t\t\t\t}\n\n\t\t\t\t// Give mixing function access to super_fn by prefixing all mixin function\n\t\t\t\t// arguments with super_fn.\n\t\t\t\tvar newFnArgs = [super_fn].concat(args)\n\n\t\t\t\treturn pluginFnProp.apply(self, newFnArgs)\n\t\t\t}\n\t\t},\n\n\t\t_serialize: function(obj) {\n\t\t\treturn JSON.stringify(obj)\n\t\t},\n\n\t\t_deserialize: function(strVal, defaultVal) {\n\t\t\tif (!strVal) { return defaultVal }\n\t\t\t// It is possible that a raw string value has been previously stored\n\t\t\t// in a storage without using store.js, meaning it will be a raw\n\t\t\t// string value instead of a JSON serialized string. By defaulting\n\t\t\t// to the raw string value in case of a JSON parse error, we allow\n\t\t\t// for past stored values to be forwards-compatible with store.js\n\t\t\tvar val = ''\n\t\t\ttry { val = JSON.parse(strVal) }\n\t\t\tcatch(e) { val = strVal }\n\n\t\t\treturn (val !== undefined ? val : defaultVal)\n\t\t},\n\t\t\n\t\t_addStorage: function(storage) {\n\t\t\tif (this.enabled) { return }\n\t\t\tif (this._testStorage(storage)) {\n\t\t\t\tthis.storage = storage\n\t\t\t\tthis.enabled = true\n\t\t\t}\n\t\t},\n\n\t\t_addPlugin: function(plugin) {\n\t\t\tvar self = this\n\n\t\t\t// If the plugin is an array, then add all plugins in the array.\n\t\t\t// This allows for a plugin to depend on other plugins.\n\t\t\tif (isList(plugin)) {\n\t\t\t\teach(plugin, function(plugin) {\n\t\t\t\t\tself._addPlugin(plugin)\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Keep track of all plugins we've seen so far, so that we\n\t\t\t// don't add any of them twice.\n\t\t\tvar seenPlugin = pluck(this.plugins, function(seenPlugin) {\n\t\t\t\treturn (plugin === seenPlugin)\n\t\t\t})\n\t\t\tif (seenPlugin) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.plugins.push(plugin)\n\n\t\t\t// Check that the plugin is properly formed\n\t\t\tif (!isFunction(plugin)) {\n\t\t\t\tthrow new Error('Plugins must be function values that return objects')\n\t\t\t}\n\n\t\t\tvar pluginProperties = plugin.call(this)\n\t\t\tif (!isObject(pluginProperties)) {\n\t\t\t\tthrow new Error('Plugins must return an object of function properties')\n\t\t\t}\n\n\t\t\t// Add the plugin function properties to this store instance.\n\t\t\teach(pluginProperties, function(pluginFnProp, propName) {\n\t\t\t\tif (!isFunction(pluginFnProp)) {\n\t\t\t\t\tthrow new Error('Bad plugin property: '+propName+' from plugin '+plugin.name+'. Plugins should only return functions.')\n\t\t\t\t}\n\t\t\t\tself._assignPluginFnProp(pluginFnProp, propName)\n\t\t\t})\n\t\t},\n\t\t\n\t\t// Put deprecated properties in the private API, so as to not expose it to accidential\n\t\t// discovery through inspection of the store object.\n\t\t\n\t\t// Deprecated: addStorage\n\t\taddStorage: function(storage) {\n\t\t\t_warn('store.addStorage(storage) is deprecated. Use createStore([storages])')\n\t\t\tthis._addStorage(storage)\n\t\t}\n\t}\n\n\tvar store = create(_privateStoreProps, storeAPI, {\n\t\tplugins: []\n\t})\n\tstore.raw = {}\n\teach(store, function(prop, propName) {\n\t\tif (isFunction(prop)) {\n\t\t\tstore.raw[propName] = bind(store, prop)\t\t\t\n\t\t}\n\t})\n\teach(storages, function(storage) {\n\t\tstore._addStorage(storage)\n\t})\n\teach(plugins, function(plugin) {\n\t\tstore._addPlugin(plugin)\n\t})\n\treturn store\n}\n","module.exports = [\n\t// Listed in order of usage preference\n\trequire('./localStorage'),\n\trequire('./oldFF-globalStorage'),\n\trequire('./oldIE-userDataStorage'),\n\trequire('./cookieStorage'),\n\trequire('./sessionStorage'),\n\trequire('./memoryStorage')\n]\n","var engine = require('../src/store-engine')\n\nvar storages = require('../storages/all')\nvar plugins = [require('../plugins/json2')]\n\nmodule.exports = engine.createStore(storages, plugins)\n","import store from \"store\";\n\nexport let Preferences = {\n  muteBackgroundMusic: false,\n  muteAll: false,\n};\n\nlet _origPreferences = { ...Preferences };\n\nexport function resetPreferences() {\n  Preferences = { ..._origPreferences };\n}\n\nexport function savePreferences() {\n  store.set(\"pref\", Preferences);\n}\n\nexport function loadPreferences() {\n  // overwrite but allow new properties\n  Preferences = { ...Preferences, ...store.get(\"pref\") };\n}","import { Engine, Random, Scene, vec, Timer, Actor, Color } from \"excalibur\";\nimport { Resources } from \"./resources\";\nimport config from \"./config\";\nimport { Grid } from \"./grid\";\nimport { SandCastle } from \"./sandcastle\";\nimport { EnemyGenerator } from \"./enemyGenerator\";\nimport { EnemyType } from \"./enemy\";\nimport { Tower, TowerType } from \"./tower\";\nimport { TowerPlacer } from \"./tower-placer\";\nimport { WaveDispatcher } from \"./wave-dispatcher\";\nimport { GameOver } from \"./game-over\";\nimport { SoundManager } from \"./sound-manager\";\nimport { Water } from \"./water-edge\";\nimport { PlayerState } from \"./playerState\";\n\nexport class Level extends Scene {\n    random = new Random(Date.now());\n    grid!: Grid;\n    sandCastles: SandCastle[] = [];\n    enemyGenerator!: EnemyGenerator;\n    towerPlacer!: TowerPlacer;\n    waveDispatcher!: WaveDispatcher;\n    gameOver!: GameOver;\n\n    private _playerWealthTick = 0;\n    private _playerWealthGeneration = config.player.passiveWealthTick;\n    onPostUpdate(_engine: Engine, _delta: number): void {\n        this._playerWealthTick += _delta / 1000;\n        if(this._playerWealthTick >= this._playerWealthGeneration) {\n            PlayerState.AddMoney(config.player.passiveWealthAmt);\n            this._playerWealthTick = 0;\n        }\n    }\n\n    onInitialize(engine: Engine): void {\n        SoundManager.startBackgroundMusic();\n        \n        // Grab the random seed\n        config.Seed = this.random.seed as number;\n\n        // Sand grid\n        this.grid = new Grid(vec(config.grid.tileWidth, 0), config.grid.height, config.grid.width, config.grid.tileWidth, config.grid.tileHeight);\n        this.add(this.grid.tileMap);\n\n        // Water waves at the end\n        for (let y = 0; y < config.grid.height * 2; y++) {\n            const wave = new Water(this.grid, config.grid.tileWidth/2, y, 0, 0);\n            wave.z = 0;\n            this.add(wave);\n            const wave2 = new Water(this.grid, config.grid.tileWidth, y, config.grid.tileHeight/2, 500);\n            wave2.z = 5;\n            this.add(wave2);\n\n            // Make water unbuildable\n            const tile = this.grid.tileMap.getTile(config.grid.width - 1, y);\n            if (tile) {\n                tile.data.set(\"water\", true);\n            }\n        }\n\n        this.enemyGenerator = new EnemyGenerator(this, this.random);\n\n        // Initial towers\n        const tutorialDefaultTower = new Tower(TowerType.default, this.grid, 4, 3);\n        this.grid.tileMap.getTile(4, 3).data.set(\"tower\", tutorialDefaultTower);\n        this.add(tutorialDefaultTower);\n\n        const tutorialSandbucketTower = new Tower(TowerType.sandBucket, this.grid, 0, 3);\n        this.grid.tileMap.getTile(0, 3).data.set(\"tower\", tutorialSandbucketTower);\n        this.add(tutorialSandbucketTower);\n        \n        // Initial enemy (aligned with the initial default tower)\n        const addTutorialEnemy = () => {\n            console.log('adding tutorial enemy');\n            const enemy = this.enemyGenerator.spawnEnemy(EnemyType.Crab, 7, 3);\n            this.add(enemy);\n        }\n        const tutorialEnemyTimer = new Timer({interval: 5000, fcn: () => {\n            addTutorialEnemy();\n        }});\n        this.add(tutorialEnemyTimer);\n        tutorialEnemyTimer.start();\n\n        // Tower placement\n        this.towerPlacer = new TowerPlacer(this.grid, engine);\n\n        this.waveDispatcher = new WaveDispatcher(this.enemyGenerator, this.random);\n        this.add(this.waveDispatcher);\n\n        // Game over handler\n        this.gameOver = new GameOver(engine, this, this.waveDispatcher);\n\n        // Sandcastle(s)\n        for (let y = 0; y < config.grid.height; y++) {\n            const sandcastle = new SandCastle(this.grid, this.gameOver, y);\n            this.sandCastles.push(sandcastle);\n            this.add(sandcastle);\n        }\n\n        const bottomBorder = new Actor({\n            // pos: vec(game.drawWidth / 2, game.drawHeight / 2), // excalibur: this doesn't work\n            // pos: vec(game.canvasWidth / 2, game.canvasHeight / 2), // excalibur: this doesn't work either\n            pos: vec(engine.screen.resolution.width / 2, engine.screen.resolution.height - 32),\n            height: 50, width: 50,\n            color: Color.Orange,\n            z: -1,\n        });\n        bottomBorder.graphics.use(Resources.BottomBorder.toSprite());\n        this.add(bottomBorder);\n\n        const sideBorder = new Actor({\n            pos: vec(32, engine.screen.resolution.height / 2),\n            height: 50, width: 50,\n            color: Color.Orange,\n            z: -1,\n        })\n        sideBorder.graphics.use(Resources.SideBorder.toSprite());\n        this.add(sideBorder);\n\n        const towerMenu = document.getElementById(\"towerSelection\")!;\n        towerMenu.style.display = \"flex\";\n\n        // enemy spawn test\n        // this.enemyGenerator.spawnEnemy(EnemyType.Crab, config.grid.width - 1, 0);\n        // this.enemyGenerator.spawnEnemy(EnemyType.Crab, config.grid.width - 1, 1);\n        // this.enemyGenerator.spawnEnemy(EnemyType.Turtle, config.grid.width - 1, 2);\n        // this.enemyGenerator.spawnEnemy(EnemyType.Crab, config.grid.width - 1, 3);\n        // this.enemyGenerator.spawnEnemy(EnemyType.Turtle, config.grid.width - 1, 4);\n\n        // random enemy spawn test\n        // this.enemyGenerator.spawnEnemyAtRandomTile(EnemyType.Crab);\n        // this.enemyGenerator.spawnEnemyAtRandomTile(EnemyType.Crab);\n        // this.enemyGenerator.spawnEnemyAtRandomTile(EnemyType.Crab);\n    }\n\n    restart() {\n        this.engine.currentScene.entities.forEach(e => e.kill());\n        this.engine.currentScene.onInitialize(this.engine);\n        PlayerState.moneyResource = config.player.startingMonies;\n    }\n\n}","import { TileMap, Vector } from \"excalibur\";\nimport { Resources } from \"./resources\";\n\nexport class Grid {\n    public tileMap: TileMap\n    constructor(pos: Vector, height: number, width: number, tileWidth: number, tileHeight: number) {\n        this.tileMap = new TileMap({\n            name: \"Sand Grid\",\n            pos,\n            width,\n            height,\n            tileWidth,\n            tileHeight\n        });\n        this.tileMap.z = -1;\n        \n        const sandSprite = Resources.Sand.toSprite();\n        for (let tile of this.tileMap.tiles) {\n            tile.addGraphic(sandSprite);\n        }\n    }\n}","import { Grid } from \"./grid\";\nimport config from \"./config\";\nimport { Sprite, Actor, CollisionGroup, CollisionType, vec, PostCollisionEvent } from \"excalibur\";\nimport { Resources } from \"./resources\";\nimport { Enemy } from \"./enemy\";\nimport { GameOver } from \"./game-over\";\nimport { Healthbar } from \"./healthbar\";\n\nexport class SandCastle extends Actor {\n    maxHp: number = config.sandcastle.maxHealth;\n    currentHp: number = this.maxHp;\n    healthBar: Healthbar;\n    sandcastle: Sprite;\n    constructor(grid: Grid, private gameOver: GameOver, row: number) {\n        super({\n            name: 'Sand Castle',\n            pos: grid.tileMap.pos.add(vec(-config.grid.tileWidth/2, row * config.grid.tileHeight + config.grid.tileHeight/2)),\n            width: config.grid.tileWidth,\n            height: config.grid.tileHeight,\n            collisionType: CollisionType.Fixed,\n            collisionGroup: CollisionGroup.collidesWith([Enemy.CollisionGroupGround, Enemy.CollisionGroupFlying])\n        });\n        this.on('postcollision', evt => this.onPostCollision(evt));\n\n        this.sandcastle = Resources.SandCastle.toSprite();\n        // this.graphics.use(this.sandcastle);\n        this.graphics.add('default', this.sandcastle);\n        // this.graphics.add('damaged', Resources.SandCastleDamaged.toSprite());\n        // this.graphics.add('destroyed', Resources.SandCastleDestroyed.toSprite());\n\n        // draw health bar\n        this.healthBar = new Healthbar(this.maxHp);\n        this.addChild(this.healthBar);\n    }\n\n    onPostCollision(evt: PostCollisionEvent) {\n        this.takeDamage();\n        evt.other.kill();\n    }\n\n    takeDamage() {\n        const damage = 1;\n        this.currentHp -= damage;\n        this.healthBar.takeDamage(damage);\n\n        const origPos = this.pos.clone();\n\n        this.actions\n            .easeTo(origPos.add(vec(3, 0)), 50)\n            .easeTo(origPos.add(vec(-3, 0)), 70)\n            .easeTo(origPos, 50);\n        \n        Resources.FxImpactCastleByEnemy.play();\n\n        // TODO for some reason, switching to a new graphic or replacing current graphic for a sandcastle causes a fatal error in Excalibur's draw code\n        // if (this.currentHp = 1) {\n        //     this.graphics.show('damaged');\n        //     // this.graphics.use(Resources.SandCastleDamaged.toSprite());\n        // }\n\n        if (this.currentHp <= 0) {\n            // this.graphics.use(Resources.SandCastleDestroyed.toSprite());\n            // this.graphics.show('destroyed');\n            // this.graphics.show('default');\n            this.kill();\n            this.gameOver.triggerGameOver();\n        }\n    }\n}","import config from \"./config\";\nimport { Tile, Random, range } from \"excalibur\";\nimport { Level } from \"./level\";\nimport { Enemy, EnemyType } from \"./enemy\";\n\n\nexport class EnemyGenerator {\n\n    possibleSpawnTiles: Tile[] = [];\n\n    constructor(private level: Level, private random: Random) {\n        // Currently, this only picks the tiles from the furthest right column of the grid.\n        for (let i = 0; i < config.grid.height; i++) {\n            this.possibleSpawnTiles.push(this.level.grid.tileMap.getTile(config.grid.width - 1, i));\n        }\n    }\n\n    /**\n     * \n     * @param type the EnemyType\n     * @param gridX the grid square x coordinate ('2' would be the third square from the left)\n     * @param gridY the grid square y coordinate ('1' would be the second square from the top)\n     */\n    public spawnEnemy(type: EnemyType, gridX: number, gridY: number) {\n        const enemySpawnTile = this.level.grid.tileMap.getTile(gridX, gridY);\n        const enemy = new Enemy(type, this.level.grid, enemySpawnTile.pos.x + config.grid.tileWidth / 2, enemySpawnTile.pos.y + config.grid.tileHeight / 2);\n        this.level.add(enemy);\n        enemy.claimTiles(enemySpawnTile, enemySpawnTile);\n        return enemy;\n    }\n\n    /**\n     * Spawns an enemy at a random tile from the available possible spawn tiles\n     */\n    public spawnEnemyAtRandomTile(type: EnemyType, possible?: number[]) {\n        \n        const randomYIndex = this.random.integer(0, this.possibleSpawnTiles.length - 1);\n\n        return this.spawnEnemy(type, config.grid.width - 1, randomYIndex);\n    }\n\n    public spawnEnemies(type: EnemyType, count: number) {\n        const set = this.random.pickSet(range(0, this.possibleSpawnTiles.length - 1), count, true);\n        let enemies = [];\n        for (let index of set) {\n            enemies.push(this.spawnEnemy(type, config.grid.width - 1, index));\n        }\n        return enemies;\n    }\n\n}","import { Engine, Input, Tile, Actor, Color, Rectangle, vec, Circle } from \"excalibur\";\nimport { Tower, TowerType } from \"./tower\";\nimport { Grid } from \"./grid\";\nimport config from \"./config\";\nimport { Enemy } from \"./enemy\";\nimport { PlayerState } from \"./playerState\";\nimport { TowerBroken } from \"./towerbroken\";\nimport { Resources } from \"./resources\";\n\nexport class TowerPlacer {\n  private _grid: Grid;\n  private _engine: Engine;\n  private _highlightedTile: Tile | null = null;\n  private _highlight: Actor;\n  private _rect: Rectangle;\n  selectedTowerType: TowerType = TowerType.default;\n  private ghostTower: Actor;\n  private towerPlacementBlockedOrDisallowed: boolean = false; // used only for cursor updates for squares blocked by enemy units or ocean waves\n  constructor(grid: Grid, engine: Engine) {\n    this._grid = grid;\n    this._engine = engine;\n    engine.input.pointers.primary.on(\"move\", (evt) => this.onPointerMove(evt));\n    engine.input.pointers.primary.on(\"down\", (evt) => this.onConfirm(evt));\n    this._highlight = new Actor({\n      pos: vec(-100, -100), // default offscreen\n    });\n    this.ghostTower = new Actor();\n    this.ghostTower.graphics.opacity = 0.5;\n    this._highlight.onPostUpdate = () => {\n      if (this._highlightedTile == null) return;\n\n      if (this._highlightedTile.data.has(\"tower\")) {\n        this._rect.strokeColor = Color.Yellow;\n        this._placeable = false;\n        this.towerPlacementBlockedOrDisallowed = false;\n      } else if (Enemy.enemiesInTile(this._highlightedTile) > 0 || this._highlightedTile.data.has(\"water\")) {\n        this._placeable = !this._highlightedTile.data.has(\"water\");\n        this._rect.strokeColor = Color.Red;\n        this.towerPlacementBlockedOrDisallowed = true;\n        const blockedSprite = Resources.BlockedCursor.toSprite();\n        this.ghostTower.graphics.use(blockedSprite);\n      } else {\n        this._rect.strokeColor = Color.Green;\n        this._placeable = true;\n        this.towerPlacementBlockedOrDisallowed = false;\n        const sprite = config.tower[(window as any).TowerPickerUI.selectedTower() as TowerType]?.sprite?.toSprite();\n        this.ghostTower.graphics.use(sprite);\n      }\n      this.updateGhostTowerVisibility();\n    };\n    this._rect = new Rectangle({\n      width: config.grid.tileWidth,\n      height: config.grid.tileHeight,\n      color: Color.Transparent,\n      strokeColor: Color.Green,\n      lineWidth: 3,\n      lineDash: [3, 3],\n    });\n    this._highlight.graphics.use(this._rect);\n    engine.add(this._highlight);\n    engine.add(this.ghostTower);\n  }\n\n  private _placeable: boolean = true;\n  private _hasSprite: boolean = true;\n  showGhostTower(): boolean { return this._placeable && this._hasSprite; }\n\n  updateGhostTowerVisibility() { this.ghostTower.graphics.visible = this.showGhostTower(); }\n\n  onPointerMove(evt: Input.PointerEvent) {\n    // TODO add tile highlight\n    const maybeTile = this._grid.tileMap.getTileByPoint(evt.worldPos);\n    const sprite = config.tower[(window as any).TowerPickerUI.selectedTower() as TowerType]?.sprite?.toSprite();\n    if(sprite) {\n      if (this.towerPlacementBlockedOrDisallowed) {\n        const blockedSprite = Resources.BlockedCursor.toSprite();\n        this.ghostTower.graphics.use(blockedSprite);\n        this._hasSprite = true;\n      } else {\n        this.ghostTower.graphics.use(sprite);\n        this._hasSprite = true;\n      }\n    } else {\n      this._hasSprite = false;\n    }\n    this.updateGhostTowerVisibility();\n\n    if (maybeTile) {\n      this._highlightedTile = maybeTile;\n      this._highlight.pos = this._highlightedTile.pos.add(\n        vec(config.grid.tileWidth / 2, config.grid.tileHeight / 2)\n      );\n      this.ghostTower.pos = this._highlight.pos;\n    }\n  }\n\n  onConfirm(evt: Input.PointerEvent) {\n    // On touch devices we need to set the highlighted tile if not already\n    if (evt.pointerType === Input.PointerType.Touch) {\n        const maybeTile = this._grid.tileMap.getTileByPoint(evt.worldPos);\n        if (maybeTile) {\n            this._highlightedTile = maybeTile;\n            this._highlight.pos = this._highlightedTile.pos.add(\n              vec(config.grid.tileWidth / 2, config.grid.tileHeight / 2)\n            );\n          }\n    }\n\n    // Ignore right clicks\n    if (evt.pointerType === Input.PointerType.Mouse) {\n        const mouse = evt.nativeEvent as MouseEvent;\n        if (mouse.button === 2) {\n            return;\n        }\n    }\n    if (this._highlightedTile) {\n      if (this._highlightedTile.data.has(\"tower\") || this._highlightedTile.data.has(\"water\")) {\n        console.log(\"Tower already there!\");\n      } else if (Enemy.enemiesInTile(this._highlightedTile) > 0) {\n        console.log(\"Enemy already there!\");\n      } else {\n        const selectedTower = (window as any).TowerPickerUI.selectedTower(); // TODO a way to get types?\n        const tower = new Tower(\n          selectedTower,\n          this._grid,\n          this._highlightedTile.x,\n          this._highlightedTile.y\n        );\n        if (PlayerState.SubtractMoney(tower.cost)) {\n          this._highlightedTile.data.set(\"tower\", tower);\n          TowerBroken.removeBrokenTower(this._highlightedTile);\n          this._engine.add(tower);\n          Resources.FxPlaceTower.play();\n        }\n      }\n    }\n  }\n}\n","import config from \"./config\";\nimport { Engine, Text, Font, Actor, vec, Random, EasingFunctions, range} from \"excalibur\";\nimport { EnemyGenerator } from './enemyGenerator';\nimport { Enemy, EnemyType } from \"./enemy\";\nimport { Resources } from './resources';\n\nexport class WaveDispatcher extends Actor {\n    private _spawner: EnemyGenerator;\n    private _text: Text;\n    private _textActor: Actor;\n    private _random: Random;\n    // private _engine: Engine;\n    \n    constructor(spawner: EnemyGenerator, random: Random) {\n        super({\n            name: 'WaveDispatcher'\n        })\n        this._spawner = spawner;\n        this._random = random;\n        this._textActor = new Actor({\n            pos: vec(config.grid.width * config.grid.tileWidth + 500, (config.grid.height / 2) * config.grid.tileHeight),\n            z: 10\n        });\n        this._text = new Text({\n            text: 'Wave 1',\n            font: new Font({\n                size: 32,\n                family: 'Kanit, sans-serif',\n                quality: 8,\n                smoothing: true\n            }),\n        })\n        this._textActor.graphics.use(this._text);\n        this.addChild(this._textActor)\n    }\n    \n    override onInitialize(engine: Engine) {\n        // this._engine = engine;\n    }\n    \n    private _stopped = false;\n    public stop() {\n        this._stopped = true;\n    }\n    \n    private _currentTime: number = 0;\n    private _currentWave: number = 0; // TODO skip to end for testing\n    private _currentEnemies: Enemy[] = [];\n    private _dispatched: number[] = [];\n    override onPostUpdate(_engine: Engine, deltaMs: number) {\n        if (this._stopped) return;\n        this._currentTime += deltaMs;\n        \n        let waveConfig = config.waves[this._currentWave];\n        if(!waveConfig) {\n            let name = `Wave ${this._currentWave}`;\n            let offsetList = {};\n            for(let i of range(0, this._currentWave)){\n                for (let enemyDescriptor of Object.values(EnemyType)) {\n                    let max = 0;\n                    let min = this._currentWave\n                    switch(enemyDescriptor){\n                        case EnemyType.Crab:\n                        max = min + 5;\n                        break;\n                        case EnemyType.Seagull:\n                        max = min + 3;\n                        break;\n                        case EnemyType.Turtle:\n                        max = min + 7;\n                        break;\n                    }\n                    let index = 2 + i * 5;\n                    if(!(offsetList as any)[index]) (offsetList as any)[index] = [];\n                    (offsetList as any)[index].push({type: enemyDescriptor, count: this._random.range(1, min, max)[0]});\n                }\n                waveConfig = {\n                    name: name,\n                    offsets: offsetList\n                }\n                config.waves[this._currentWave] = waveConfig;\n                console.log(waveConfig);\n            }\n        }\n\n        if (this._dispatched.length === Object.keys(config.waves[this._currentWave].offsets).length && this.enemiesComplete()) {\n            this._currentWave++;\n            this._currentTime = 0;\n            this._dispatched.length = 0;\n            this._currentEnemies.length = 0;\n            console.log('Wave Complete');\n        }\n        \n        if (waveConfig) {\n            for (let offset in waveConfig.offsets) {\n                if (!this._dispatched.find(s => s === Number(offset))) {\n                    if ((this._currentTime/1000) >= Number(offset)) {\n                        if (this.isBeginningOfWave()) {\n                            const waveConfig = config.waves[this._currentWave];\n                            this._text.text = waveConfig.name;\n                            this.showWaveBanner(`Wave: ${this._currentWave}`);\n                        }\n                        this._dispatched.push(Number(offset));\n                        for(let enemyDescriptor of waveConfig.offsets[offset]) {\n                            this._currentEnemies = this._currentEnemies.concat(this._spawner.spawnEnemies(enemyDescriptor.type as EnemyType, enemyDescriptor.count));\n                        }\n                    }\n                }\n            }\n            // } else {\n            //     let offsetList = [2]\n            //     for(let i in range(0, this._currentWave)){\n            //         offsetList.push(offsetList[i] + 5);\n            //     }\n            //     console.log(offsetList);\n            //     for (let offset in offsetList){\n            //         if (!this._dispatched.find(s => s === Number(offset))) {\n            //             if ((this._currentTime/1000) >= Number(offset)) {\n            //                 if (this.isBeginningOfWave()) {\n            //                     this._text.text = `Wave: ${this._currentWave}`;\n            //                     this.showWaveBanner(`Wave: ${this._currentWave}`);\n            //                 }\n            //                 this._dispatched.push(Number(offset));\n            \n            //                 for (let enemyDescriptor of Object.values(EnemyType)) {\n            //                     let max = 0;\n            //                     let min = this._currentWave\n            //                     switch(enemyDescriptor){\n            //                         case EnemyType.Crab:\n            //                         max = min + 5;\n            //                         break;\n            //                         case EnemyType.Seagull:\n            //                         max = min + 3;\n            //                         break;\n            //                         case EnemyType.Turtle:\n            //                         max = min + 7;\n            //                         break;\n            //                     }\n            //                     this._currentEnemies = this._currentEnemies.concat(this._spawner.spawnEnemies(enemyDescriptor as EnemyType, this._random.range(1, min, max)[0]));\n            //                 }\n            //             }\n            //         }\n            // }\n        }\n    }\n    \n    enemiesComplete() {\n        return this._currentEnemies.every(e => !e.active);\n    }\n    \n    isBeginningOfWave() {\n        return this._dispatched.length === 0;\n    }\n    \n    showWaveBanner(text: string) {\n        Resources.FxWaveAppear.play();\n        this._textActor.actions.easeTo(vec(config.grid.tileWidth * config.grid.width / 1.33,  (config.grid.height / 2) * config.grid.tileHeight), 1000, EasingFunctions.EaseInOutCubic);\n        this._textActor.actions.delay(1000);\n        this._textActor.actions.easeTo(this._textActor.pos.add(vec(1000, 0)), 1000, EasingFunctions.EaseInOutCubic);\n        this._textActor.actions.callMethod(() =>{\n            this._textActor.pos = vec(config.grid.width * config.grid.tileWidth + 500, (config.grid.height / 2) * config.grid.tileHeight);\n        })\n    }\n}","import { Enemy } from \"enemy\";\nimport { Component, Engine, Query, MotionComponent, Vector, Text, Font, Actor, vec, CollisionType, EasingFunctions, ImageFiltering } from \"excalibur\";\nimport { Level } from \"./level\";\nimport { WaveDispatcher } from \"./wave-dispatcher\";\n\nexport class GameOver {\n    enemyQuery: Query<Component<'enemy'>>;\n    gameOverActor: Actor;\n    restartGame$: HTMLElement | null;\n    constructor(private engine: Engine, private level: Level, private waveDispatcher: WaveDispatcher) {\n        this.enemyQuery = this.engine.currentScene.world.queryManager.createQuery(['enemy']);\n\n        const gameOverText = new Text({\n            text: 'Game Over',\n            font: new Font({\n                size: 64,\n                family: 'Kanit, sans-serif',\n                quality: 4,\n                smoothing: true,\n                filtering: ImageFiltering.Blended\n            })\n        });\n\n        this.gameOverActor = new Actor({\n            pos: vec(engine.screen.center.x, 800),\n            z: 10,\n            collisionType: CollisionType.PreventCollision\n        });\n        this.gameOverActor.graphics.use(gameOverText);\n        engine.currentScene.add(this.gameOverActor);\n\n        const restartGame$ = document.getElementById('restart-game');\n        restartGame$?.addEventListener('click', () => this.restart());\n\n        this.restartGame$ = restartGame$;\n    }\n\n    triggerGameOver() {\n        this.waveDispatcher.stop();\n        const enemies = this.enemyQuery.getEntities();\n        for (let enemy of enemies) {\n            const motion = enemy.get(MotionComponent);\n            if (motion) {\n                setTimeout(() => {\n                    (enemy as Enemy).stop();\n                    motion.vel = Vector.Zero;\n                });\n            }\n        }\n\n        this.gameOverActor.actions.easeTo(vec(this.engine.screen.center.x, 200), 1000, EasingFunctions.EaseInOutCubic).blink(2000, 1000);\n        this.restartGame$!.style.visibility = 'visible';\n    }\n\n    restart() {\n        this.level.restart();\n        this.restartGame$!.style.visibility = 'hidden';\n    }\n}","import { Sound } from \"excalibur\";\nimport classNames from \"classnames\";\nimport { Resources } from \"./resources\";\nimport { Preferences, savePreferences } from \"./preferences\";\nimport Config from \"./config\";\n\nexport class SoundManager {\n  static setSoundSpecificVolume() {\n    Resources.Clank.volume = 0.5;\n    Resources.FxWaveAppear.volume = 0.8;\n    Resources.FxImpactEnemyBall.volume = 0.7;\n    Resources.FxImpactTowerByEnemy.volume = 0.5;\n    Resources.FxImpactCastleByEnemy.volume = 0.7;\n    Resources.FxDeathCrabForCutie.volume = 0.6;\n    Resources.FxDeathGull.volume = 0.6;\n    Resources.FxDeathTurtle.volume = 0.6;\n    Resources.FxPlaceTower.volume = 1.0;\n    Resources.FxHarvestTower.volume = 0.5;\n\n    Resources.UiPickTower.volume = 0.3;\n  }\n\n  static init() {\n    SoundManager.setSoundSpecificVolume();\n    if (Preferences.muteBackgroundMusic) {\n      SoundManager.muteBackgroundMusic();\n    }\n    if (Preferences.muteAll) {\n      SoundManager.muteAll();\n    }\n\n    $(\"#mute-music\").on(\"click\", () => {\n      if (Preferences.muteBackgroundMusic) {\n        SoundManager.unmuteBackgroundMusic();\n      } else {\n        SoundManager.muteBackgroundMusic();\n      }\n      savePreferences();\n      return false;\n    });\n\n    $(\"#mute-all\").on(\"click\", () => {\n      if (Preferences.muteAll) {\n        SoundManager.unmuteAll();\n      } else {\n        SoundManager.muteAll();\n      }\n      savePreferences();\n      return false;\n    });\n  }\n\n  static muteAll() {\n    Preferences.muteAll = true;\n    Preferences.muteBackgroundMusic = true;\n\n    for (let r in Resources) {\n      let snd = (Resources as any)[r];\n      if (snd instanceof Sound) {\n        snd.volume = 0;\n      }\n    }\n    SoundManager.muteBackgroundMusic();\n    SoundManager._updateMuteAllButton();\n  }\n\n  static unmuteAll() {\n    Preferences.muteAll = false;\n    Preferences.muteBackgroundMusic = false;\n\n    for (var r in Resources) {\n      let snd = (Resources as any)[r];\n      if (snd instanceof Sound) {\n        snd.volume = Config.SoundVolume;\n      }\n    }\n    SoundManager.setSoundSpecificVolume();\n    SoundManager.unmuteBackgroundMusic();\n    SoundManager._updateMuteAllButton();\n  }\n\n  static startBackgroundMusic() {\n    // start bg music\n    Resources.BackgroundAmbiance.volume = Preferences.muteBackgroundMusic\n      ? 0\n      : Config.BackgroundAmbianceVolume;\n\n    Resources.BackgroundAmbiance.loop = true;\n    if (!Resources.BackgroundAmbiance.isPlaying())\n      Resources.BackgroundAmbiance.play();\n\n    Resources.BackgroundMusic.volume = Preferences.muteBackgroundMusic\n      ? 0\n      : Config.BackgroundMusicVolume;\n\n    Resources.BackgroundMusic.loop = true;\n    if (!Resources.BackgroundMusic.isPlaying())\n      Resources.BackgroundMusic.play();\n  }\n\n  static stopBackgroundMusic() {\n    // stop bg music\n    Resources.BackgroundAmbiance.loop = false;\n    Resources.BackgroundMusic.loop = false;\n  }\n\n  static muteBackgroundMusic() {\n    Preferences.muteBackgroundMusic = true;\n\n    // mute bg music\n    Resources.BackgroundAmbiance.volume = 0;\n    Resources.BackgroundMusic.volume = 0;\n    SoundManager._updateMusicButton();\n  }\n\n  static unmuteBackgroundMusic() {\n    Preferences.muteBackgroundMusic = false;\n\n    // unmute bg music\n    Resources.BackgroundAmbiance.volume = Config.BackgroundAmbianceVolume;\n    Resources.BackgroundMusic.volume = Config.BackgroundMusicVolume;\n    SoundManager._updateMusicButton();\n  }\n\n  private static _updateMusicButton() {\n    $(\"#mute-music i\").get(0).className = classNames(\"fa\", {\n      \"fa-music\": !Preferences.muteBackgroundMusic,\n      \"fa-play\": Preferences.muteBackgroundMusic,\n    });\n  }\n\n  private static _updateMuteAllButton() {\n    $(\"#mute-all i\").get(0).className = classNames(\"fa\", {\n      \"fa-volume-up\": !Preferences.muteAll,\n      \"fa-volume-off\": Preferences.muteAll,\n    });\n  }\n}\n","/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString === Object.prototype.toString) {\n\t\t\t\t\tfor (var key in arg) {\n\t\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import config from \"./config\";\nimport { Actor, CollisionType, vec, EasingFunctions } from \"excalibur\";\nimport { Grid } from \"./grid\";\nimport { Resources } from \"./resources\";\n\n\nexport class Water extends Actor {\n    constructor(private grid: Grid, xoffset: number, tiley: number, private phaseYOffset: number, private delay: number) {\n        const endPos = grid.tileMap.getTile(config.grid.width - 1, 0).pos;\n        super({\n            name: \"Water\",\n            pos: vec(endPos.x + xoffset, tiley * config.grid.tileHeight - config.grid.tileHeight * 2 + phaseYOffset),\n            width: config.grid.tileWidth,\n            height: config.grid.tileHeight,\n            collisionType: CollisionType.PreventCollision\n        })\n\n        const waterSprite = Resources.Water.toSprite();\n        this.graphics.use(waterSprite);\n    }\n\n    onInitialize() {\n        const originalPos = this.pos.clone();\n        this.actions.delay(this.delay);\n        this.actions.repeatForever(ctx => {\n            ctx.easeTo(originalPos.add(vec(-20, 0)), 3000, EasingFunctions.EaseInOutCubic);\n            ctx.easeTo(originalPos.add(vec(20, 0)), 3000, EasingFunctions.EaseInOutCubic);\n        })\n    }\n}","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"excalibur\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"excalibur\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ex\"] = factory(require(\"excalibur\"));\n\telse\n\t\troot[\"ex\"] = root[\"ex\"] || {}, root[\"ex\"][\"DevTools\"] = factory(root[\"ex\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE_excalibur__) {\nreturn ","import { Engine, System, SystemType, TransformComponent, Input, Scene, Entity, ColliderComponent, GraphicsComponent, CoordPlane, BoundingBox, Particle, ParticleEmitter } from \"excalibur\";\r\n\r\nexport class PickerSystem extends System<TransformComponent> {\r\n    public readonly types = ['ex.transform'] as const;\r\n    public readonly systemType = SystemType.Update;\r\n    public priority = 99;\r\n  \r\n    public lastFrameEntityToPointers = new Map<number, number[]>();\r\n    public currentFrameEntityToPointers = new Map<number, number[]>();\r\n    private _engine: Engine;\r\n    private _receiver: Input.PointerEventReceiver;\r\n  \r\n    public initialize(scene: Scene): void {\r\n      this._engine = scene.engine;\r\n      this._receiver = this._engine.input.pointers;\r\n    }\r\n  \r\n    public addPointerToEntity(entity: Entity, pointerId: number) {\r\n      if (!this.currentFrameEntityToPointers.has(entity.id)) {\r\n        this.currentFrameEntityToPointers.set(entity.id, [pointerId]);\r\n        return;\r\n      }\r\n      const pointers = this.currentFrameEntityToPointers.get(entity.id);\r\n      this.currentFrameEntityToPointers.set(entity.id, pointers.concat(pointerId));\r\n    }\r\n  \r\n    private _processPointerToEntity(entities: Entity[]) {\r\n      let transform: TransformComponent;\r\n      let maybeCollider: ColliderComponent;\r\n      let maybeGraphics: GraphicsComponent;\r\n  \r\n      // TODO probably a spatial partition optimization here to quickly query bounds for pointer\r\n      // doesn't seem to cause issues tho for perf\r\n  \r\n      // Pre-process find entities under pointers\r\n      for (const entity of entities) {\r\n        // skip particles\r\n        if (entity instanceof Particle) {\r\n            continue;\r\n        }\r\n        transform = entity.get(TransformComponent);\r\n        // Check collider contains pointer\r\n        maybeCollider = entity.get(ColliderComponent);\r\n        if (maybeCollider) {\r\n          const geom = maybeCollider.get();\r\n          if (geom) {\r\n            for (const [pointerId, pos] of this._receiver.currentFramePointerCoords.entries()) {\r\n              if (geom.contains(transform.coordPlane === CoordPlane.World ? pos.worldPos : pos.screenPos)) {\r\n                this.addPointerToEntity(entity, pointerId);\r\n              }\r\n            }\r\n          }\r\n        }\r\n  \r\n        // Check graphics contains pointer\r\n        maybeGraphics = entity.get(GraphicsComponent);\r\n        if (maybeGraphics) {\r\n          const graphicBounds = maybeGraphics.localBounds.transform(transform.getGlobalMatrix());\r\n          for (const [pointerId, pos] of this._receiver.currentFramePointerCoords.entries()) {\r\n            if (graphicBounds.contains(transform.coordPlane === CoordPlane.World ? pos.worldPos : pos.screenPos)) {\r\n              this.addPointerToEntity(entity, pointerId);\r\n            }\r\n          }\r\n        }\r\n  \r\n        // Synthetic geometry to help with the picking when no graphics or collider exist\r\n        if (!(maybeGraphics?.current?.length) && !(maybeCollider?.get()) || entity instanceof ParticleEmitter) {\r\n          const bounds = BoundingBox.fromDimension(100, 100).transform(transform.getGlobalMatrix());\r\n          for (const [pointerId, pos] of this._receiver.currentFramePointerCoords.entries()) {\r\n            if (bounds.contains(transform.coordPlane === CoordPlane.World ? pos.worldPos : pos.screenPos)) {\r\n              this.addPointerToEntity(entity, pointerId);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  \r\n    update(entities: Entity[], _delta: number): void {\r\n      this._processPointerToEntity(entities);\r\n      this.lastFrameEntityToPointers.clear();\r\n      this.lastFrameEntityToPointers = new Map<number, number[]>(this.currentFrameEntityToPointers);\r\n      this.currentFrameEntityToPointers.clear();\r\n    }\r\n  }","/*! Tweakpane 3.0.7 (c) 2016 cocopon, licensed under the MIT license. */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.Tweakpane = {}));\n})(this, (function (exports) { 'use strict';\n\n    /***\n     * A simple semantic versioning perser.\n     */\n    class Semver {\n        /**\n         * @hidden\n         */\n        constructor(text) {\n            const [core, prerelease] = text.split('-');\n            const coreComps = core.split('.');\n            this.major = parseInt(coreComps[0], 10);\n            this.minor = parseInt(coreComps[1], 10);\n            this.patch = parseInt(coreComps[2], 10);\n            this.prerelease = prerelease !== null && prerelease !== void 0 ? prerelease : null;\n        }\n        toString() {\n            const core = [this.major, this.minor, this.patch].join('.');\n            return this.prerelease !== null ? [core, this.prerelease].join('-') : core;\n        }\n    }\n\n    class BladeApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get hidden() {\n            return this.controller_.viewProps.get('hidden');\n        }\n        set hidden(hidden) {\n            this.controller_.viewProps.set('hidden', hidden);\n        }\n        dispose() {\n            this.controller_.viewProps.set('disposed', true);\n        }\n    }\n\n    class TpEvent {\n        constructor(target) {\n            this.target = target;\n        }\n    }\n    class TpChangeEvent extends TpEvent {\n        constructor(target, value, presetKey, last) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n            this.last = last !== null && last !== void 0 ? last : true;\n        }\n    }\n    class TpUpdateEvent extends TpEvent {\n        constructor(target, value, presetKey) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n        }\n    }\n    class TpFoldEvent extends TpEvent {\n        constructor(target, expanded) {\n            super(target);\n            this.expanded = expanded;\n        }\n    }\n\n    function forceCast(v) {\n        return v;\n    }\n    function isEmpty(value) {\n        return value === null || value === undefined;\n    }\n    function deepEqualsArray(a1, a2) {\n        if (a1.length !== a2.length) {\n            return false;\n        }\n        for (let i = 0; i < a1.length; i++) {\n            if (a1[i] !== a2[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    const CREATE_MESSAGE_MAP = {\n        alreadydisposed: () => 'View has been already disposed',\n        invalidparams: (context) => `Invalid parameters for '${context.name}'`,\n        nomatchingcontroller: (context) => `No matching controller for '${context.key}'`,\n        nomatchingview: (context) => `No matching view for '${JSON.stringify(context.params)}'`,\n        notbindable: () => `Value is not bindable`,\n        propertynotfound: (context) => `Property '${context.name}' not found`,\n        shouldneverhappen: () => 'This error should never happen',\n    };\n    class TpError {\n        constructor(config) {\n            var _a;\n            this.message =\n                (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n            this.name = this.constructor.name;\n            this.stack = new Error(this.message).stack;\n            this.type = config.type;\n        }\n        static alreadyDisposed() {\n            return new TpError({ type: 'alreadydisposed' });\n        }\n        static notBindable() {\n            return new TpError({\n                type: 'notbindable',\n            });\n        }\n        static propertyNotFound(name) {\n            return new TpError({\n                type: 'propertynotfound',\n                context: {\n                    name: name,\n                },\n            });\n        }\n        static shouldNeverHappen() {\n            return new TpError({ type: 'shouldneverhappen' });\n        }\n    }\n\n    class BindingTarget {\n        constructor(obj, key, opt_id) {\n            this.obj_ = obj;\n            this.key_ = key;\n            this.presetKey_ = opt_id !== null && opt_id !== void 0 ? opt_id : key;\n        }\n        static isBindable(obj) {\n            if (obj === null) {\n                return false;\n            }\n            if (typeof obj !== 'object') {\n                return false;\n            }\n            return true;\n        }\n        get key() {\n            return this.key_;\n        }\n        get presetKey() {\n            return this.presetKey_;\n        }\n        read() {\n            return this.obj_[this.key_];\n        }\n        write(value) {\n            this.obj_[this.key_] = value;\n        }\n        writeProperty(name, value) {\n            const valueObj = this.read();\n            if (!BindingTarget.isBindable(valueObj)) {\n                throw TpError.notBindable();\n            }\n            if (!(name in valueObj)) {\n                throw TpError.propertyNotFound(name);\n            }\n            valueObj[name] = value;\n        }\n    }\n\n    class ButtonApi extends BladeApi {\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.valueController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.valueController.props.set('title', title);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            const emitter = this.controller_.valueController.emitter;\n            emitter.on(eventName, () => {\n                bh(new TpEvent(this));\n            });\n            return this;\n        }\n    }\n\n    class Emitter {\n        constructor() {\n            this.observers_ = {};\n        }\n        on(eventName, handler) {\n            let observers = this.observers_[eventName];\n            if (!observers) {\n                observers = this.observers_[eventName] = [];\n            }\n            observers.push({\n                handler: handler,\n            });\n            return this;\n        }\n        off(eventName, handler) {\n            const observers = this.observers_[eventName];\n            if (observers) {\n                this.observers_[eventName] = observers.filter((observer) => {\n                    return observer.handler !== handler;\n                });\n            }\n            return this;\n        }\n        emit(eventName, event) {\n            const observers = this.observers_[eventName];\n            if (!observers) {\n                return;\n            }\n            observers.forEach((observer) => {\n                observer.handler(event);\n            });\n        }\n    }\n\n    const PREFIX = 'tp';\n    function ClassName(viewName) {\n        const fn = (opt_elementName, opt_modifier) => {\n            return [\n                PREFIX,\n                '-',\n                viewName,\n                'v',\n                opt_elementName ? `_${opt_elementName}` : '',\n                opt_modifier ? `-${opt_modifier}` : '',\n            ].join('');\n        };\n        return fn;\n    }\n\n    function compose(h1, h2) {\n        return (input) => h2(h1(input));\n    }\n    function extractValue(ev) {\n        return ev.rawValue;\n    }\n    function bindValue(value, applyValue) {\n        value.emitter.on('change', compose(extractValue, applyValue));\n        applyValue(value.rawValue);\n    }\n    function bindValueMap(valueMap, key, applyValue) {\n        bindValue(valueMap.value(key), applyValue);\n    }\n\n    function applyClass(elem, className, active) {\n        if (active) {\n            elem.classList.add(className);\n        }\n        else {\n            elem.classList.remove(className);\n        }\n    }\n    function valueToClassName(elem, className) {\n        return (value) => {\n            applyClass(elem, className, value);\n        };\n    }\n    function bindValueToTextContent(value, elem) {\n        bindValue(value, (text) => {\n            elem.textContent = text !== null && text !== void 0 ? text : '';\n        });\n    }\n\n    const className$q = ClassName('btn');\n    class ButtonView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$q());\n            config.viewProps.bindClassModifiers(this.element);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$q('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$q('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n        }\n    }\n\n    class ButtonController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new ButtonView(doc, {\n                props: this.props,\n                viewProps: this.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class BoundValue {\n        constructor(initialValue, config) {\n            var _a;\n            this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n            this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\n            this.emitter = new Emitter();\n            this.rawValue_ = initialValue;\n        }\n        get constraint() {\n            return this.constraint_;\n        }\n        get rawValue() {\n            return this.rawValue_;\n        }\n        set rawValue(rawValue) {\n            this.setRawValue(rawValue, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(rawValue, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const constrainedValue = this.constraint_\n                ? this.constraint_.constrain(rawValue)\n                : rawValue;\n            const changed = !this.equals_(this.rawValue_, constrainedValue);\n            if (!changed && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.rawValue_ = constrainedValue;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: constrainedValue,\n                sender: this,\n            });\n        }\n    }\n\n    class PrimitiveValue {\n        constructor(initialValue) {\n            this.emitter = new Emitter();\n            this.value_ = initialValue;\n        }\n        get rawValue() {\n            return this.value_;\n        }\n        set rawValue(value) {\n            this.setRawValue(value, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(value, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            if (this.value_ === value && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.value_ = value;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: this.value_,\n                sender: this,\n            });\n        }\n    }\n\n    function createValue(initialValue, config) {\n        const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n        const equals = config === null || config === void 0 ? void 0 : config.equals;\n        if (!constraint && !equals) {\n            return new PrimitiveValue(initialValue);\n        }\n        return new BoundValue(initialValue, config);\n    }\n\n    class ValueMap {\n        constructor(valueMap) {\n            this.emitter = new Emitter();\n            this.valMap_ = valueMap;\n            for (const key in this.valMap_) {\n                const v = this.valMap_[key];\n                v.emitter.on('change', () => {\n                    this.emitter.emit('change', {\n                        key: key,\n                        sender: this,\n                    });\n                });\n            }\n        }\n        static createCore(initialValue) {\n            const keys = Object.keys(initialValue);\n            return keys.reduce((o, key) => {\n                return Object.assign(o, {\n                    [key]: createValue(initialValue[key]),\n                });\n            }, {});\n        }\n        static fromObject(initialValue) {\n            const core = this.createCore(initialValue);\n            return new ValueMap(core);\n        }\n        get(key) {\n            return this.valMap_[key].rawValue;\n        }\n        set(key, value) {\n            this.valMap_[key].rawValue = value;\n        }\n        value(key) {\n            return this.valMap_[key];\n        }\n    }\n\n    function parseObject(value, keyToParserMap) {\n        const keys = Object.keys(keyToParserMap);\n        const result = keys.reduce((tmp, key) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const parser = keyToParserMap[key];\n            const result = parser(value[key]);\n            return result.succeeded\n                ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\n        }, {});\n        return forceCast(result);\n    }\n    function parseArray(value, parseItem) {\n        return value.reduce((tmp, item) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const result = parseItem(item);\n            if (!result.succeeded || result.value === undefined) {\n                return undefined;\n            }\n            return [...tmp, result.value];\n        }, []);\n    }\n    function isObject(value) {\n        if (value === null) {\n            return false;\n        }\n        return typeof value === 'object';\n    }\n    function createParamsParserBuilder(parse) {\n        return (optional) => (v) => {\n            if (!optional && v === undefined) {\n                return {\n                    succeeded: false,\n                    value: undefined,\n                };\n            }\n            if (optional && v === undefined) {\n                return {\n                    succeeded: true,\n                    value: undefined,\n                };\n            }\n            const result = parse(v);\n            return result !== undefined\n                ? {\n                    succeeded: true,\n                    value: result,\n                }\n                : {\n                    succeeded: false,\n                    value: undefined,\n                };\n        };\n    }\n    function createParamsParserBuilders(optional) {\n        return {\n            custom: (parse) => createParamsParserBuilder(parse)(optional),\n            boolean: createParamsParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\n            number: createParamsParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\n            string: createParamsParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\n            function: createParamsParserBuilder((v) =>\n            typeof v === 'function' ? v : undefined)(optional),\n            constant: (value) => createParamsParserBuilder((v) => (v === value ? value : undefined))(optional),\n            raw: createParamsParserBuilder((v) => v)(optional),\n            object: (keyToParserMap) => createParamsParserBuilder((v) => {\n                if (!isObject(v)) {\n                    return undefined;\n                }\n                return parseObject(v, keyToParserMap);\n            })(optional),\n            array: (itemParser) => createParamsParserBuilder((v) => {\n                if (!Array.isArray(v)) {\n                    return undefined;\n                }\n                return parseArray(v, itemParser);\n            })(optional),\n        };\n    }\n    const ParamsParsers = {\n        optional: createParamsParserBuilders(true),\n        required: createParamsParserBuilders(false),\n    };\n    function parseParams(value, keyToParserMap) {\n        const result = ParamsParsers.required.object(keyToParserMap)(value);\n        return result.succeeded ? result.value : undefined;\n    }\n\n    function disposeElement(elem) {\n        if (elem && elem.parentElement) {\n            elem.parentElement.removeChild(elem);\n        }\n        return null;\n    }\n\n    function getAllBladePositions() {\n        return ['veryfirst', 'first', 'last', 'verylast'];\n    }\n\n    const className$p = ClassName('');\n    const POS_TO_CLASS_NAME_MAP = {\n        veryfirst: 'vfst',\n        first: 'fst',\n        last: 'lst',\n        verylast: 'vlst',\n    };\n    class BladeController {\n        constructor(config) {\n            this.parent_ = null;\n            this.blade = config.blade;\n            this.view = config.view;\n            this.viewProps = config.viewProps;\n            const elem = this.view.element;\n            this.blade.value('positions').emitter.on('change', () => {\n                getAllBladePositions().forEach((pos) => {\n                    elem.classList.remove(className$p(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n                this.blade.get('positions').forEach((pos) => {\n                    elem.classList.add(className$p(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n            });\n            this.viewProps.handleDispose(() => {\n                disposeElement(elem);\n            });\n        }\n        get parent() {\n            return this.parent_;\n        }\n    }\n\n    const SVG_NS = 'http://www.w3.org/2000/svg';\n    function forceReflow(element) {\n        element.offsetHeight;\n    }\n    function disableTransitionTemporarily(element, callback) {\n        const t = element.style.transition;\n        element.style.transition = 'none';\n        callback();\n        element.style.transition = t;\n    }\n    function supportsTouch(doc) {\n        return doc.ontouchstart !== undefined;\n    }\n    function getGlobalObject() {\n        return new Function('return this')();\n    }\n    function getWindowDocument() {\n        const globalObj = forceCast(getGlobalObject());\n        return globalObj.document;\n    }\n    function getCanvasContext(canvasElement) {\n        const win = canvasElement.ownerDocument.defaultView;\n        if (!win) {\n            return null;\n        }\n        const isBrowser = 'document' in win;\n        return isBrowser ? canvasElement.getContext('2d') : null;\n    }\n    const ICON_ID_TO_INNER_HTML_MAP = {\n        check: '<path d=\"M2 8l4 4l8 -8\"/>',\n        dropdown: '<path d=\"M5 7h6l-3 3 z\"/>',\n        p2dpad: '<path d=\"M8 4v8\"/><path d=\"M4 8h8\"/><circle cx=\"12\" cy=\"12\" r=\"1.2\"/>',\n    };\n    function createSvgIconElement(document, iconId) {\n        const elem = document.createElementNS(SVG_NS, 'svg');\n        elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n        return elem;\n    }\n    function insertElementAt(parentElement, element, index) {\n        parentElement.insertBefore(element, parentElement.children[index]);\n    }\n    function removeElement(element) {\n        if (element.parentElement) {\n            element.parentElement.removeChild(element);\n        }\n    }\n    function removeChildElements(element) {\n        while (element.children.length > 0) {\n            element.removeChild(element.children[0]);\n        }\n    }\n    function removeChildNodes(element) {\n        while (element.childNodes.length > 0) {\n            element.removeChild(element.childNodes[0]);\n        }\n    }\n    function findNextTarget(ev) {\n        if (ev.relatedTarget) {\n            return forceCast(ev.relatedTarget);\n        }\n        if ('explicitOriginalTarget' in ev) {\n            return ev.explicitOriginalTarget;\n        }\n        return null;\n    }\n\n    const className$o = ClassName('lbl');\n    function createLabelNode(doc, label) {\n        const frag = doc.createDocumentFragment();\n        const lineNodes = label.split('\\n').map((line) => {\n            return doc.createTextNode(line);\n        });\n        lineNodes.forEach((lineNode, index) => {\n            if (index > 0) {\n                frag.appendChild(doc.createElement('br'));\n            }\n            frag.appendChild(lineNode);\n        });\n        return frag;\n    }\n    class LabelView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$o());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('div');\n            labelElem.classList.add(className$o('l'));\n            bindValueMap(config.props, 'label', (value) => {\n                if (isEmpty(value)) {\n                    this.element.classList.add(className$o(undefined, 'nol'));\n                }\n                else {\n                    this.element.classList.remove(className$o(undefined, 'nol'));\n                    removeChildNodes(labelElem);\n                    labelElem.appendChild(createLabelNode(doc, value));\n                }\n            });\n            this.element.appendChild(labelElem);\n            this.labelElement = labelElem;\n            const valueElem = doc.createElement('div');\n            valueElem.classList.add(className$o('v'));\n            this.element.appendChild(valueElem);\n            this.valueElement = valueElem;\n        }\n    }\n\n    class LabelController extends BladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    const ButtonBladePlugin = {\n        id: 'button',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('button'),\n                label: p.optional.string,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new LabelController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: new ButtonController(args.document, {\n                    props: ValueMap.fromObject({\n                        title: args.params.title,\n                    }),\n                    viewProps: args.viewProps,\n                }),\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabelController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof ButtonController)) {\n                return null;\n            }\n            return new ButtonApi(args.controller);\n        },\n    };\n\n    class ValueBladeController extends BladeController {\n        constructor(config) {\n            super(config);\n            this.value = config.value;\n        }\n    }\n\n    function createBlade() {\n        return new ValueMap({\n            positions: createValue([], {\n                equals: deepEqualsArray,\n            }),\n        });\n    }\n\n    class Foldable extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(expanded) {\n            const coreObj = {\n                completed: true,\n                expanded: expanded,\n                expandedHeight: null,\n                shouldFixHeight: false,\n                temporaryExpanded: null,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new Foldable(core);\n        }\n        get styleExpanded() {\n            var _a;\n            return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n        }\n        get styleHeight() {\n            if (!this.styleExpanded) {\n                return '0';\n            }\n            const exHeight = this.get('expandedHeight');\n            if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n                return `${exHeight}px`;\n            }\n            return 'auto';\n        }\n        bindExpandedClass(elem, expandedClassName) {\n            bindValueMap(this, 'expanded', () => {\n                const expanded = this.styleExpanded;\n                if (expanded) {\n                    elem.classList.add(expandedClassName);\n                }\n                else {\n                    elem.classList.remove(expandedClassName);\n                }\n            });\n        }\n    }\n    function computeExpandedFolderHeight(folder, containerElement) {\n        let height = 0;\n        disableTransitionTemporarily(containerElement, () => {\n            folder.set('expandedHeight', null);\n            folder.set('temporaryExpanded', true);\n            forceReflow(containerElement);\n            height = containerElement.clientHeight;\n            folder.set('temporaryExpanded', null);\n            forceReflow(containerElement);\n        });\n        return height;\n    }\n    function applyHeight(foldable, elem) {\n        elem.style.height = foldable.styleHeight;\n    }\n    function bindFoldable(foldable, elem) {\n        foldable.value('expanded').emitter.on('beforechange', () => {\n            foldable.set('completed', false);\n            if (isEmpty(foldable.get('expandedHeight'))) {\n                foldable.set('expandedHeight', computeExpandedFolderHeight(foldable, elem));\n            }\n            foldable.set('shouldFixHeight', true);\n            forceReflow(elem);\n        });\n        foldable.emitter.on('change', () => {\n            applyHeight(foldable, elem);\n        });\n        applyHeight(foldable, elem);\n        elem.addEventListener('transitionend', (ev) => {\n            if (ev.propertyName !== 'height') {\n                return;\n            }\n            foldable.set('shouldFixHeight', false);\n            foldable.set('expandedHeight', null);\n            foldable.set('completed', true);\n        });\n    }\n\n    class RackLikeApi extends BladeApi {\n        constructor(controller, rackApi) {\n            super(controller);\n            this.rackApi_ = rackApi;\n        }\n    }\n\n    function addButtonAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'button' }));\n    }\n    function addFolderAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'folder' }));\n    }\n    function addSeparatorAsBlade(api, opt_params) {\n        const params = opt_params || {};\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'separator' }));\n    }\n    function addTabAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'tab' }));\n    }\n\n    class NestedOrderedSet {\n        constructor(extract) {\n            this.emitter = new Emitter();\n            this.items_ = [];\n            this.cache_ = new Set();\n            this.onSubListAdd_ = this.onSubListAdd_.bind(this);\n            this.onSubListRemove_ = this.onSubListRemove_.bind(this);\n            this.extract_ = extract;\n        }\n        get items() {\n            return this.items_;\n        }\n        allItems() {\n            return Array.from(this.cache_);\n        }\n        find(callback) {\n            for (const item of this.allItems()) {\n                if (callback(item)) {\n                    return item;\n                }\n            }\n            return null;\n        }\n        includes(item) {\n            return this.cache_.has(item);\n        }\n        add(item, opt_index) {\n            if (this.includes(item)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const index = opt_index !== undefined ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            this.cache_.add(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.on('add', this.onSubListAdd_);\n                subList.emitter.on('remove', this.onSubListRemove_);\n                subList.allItems().forEach((item) => {\n                    this.cache_.add(item);\n                });\n            }\n            this.emitter.emit('add', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        remove(item) {\n            const index = this.items_.indexOf(item);\n            if (index < 0) {\n                return;\n            }\n            this.items_.splice(index, 1);\n            this.cache_.delete(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.off('add', this.onSubListAdd_);\n                subList.emitter.off('remove', this.onSubListRemove_);\n            }\n            this.emitter.emit('remove', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        onSubListAdd_(ev) {\n            this.cache_.add(ev.item);\n            this.emitter.emit('add', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n        onSubListRemove_(ev) {\n            this.cache_.delete(ev.item);\n            this.emitter.emit('remove', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n    }\n\n    class InputBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingChange_ = this.onBindingChange_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('change', this.onBindingChange_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingChange_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('change', {\n                event: new TpChangeEvent(this, forceCast(value), this.controller_.binding.target.presetKey, ev.options.last),\n            });\n        }\n    }\n\n    class InputBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n        }\n    }\n\n    class MonitorBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingUpdate_ = this.onBindingUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('update', this.onBindingUpdate_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingUpdate_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(this, forceCast(value), this.controller_.binding.target.presetKey),\n            });\n        }\n    }\n\n    class MonitorBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n            this.viewProps.bindDisabled(this.binding.ticker);\n            this.viewProps.handleDispose(() => {\n                this.binding.dispose();\n            });\n        }\n    }\n\n    function findSubBladeApiSet(api) {\n        if (api instanceof RackApi) {\n            return api['apiSet_'];\n        }\n        if (api instanceof RackLikeApi) {\n            return api['rackApi_']['apiSet_'];\n        }\n        return null;\n    }\n    function getApiByController(apiSet, controller) {\n        const api = apiSet.find((api) => api.controller_ === controller);\n        if (!api) {\n            throw TpError.shouldNeverHappen();\n        }\n        return api;\n    }\n    function createBindingTarget(obj, key, opt_id) {\n        if (!BindingTarget.isBindable(obj)) {\n            throw TpError.notBindable();\n        }\n        return new BindingTarget(obj, key, opt_id);\n    }\n    class RackApi extends BladeApi {\n        constructor(controller, pool) {\n            super(controller);\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            this.onRackInputChange_ = this.onRackInputChange_.bind(this);\n            this.onRackMonitorUpdate_ = this.onRackMonitorUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.apiSet_ = new NestedOrderedSet(findSubBladeApiSet);\n            this.pool_ = pool;\n            const rack = this.controller_.rack;\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            rack.emitter.on('inputchange', this.onRackInputChange_);\n            rack.emitter.on('monitorupdate', this.onRackMonitorUpdate_);\n            rack.children.forEach((bc) => {\n                this.setUpApi_(bc);\n            });\n        }\n        get children() {\n            return this.controller_.rack.children.map((bc) => getApiByController(this.apiSet_, bc));\n        }\n        addInput(object, key, opt_params) {\n            const params = opt_params || {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createInput(doc, createBindingTarget(object, key, params.presetKey), params);\n            const api = new InputBindingApi(bc);\n            return this.add(api, params.index);\n        }\n        addMonitor(object, key, opt_params) {\n            const params = opt_params || {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createMonitor(doc, createBindingTarget(object, key), params);\n            const api = new MonitorBindingApi(bc);\n            return forceCast(this.add(api, params.index));\n        }\n        addFolder(params) {\n            return addFolderAsBlade(this, params);\n        }\n        addButton(params) {\n            return addButtonAsBlade(this, params);\n        }\n        addSeparator(opt_params) {\n            return addSeparatorAsBlade(this, opt_params);\n        }\n        addTab(params) {\n            return addTabAsBlade(this, params);\n        }\n        add(api, opt_index) {\n            this.controller_.rack.add(api.controller_, opt_index);\n            const gapi = this.apiSet_.find((a) => a.controller_ === api.controller_);\n            if (gapi) {\n                this.apiSet_.remove(gapi);\n            }\n            this.apiSet_.add(api);\n            return api;\n        }\n        remove(api) {\n            this.controller_.rack.remove(api.controller_);\n        }\n        addBlade(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createBlade(doc, params);\n            const api = this.pool_.createBladeApi(bc);\n            return this.add(api, params.index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpApi_(bc) {\n            const api = this.apiSet_.find((api) => api.controller_ === bc);\n            if (!api) {\n                this.apiSet_.add(this.pool_.createBladeApi(bc));\n            }\n        }\n        onRackAdd_(ev) {\n            this.setUpApi_(ev.bladeController);\n        }\n        onRackRemove_(ev) {\n            if (ev.isRoot) {\n                const api = getApiByController(this.apiSet_, ev.bladeController);\n                this.apiSet_.remove(api);\n            }\n        }\n        onRackInputChange_(ev) {\n            const bc = ev.bladeController;\n            if (bc instanceof InputBindingController) {\n                const api = getApiByController(this.apiSet_, bc);\n                const binding = bc.binding;\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, forceCast(binding.target.read()), binding.target.presetKey, ev.options.last),\n                });\n            }\n            else if (bc instanceof ValueBladeController) {\n                const api = getApiByController(this.apiSet_, bc);\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, bc.value.rawValue, undefined, ev.options.last),\n                });\n            }\n        }\n        onRackMonitorUpdate_(ev) {\n            if (!(ev.bladeController instanceof MonitorBindingController)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = getApiByController(this.apiSet_, ev.bladeController);\n            const binding = ev.bladeController.binding;\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(api, forceCast(binding.target.read()), binding.target.presetKey),\n            });\n        }\n    }\n\n    class FolderApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.emitter_ = new Emitter();\n            this.controller_.foldable\n                .value('expanded')\n                .emitter.on('change', (ev) => {\n                this.emitter_.emit('fold', {\n                    event: new TpFoldEvent(this, ev.sender.rawValue),\n                });\n            });\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n        }\n        get expanded() {\n            return this.controller_.foldable.get('expanded');\n        }\n        set expanded(expanded) {\n            this.controller_.foldable.set('expanded', expanded);\n        }\n        get title() {\n            return this.controller_.props.get('title');\n        }\n        set title(title) {\n            this.controller_.props.set('title', title);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            return this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class RackLikeController extends BladeController {\n        constructor(config) {\n            super({\n                blade: config.blade,\n                view: config.view,\n                viewProps: config.rackController.viewProps,\n            });\n            this.rackController = config.rackController;\n        }\n    }\n\n    class PlainView {\n        constructor(doc, config) {\n            const className = ClassName(config.viewName);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n        }\n    }\n\n    function findInputBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof InputBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findMonitorBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof MonitorBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findValueBladeController(bcs, v) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof ValueBladeController && bc.value === v) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findSubRack(bc) {\n        if (bc instanceof RackController) {\n            return bc.rack;\n        }\n        if (bc instanceof RackLikeController) {\n            return bc.rackController.rack;\n        }\n        return null;\n    }\n    function findSubBladeControllerSet(bc) {\n        const rack = findSubRack(bc);\n        return rack ? rack['bcSet_'] : null;\n    }\n    class BladeRack {\n        constructor(blade) {\n            var _a;\n            this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this);\n            this.onSetAdd_ = this.onSetAdd_.bind(this);\n            this.onSetRemove_ = this.onSetRemove_.bind(this);\n            this.onChildDispose_ = this.onChildDispose_.bind(this);\n            this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this);\n            this.onChildInputChange_ = this.onChildInputChange_.bind(this);\n            this.onChildMonitorUpdate_ = this.onChildMonitorUpdate_.bind(this);\n            this.onChildValueChange_ = this.onChildValueChange_.bind(this);\n            this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this);\n            this.onDescendantLayout_ = this.onDescendantLayout_.bind(this);\n            this.onDescendantInputChange_ = this.onDescendantInputChange_.bind(this);\n            this.onDescendantMonitorUpdate_ =\n                this.onDescendantMonitorUpdate_.bind(this);\n            this.emitter = new Emitter();\n            this.blade_ = blade !== null && blade !== void 0 ? blade : null;\n            (_a = this.blade_) === null || _a === void 0 ? void 0 : _a.value('positions').emitter.on('change', this.onBladePositionsChange_);\n            this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet);\n            this.bcSet_.emitter.on('add', this.onSetAdd_);\n            this.bcSet_.emitter.on('remove', this.onSetRemove_);\n        }\n        get children() {\n            return this.bcSet_.items;\n        }\n        add(bc, opt_index) {\n            if (bc.parent) {\n                bc.parent.remove(bc);\n            }\n            bc['parent_'] = this;\n            this.bcSet_.add(bc, opt_index);\n        }\n        remove(bc) {\n            bc['parent_'] = null;\n            this.bcSet_.remove(bc);\n        }\n        find(controllerClass) {\n            return forceCast(this.bcSet_.allItems().filter((bc) => {\n                return bc instanceof controllerClass;\n            }));\n        }\n        onSetAdd_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('add', {\n                bladeController: ev.item,\n                index: ev.index,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            bc.viewProps.emitter.on('change', this.onChildViewPropsChange_);\n            bc.blade\n                .value('positions')\n                .emitter.on('change', this.onChildPositionsChange_);\n            bc.viewProps.handleDispose(this.onChildDispose_);\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.on('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.on('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.on('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.on('layout', this.onDescendantLayout_);\n                    emitter.on('inputchange', this.onDescendantInputChange_);\n                    emitter.on('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        onSetRemove_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('remove', {\n                bladeController: ev.item,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.off('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.off('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.off('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.off('layout', this.onDescendantLayout_);\n                    emitter.off('inputchange', this.onDescendantInputChange_);\n                    emitter.off('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        updatePositions_() {\n            const visibleItems = this.bcSet_.items.filter((bc) => !bc.viewProps.get('hidden'));\n            const firstVisibleItem = visibleItems[0];\n            const lastVisibleItem = visibleItems[visibleItems.length - 1];\n            this.bcSet_.items.forEach((bc) => {\n                const ps = [];\n                if (bc === firstVisibleItem) {\n                    ps.push('first');\n                    if (!this.blade_ ||\n                        this.blade_.get('positions').includes('veryfirst')) {\n                        ps.push('veryfirst');\n                    }\n                }\n                if (bc === lastVisibleItem) {\n                    ps.push('last');\n                    if (!this.blade_ || this.blade_.get('positions').includes('verylast')) {\n                        ps.push('verylast');\n                    }\n                }\n                bc.blade.set('positions', ps);\n            });\n        }\n        onChildPositionsChange_() {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildViewPropsChange_(_ev) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildDispose_() {\n            const disposedUcs = this.bcSet_.items.filter((bc) => {\n                return bc.viewProps.get('disposed');\n            });\n            disposedUcs.forEach((bc) => {\n                this.bcSet_.remove(bc);\n            });\n        }\n        onChildInputChange_(ev) {\n            const bc = findInputBindingController(this.find(InputBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onChildMonitorUpdate_(ev) {\n            const bc = findMonitorBindingController(this.find(MonitorBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('monitorupdate', {\n                bladeController: bc,\n                sender: this,\n            });\n        }\n        onChildValueChange_(ev) {\n            const bc = findValueBladeController(this.find(ValueBladeController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantLayout_(_) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onDescendantInputChange_(ev) {\n            this.emitter.emit('inputchange', {\n                bladeController: ev.bladeController,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantMonitorUpdate_(ev) {\n            this.emitter.emit('monitorupdate', {\n                bladeController: ev.bladeController,\n                sender: this,\n            });\n        }\n        onBladePositionsChange_() {\n            this.updatePositions_();\n        }\n    }\n\n    class RackController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new PlainView(doc, {\n                    viewName: 'brk',\n                    viewProps: config.viewProps,\n                }) }));\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            const rack = new BladeRack(config.root ? undefined : config.blade);\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            this.rack = rack;\n            this.viewProps.handleDispose(() => {\n                for (let i = this.rack.children.length - 1; i >= 0; i--) {\n                    const bc = this.rack.children[i];\n                    bc.viewProps.set('disposed', true);\n                }\n            });\n        }\n        onRackAdd_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            insertElementAt(this.view.element, ev.bladeController.view.element, ev.index);\n        }\n        onRackRemove_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            removeElement(ev.bladeController.view.element);\n        }\n    }\n\n    const bladeContainerClassName = ClassName('cnt');\n\n    class FolderView {\n        constructor(doc, config) {\n            this.className_ = ClassName(config.viewName || 'fld');\n            this.element = doc.createElement('div');\n            this.element.classList.add(this.className_(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            this.foldable_ = config.foldable;\n            this.foldable_.bindExpandedClass(this.element, this.className_(undefined, 'expanded'));\n            bindValueMap(this.foldable_, 'completed', valueToClassName(this.element, this.className_(undefined, 'cpl')));\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(this.className_('b'));\n            bindValueMap(config.props, 'title', (title) => {\n                if (isEmpty(title)) {\n                    this.element.classList.add(this.className_(undefined, 'not'));\n                }\n                else {\n                    this.element.classList.remove(this.className_(undefined, 'not'));\n                }\n            });\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(this.className_('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(this.className_('m'));\n            this.buttonElement.appendChild(markElem);\n            const containerElem = config.containerElement;\n            containerElem.classList.add(this.className_('c'));\n            this.element.appendChild(containerElem);\n            this.containerElement = containerElem;\n        }\n    }\n\n    class FolderController extends RackLikeController {\n        constructor(doc, config) {\n            var _a;\n            const foldable = Foldable.create((_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n            const rc = new RackController(doc, {\n                blade: config.blade,\n                root: config.root,\n                viewProps: config.viewProps,\n            });\n            super(Object.assign(Object.assign({}, config), { rackController: rc, view: new FolderView(doc, {\n                    containerElement: rc.view.element,\n                    foldable: foldable,\n                    props: config.props,\n                    viewName: config.root ? 'rot' : undefined,\n                    viewProps: config.viewProps,\n                }) }));\n            this.onTitleClick_ = this.onTitleClick_.bind(this);\n            this.props = config.props;\n            this.foldable = foldable;\n            bindFoldable(this.foldable, this.view.containerElement);\n            this.view.buttonElement.addEventListener('click', this.onTitleClick_);\n        }\n        get document() {\n            return this.view.element.ownerDocument;\n        }\n        onTitleClick_() {\n            this.foldable.set('expanded', !this.foldable.get('expanded'));\n        }\n    }\n\n    const FolderBladePlugin = {\n        id: 'folder',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('folder'),\n                expanded: p.optional.boolean,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new FolderController(args.document, {\n                blade: args.blade,\n                expanded: args.params.expanded,\n                props: ValueMap.fromObject({\n                    title: args.params.title,\n                }),\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof FolderController)) {\n                return null;\n            }\n            return new FolderApi(args.controller, args.pool);\n        },\n    };\n\n    class LabeledValueController extends ValueBladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { value: config.valueController.value, view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    class SeparatorApi extends BladeApi {\n    }\n\n    const className$n = ClassName('spr');\n    class SeparatorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$n());\n            config.viewProps.bindClassModifiers(this.element);\n            const hrElem = doc.createElement('hr');\n            hrElem.classList.add(className$n('r'));\n            this.element.appendChild(hrElem);\n        }\n    }\n\n    class SeparatorController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new SeparatorView(doc, {\n                    viewProps: config.viewProps,\n                }) }));\n        }\n    }\n\n    const SeparatorBladePlugin = {\n        id: 'separator',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                view: p.required.constant('separator'),\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new SeparatorController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof SeparatorController)) {\n                return null;\n            }\n            return new SeparatorApi(args.controller);\n        },\n    };\n\n    const className$m = ClassName('');\n    function valueToModifier(elem, modifier) {\n        return valueToClassName(elem, className$m(undefined, modifier));\n    }\n    class ViewProps extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(opt_initialValue) {\n            var _a, _b;\n            const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n            const coreObj = {\n                disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n                disposed: false,\n                hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new ViewProps(core);\n        }\n        bindClassModifiers(elem) {\n            bindValueMap(this, 'disabled', valueToModifier(elem, 'disabled'));\n            bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n        }\n        bindDisabled(target) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                target.disabled = disabled;\n            });\n        }\n        bindTabIndex(elem) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                elem.tabIndex = disabled ? -1 : 0;\n            });\n        }\n        handleDispose(callback) {\n            this.value('disposed').emitter.on('change', (disposed) => {\n                if (disposed) {\n                    callback();\n                }\n            });\n        }\n    }\n\n    const className$l = ClassName('tbi');\n    class TabItemView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$l());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValueMap(config.props, 'selected', (selected) => {\n                if (selected) {\n                    this.element.classList.add(className$l(undefined, 'sel'));\n                }\n                else {\n                    this.element.classList.remove(className$l(undefined, 'sel'));\n                }\n            });\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$l('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$l('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n        }\n    }\n\n    class TabItemController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new TabItemView(doc, {\n                props: config.props,\n                viewProps: config.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class TabPageController {\n        constructor(doc, config) {\n            this.onItemClick_ = this.onItemClick_.bind(this);\n            this.ic_ = new TabItemController(doc, {\n                props: config.itemProps,\n                viewProps: ViewProps.create(),\n            });\n            this.ic_.emitter.on('click', this.onItemClick_);\n            this.cc_ = new RackController(doc, {\n                blade: createBlade(),\n                viewProps: ViewProps.create(),\n            });\n            this.props = config.props;\n            bindValueMap(this.props, 'selected', (selected) => {\n                this.itemController.props.set('selected', selected);\n                this.contentController.viewProps.set('hidden', !selected);\n            });\n        }\n        get itemController() {\n            return this.ic_;\n        }\n        get contentController() {\n            return this.cc_;\n        }\n        onItemClick_() {\n            this.props.set('selected', true);\n        }\n    }\n\n    class TabPageApi {\n        constructor(controller, contentRackApi) {\n            this.controller_ = controller;\n            this.rackApi_ = contentRackApi;\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.itemController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.itemController.props.set('title', title);\n        }\n        get selected() {\n            return this.controller_.props.get('selected');\n        }\n        set selected(selected) {\n            this.controller_.props.set('selected', selected);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n    }\n\n    class TabApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.emitter_ = new Emitter();\n            this.pageApiMap_ = new Map();\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n            this.controller_.pageSet.emitter.on('add', this.onPageAdd_);\n            this.controller_.pageSet.emitter.on('remove', this.onPageRemove_);\n            this.controller_.pageSet.items.forEach((pc) => {\n                this.setUpPageApi_(pc);\n            });\n        }\n        get pages() {\n            return this.controller_.pageSet.items.map((pc) => {\n                const api = this.pageApiMap_.get(pc);\n                if (!api) {\n                    throw TpError.shouldNeverHappen();\n                }\n                return api;\n            });\n        }\n        addPage(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const pc = new TabPageController(doc, {\n                itemProps: ValueMap.fromObject({\n                    selected: false,\n                    title: params.title,\n                }),\n                props: ValueMap.fromObject({\n                    selected: false,\n                }),\n            });\n            this.controller_.add(pc, params.index);\n            const api = this.pageApiMap_.get(pc);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n        removePage(index) {\n            this.controller_.remove(index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpPageApi_(pc) {\n            const rackApi = this.rackApi_['apiSet_'].find((api) => api.controller_ === pc.contentController);\n            if (!rackApi) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = new TabPageApi(pc, rackApi);\n            this.pageApiMap_.set(pc, api);\n        }\n        onPageAdd_(ev) {\n            this.setUpPageApi_(ev.item);\n        }\n        onPageRemove_(ev) {\n            const api = this.pageApiMap_.get(ev.item);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.pageApiMap_.delete(ev.item);\n        }\n    }\n\n    const className$k = ClassName('tab');\n    class TabView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$k(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.empty, valueToClassName(this.element, className$k(undefined, 'nop')));\n            const itemsElem = doc.createElement('div');\n            itemsElem.classList.add(className$k('i'));\n            this.element.appendChild(itemsElem);\n            this.itemsElement = itemsElem;\n            const contentsElem = config.contentsElement;\n            contentsElem.classList.add(className$k('c'));\n            this.element.appendChild(contentsElem);\n            this.contentsElement = contentsElem;\n        }\n    }\n\n    class TabController extends RackLikeController {\n        constructor(doc, config) {\n            const cr = new RackController(doc, {\n                blade: config.blade,\n                viewProps: config.viewProps,\n            });\n            const empty = createValue(true);\n            super({\n                blade: config.blade,\n                rackController: cr,\n                view: new TabView(doc, {\n                    contentsElement: cr.view.element,\n                    empty: empty,\n                    viewProps: config.viewProps,\n                }),\n            });\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.onPageSelectedChange_ = this.onPageSelectedChange_.bind(this);\n            this.pageSet_ = new NestedOrderedSet(() => null);\n            this.pageSet_.emitter.on('add', this.onPageAdd_);\n            this.pageSet_.emitter.on('remove', this.onPageRemove_);\n            this.empty_ = empty;\n            this.applyPages_();\n        }\n        get pageSet() {\n            return this.pageSet_;\n        }\n        add(pc, opt_index) {\n            this.pageSet_.add(pc, opt_index !== null && opt_index !== void 0 ? opt_index : this.pageSet_.items.length);\n        }\n        remove(index) {\n            this.pageSet_.remove(this.pageSet_.items[index]);\n        }\n        applyPages_() {\n            this.keepSelection_();\n            this.empty_.rawValue = this.pageSet_.items.length === 0;\n        }\n        onPageAdd_(ev) {\n            const pc = ev.item;\n            insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index);\n            this.rackController.rack.add(pc.contentController, ev.index);\n            pc.props.value('selected').emitter.on('change', this.onPageSelectedChange_);\n            this.applyPages_();\n        }\n        onPageRemove_(ev) {\n            const pc = ev.item;\n            removeElement(pc.itemController.view.element);\n            this.rackController.rack.remove(pc.contentController);\n            pc.props\n                .value('selected')\n                .emitter.off('change', this.onPageSelectedChange_);\n            this.applyPages_();\n        }\n        keepSelection_() {\n            if (this.pageSet_.items.length === 0) {\n                return;\n            }\n            const firstSelIndex = this.pageSet_.items.findIndex((pc) => pc.props.get('selected'));\n            if (firstSelIndex < 0) {\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === 0);\n                });\n            }\n            else {\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === firstSelIndex);\n                });\n            }\n        }\n        onPageSelectedChange_(ev) {\n            if (ev.rawValue) {\n                const index = this.pageSet_.items.findIndex((pc) => pc.props.value('selected') === ev.sender);\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === index);\n                });\n            }\n            else {\n                this.keepSelection_();\n            }\n        }\n    }\n\n    const TabBladePlugin = {\n        id: 'tab',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                pages: p.required.array(p.required.object({ title: p.required.string })),\n                view: p.required.constant('tab'),\n            });\n            if (!result || result.pages.length === 0) {\n                return null;\n            }\n            return { params: result };\n        },\n        controller(args) {\n            const c = new TabController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n            args.params.pages.forEach((p) => {\n                const pc = new TabPageController(args.document, {\n                    itemProps: ValueMap.fromObject({\n                        selected: false,\n                        title: p.title,\n                    }),\n                    props: ValueMap.fromObject({\n                        selected: false,\n                    }),\n                });\n                c.add(pc);\n            });\n            return c;\n        },\n        api(args) {\n            if (!(args.controller instanceof TabController)) {\n                return null;\n            }\n            return new TabApi(args.controller, args.pool);\n        },\n    };\n\n    function createBladeController(plugin, args) {\n        const ac = plugin.accept(args.params);\n        if (!ac) {\n            return null;\n        }\n        const disabled = ParamsParsers.optional.boolean(args.params['disabled']).value;\n        const hidden = ParamsParsers.optional.boolean(args.params['hidden']).value;\n        return plugin.controller({\n            blade: createBlade(),\n            document: args.document,\n            params: forceCast(Object.assign(Object.assign({}, ac.params), { disabled: disabled, hidden: hidden })),\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n    }\n\n    class ManualTicker {\n        constructor() {\n            this.disabled = false;\n            this.emitter = new Emitter();\n        }\n        dispose() { }\n        tick() {\n            if (this.disabled) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class IntervalTicker {\n        constructor(doc, interval) {\n            this.disabled_ = false;\n            this.timerId_ = null;\n            this.onTick_ = this.onTick_.bind(this);\n            this.doc_ = doc;\n            this.emitter = new Emitter();\n            this.interval_ = interval;\n            this.setTimer_();\n        }\n        get disabled() {\n            return this.disabled_;\n        }\n        set disabled(inactive) {\n            this.disabled_ = inactive;\n            if (this.disabled_) {\n                this.clearTimer_();\n            }\n            else {\n                this.setTimer_();\n            }\n        }\n        dispose() {\n            this.clearTimer_();\n        }\n        clearTimer_() {\n            if (this.timerId_ === null) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                win.clearInterval(this.timerId_);\n            }\n            this.timerId_ = null;\n        }\n        setTimer_() {\n            this.clearTimer_();\n            if (this.interval_ <= 0) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n            }\n        }\n        onTick_() {\n            if (this.disabled_) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class CompositeConstraint {\n        constructor(constraints) {\n            this.constraints = constraints;\n        }\n        constrain(value) {\n            return this.constraints.reduce((result, c) => {\n                return c.constrain(result);\n            }, value);\n        }\n    }\n    function findConstraint(c, constraintClass) {\n        if (c instanceof constraintClass) {\n            return c;\n        }\n        if (c instanceof CompositeConstraint) {\n            const result = c.constraints.reduce((tmpResult, sc) => {\n                if (tmpResult) {\n                    return tmpResult;\n                }\n                return sc instanceof constraintClass ? sc : null;\n            }, null);\n            if (result) {\n                return result;\n            }\n        }\n        return null;\n    }\n\n    class ListConstraint {\n        constructor(options) {\n            this.options = options;\n        }\n        constrain(value) {\n            const opts = this.options;\n            if (opts.length === 0) {\n                return value;\n            }\n            const matched = opts.filter((item) => {\n                return item.value === value;\n            }).length > 0;\n            return matched ? value : opts[0].value;\n        }\n    }\n\n    class RangeConstraint {\n        constructor(config) {\n            this.maxValue = config.max;\n            this.minValue = config.min;\n        }\n        constrain(value) {\n            let result = value;\n            if (!isEmpty(this.minValue)) {\n                result = Math.max(result, this.minValue);\n            }\n            if (!isEmpty(this.maxValue)) {\n                result = Math.min(result, this.maxValue);\n            }\n            return result;\n        }\n    }\n\n    class StepConstraint {\n        constructor(step) {\n            this.step = step;\n        }\n        constrain(value) {\n            const r = value < 0\n                ? -Math.round(-value / this.step)\n                : Math.round(value / this.step);\n            return r * this.step;\n        }\n    }\n\n    const className$j = ClassName('lst');\n    class ListView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.props_ = config.props;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$j());\n            config.viewProps.bindClassModifiers(this.element);\n            const selectElem = doc.createElement('select');\n            selectElem.classList.add(className$j('s'));\n            bindValueMap(this.props_, 'options', (opts) => {\n                removeChildElements(selectElem);\n                opts.forEach((item, index) => {\n                    const optionElem = doc.createElement('option');\n                    optionElem.dataset.index = String(index);\n                    optionElem.textContent = item.text;\n                    optionElem.value = String(item.value);\n                    selectElem.appendChild(optionElem);\n                });\n            });\n            config.viewProps.bindDisabled(selectElem);\n            this.element.appendChild(selectElem);\n            this.selectElement = selectElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(className$j('m'));\n            markElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            this.element.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value_ = config.value;\n            this.update_();\n        }\n        update_() {\n            this.selectElement.value = String(this.value_.rawValue);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ListController {\n        constructor(doc, config) {\n            this.onSelectChange_ = this.onSelectChange_.bind(this);\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ListView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.selectElement.addEventListener('change', this.onSelectChange_);\n        }\n        onSelectChange_(e) {\n            const selectElem = forceCast(e.currentTarget);\n            const optElem = selectElem.selectedOptions.item(0);\n            if (!optElem) {\n                return;\n            }\n            const itemIndex = Number(optElem.dataset.index);\n            this.value.rawValue = this.props.get('options')[itemIndex].value;\n        }\n    }\n\n    const className$i = ClassName('pop');\n    class PopupView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$i());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.shows, valueToClassName(this.element, className$i(undefined, 'v')));\n        }\n    }\n\n    class PopupController {\n        constructor(doc, config) {\n            this.shows = createValue(false);\n            this.viewProps = config.viewProps;\n            this.view = new PopupView(doc, {\n                shows: this.shows,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$h = ClassName('txt');\n    class TextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$h());\n            config.viewProps.bindClassModifiers(this.element);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$h('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value_ = config.value;\n            this.refresh();\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value_.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class TextController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new TextView(doc, {\n                props: config.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n    }\n\n    function boolToString(value) {\n        return String(value);\n    }\n    function boolFromUnknown(value) {\n        if (value === 'false') {\n            return false;\n        }\n        return !!value;\n    }\n    function BooleanFormatter(value) {\n        return boolToString(value);\n    }\n\n    class NumberLiteralNode {\n        constructor(text) {\n            this.text = text;\n        }\n        evaluate() {\n            return Number(this.text);\n        }\n        toString() {\n            return this.text;\n        }\n    }\n    const BINARY_OPERATION_MAP = {\n        '**': (v1, v2) => Math.pow(v1, v2),\n        '*': (v1, v2) => v1 * v2,\n        '/': (v1, v2) => v1 / v2,\n        '%': (v1, v2) => v1 % v2,\n        '+': (v1, v2) => v1 + v2,\n        '-': (v1, v2) => v1 - v2,\n        '<<': (v1, v2) => v1 << v2,\n        '>>': (v1, v2) => v1 >> v2,\n        '>>>': (v1, v2) => v1 >>> v2,\n        '&': (v1, v2) => v1 & v2,\n        '^': (v1, v2) => v1 ^ v2,\n        '|': (v1, v2) => v1 | v2,\n    };\n    class BinaryOperationNode {\n        constructor(operator, left, right) {\n            this.left = left;\n            this.operator = operator;\n            this.right = right;\n        }\n        evaluate() {\n            const op = BINARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected binary operator: '${this.operator}`);\n            }\n            return op(this.left.evaluate(), this.right.evaluate());\n        }\n        toString() {\n            return [\n                'b(',\n                this.left.toString(),\n                this.operator,\n                this.right.toString(),\n                ')',\n            ].join(' ');\n        }\n    }\n    const UNARY_OPERATION_MAP = {\n        '+': (v) => v,\n        '-': (v) => -v,\n        '~': (v) => ~v,\n    };\n    class UnaryOperationNode {\n        constructor(operator, expr) {\n            this.operator = operator;\n            this.expression = expr;\n        }\n        evaluate() {\n            const op = UNARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected unary operator: '${this.operator}`);\n            }\n            return op(this.expression.evaluate());\n        }\n        toString() {\n            return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n        }\n    }\n\n    function combineReader(parsers) {\n        return (text, cursor) => {\n            for (let i = 0; i < parsers.length; i++) {\n                const result = parsers[i](text, cursor);\n                if (result !== '') {\n                    return result;\n                }\n            }\n            return '';\n        };\n    }\n    function readWhitespace(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^\\s+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readNonZeroDigit(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        return ch.match(/^[1-9]$/) ? ch : '';\n    }\n    function readDecimalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readSignedInteger(text, cursor) {\n        const ds = readDecimalDigits(text, cursor);\n        if (ds !== '') {\n            return ds;\n        }\n        const sign = text.substr(cursor, 1);\n        cursor += 1;\n        if (sign !== '-' && sign !== '+') {\n            return '';\n        }\n        const sds = readDecimalDigits(text, cursor);\n        if (sds === '') {\n            return '';\n        }\n        return sign + sds;\n    }\n    function readExponentPart(text, cursor) {\n        const e = text.substr(cursor, 1);\n        cursor += 1;\n        if (e.toLowerCase() !== 'e') {\n            return '';\n        }\n        const si = readSignedInteger(text, cursor);\n        if (si === '') {\n            return '';\n        }\n        return e + si;\n    }\n    function readDecimalIntegerLiteral(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        if (ch === '0') {\n            return ch;\n        }\n        const nzd = readNonZeroDigit(text, cursor);\n        cursor += nzd.length;\n        if (nzd === '') {\n            return '';\n        }\n        return nzd + readDecimalDigits(text, cursor);\n    }\n    function readDecimalLiteral1(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        return dil + dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral2(text, cursor) {\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        if (dds === '') {\n            return '';\n        }\n        return dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral3(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        return dil + readExponentPart(text, cursor);\n    }\n    const readDecimalLiteral = combineReader([\n        readDecimalLiteral1,\n        readDecimalLiteral2,\n        readDecimalLiteral3,\n    ]);\n    function parseBinaryDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[01]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readBinaryIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0b') {\n            return '';\n        }\n        const bds = parseBinaryDigits(text, cursor);\n        if (bds === '') {\n            return '';\n        }\n        return prefix + bds;\n    }\n    function readOctalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-7]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readOctalIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0o') {\n            return '';\n        }\n        const ods = readOctalDigits(text, cursor);\n        if (ods === '') {\n            return '';\n        }\n        return prefix + ods;\n    }\n    function readHexDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readHexIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0x') {\n            return '';\n        }\n        const hds = readHexDigits(text, cursor);\n        if (hds === '') {\n            return '';\n        }\n        return prefix + hds;\n    }\n    const readNonDecimalIntegerLiteral = combineReader([\n        readBinaryIntegerLiteral,\n        readOctalIntegerLiteral,\n        readHexIntegerLiteral,\n    ]);\n    const readNumericLiteral = combineReader([\n        readNonDecimalIntegerLiteral,\n        readDecimalLiteral,\n    ]);\n\n    function parseLiteral(text, cursor) {\n        const num = readNumericLiteral(text, cursor);\n        cursor += num.length;\n        if (num === '') {\n            return null;\n        }\n        return {\n            evaluable: new NumberLiteralNode(num),\n            cursor: cursor,\n        };\n    }\n    function parseParenthesizedExpression(text, cursor) {\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '(') {\n            return null;\n        }\n        const expr = parseExpression(text, cursor);\n        if (!expr) {\n            return null;\n        }\n        cursor = expr.cursor;\n        cursor += readWhitespace(text, cursor).length;\n        const cl = text.substr(cursor, 1);\n        cursor += cl.length;\n        if (cl !== ')') {\n            return null;\n        }\n        return {\n            evaluable: expr.evaluable,\n            cursor: cursor,\n        };\n    }\n    function parsePrimaryExpression(text, cursor) {\n        return (parseLiteral(text, cursor) || parseParenthesizedExpression(text, cursor));\n    }\n    function parseUnaryExpression(text, cursor) {\n        const expr = parsePrimaryExpression(text, cursor);\n        if (expr) {\n            return expr;\n        }\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '+' && op !== '-' && op !== '~') {\n            return null;\n        }\n        const num = parseUnaryExpression(text, cursor);\n        if (!num) {\n            return null;\n        }\n        cursor = num.cursor;\n        return {\n            cursor: cursor,\n            evaluable: new UnaryOperationNode(op, num.evaluable),\n        };\n    }\n    function readBinaryOperator(ops, text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        const op = ops.filter((op) => text.startsWith(op, cursor))[0];\n        if (!op) {\n            return null;\n        }\n        cursor += op.length;\n        cursor += readWhitespace(text, cursor).length;\n        return {\n            cursor: cursor,\n            operator: op,\n        };\n    }\n    function createBinaryOperationExpressionParser(exprParser, ops) {\n        return (text, cursor) => {\n            const firstExpr = exprParser(text, cursor);\n            if (!firstExpr) {\n                return null;\n            }\n            cursor = firstExpr.cursor;\n            let expr = firstExpr.evaluable;\n            for (;;) {\n                const op = readBinaryOperator(ops, text, cursor);\n                if (!op) {\n                    break;\n                }\n                cursor = op.cursor;\n                const nextExpr = exprParser(text, cursor);\n                if (!nextExpr) {\n                    return null;\n                }\n                cursor = nextExpr.cursor;\n                expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n            }\n            return expr\n                ? {\n                    cursor: cursor,\n                    evaluable: expr,\n                }\n                : null;\n        };\n    }\n    const parseBinaryOperationExpression = [\n        ['**'],\n        ['*', '/', '%'],\n        ['+', '-'],\n        ['<<', '>>>', '>>'],\n        ['&'],\n        ['^'],\n        ['|'],\n    ].reduce((parser, ops) => {\n        return createBinaryOperationExpressionParser(parser, ops);\n    }, parseUnaryExpression);\n    function parseExpression(text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        return parseBinaryOperationExpression(text, cursor);\n    }\n    function parseEcmaNumberExpression(text) {\n        const expr = parseExpression(text, 0);\n        if (!expr) {\n            return null;\n        }\n        const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n        if (cursor !== text.length) {\n            return null;\n        }\n        return expr.evaluable;\n    }\n\n    function parseNumber(text) {\n        var _a;\n        const r = parseEcmaNumberExpression(text);\n        return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n    }\n    function numberFromUnknown(value) {\n        if (typeof value === 'number') {\n            return value;\n        }\n        if (typeof value === 'string') {\n            const pv = parseNumber(value);\n            if (!isEmpty(pv)) {\n                return pv;\n            }\n        }\n        return 0;\n    }\n    function numberToString(value) {\n        return String(value);\n    }\n    function createNumberFormatter(digits) {\n        return (value) => {\n            return value.toFixed(Math.max(Math.min(digits, 20), 0));\n        };\n    }\n\n    const innerFormatter = createNumberFormatter(0);\n    function formatPercentage(value) {\n        return innerFormatter(value) + '%';\n    }\n\n    function stringFromUnknown(value) {\n        return String(value);\n    }\n    function formatString(value) {\n        return value;\n    }\n\n    function fillBuffer(buffer, bufferSize) {\n        while (buffer.length < bufferSize) {\n            buffer.push(undefined);\n        }\n    }\n    function initializeBuffer(bufferSize) {\n        const buffer = [];\n        fillBuffer(buffer, bufferSize);\n        return createValue(buffer);\n    }\n    function createTrimmedBuffer(buffer) {\n        const index = buffer.indexOf(undefined);\n        return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n    }\n    function createPushedBuffer(buffer, newValue) {\n        const newBuffer = [...createTrimmedBuffer(buffer), newValue];\n        if (newBuffer.length > buffer.length) {\n            newBuffer.splice(0, newBuffer.length - buffer.length);\n        }\n        else {\n            fillBuffer(newBuffer, buffer.length);\n        }\n        return newBuffer;\n    }\n\n    function connectValues({ primary, secondary, forward, backward, }) {\n        let changing = false;\n        function preventFeedback(callback) {\n            if (changing) {\n                return;\n            }\n            changing = true;\n            callback();\n            changing = false;\n        }\n        primary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        secondary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                primary.setRawValue(backward(primary, secondary), ev.options);\n            });\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary, secondary), {\n                forceEmit: false,\n                last: true,\n            });\n        });\n    }\n\n    function getStepForKey(baseStep, keys) {\n        const step = baseStep * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n        if (keys.upKey) {\n            return +step;\n        }\n        else if (keys.downKey) {\n            return -step;\n        }\n        return 0;\n    }\n    function getVerticalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowDown',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowUp',\n        };\n    }\n    function getHorizontalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowLeft',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowRight',\n        };\n    }\n    function isVerticalArrowKey(key) {\n        return key === 'ArrowUp' || key === 'ArrowDown';\n    }\n    function isArrowKey(key) {\n        return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n    }\n\n    function computeOffset$1(ev, elem) {\n        const win = elem.ownerDocument.defaultView;\n        const rect = elem.getBoundingClientRect();\n        return {\n            x: ev.pageX - (((win && win.scrollX) || 0) + rect.left),\n            y: ev.pageY - (((win && win.scrollY) || 0) + rect.top),\n        };\n    }\n    class PointerHandler {\n        constructor(element) {\n            this.lastTouch_ = null;\n            this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n            this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n            this.onMouseDown_ = this.onMouseDown_.bind(this);\n            this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n            this.onTouchMove_ = this.onTouchMove_.bind(this);\n            this.onTouchStart_ = this.onTouchStart_.bind(this);\n            this.elem_ = element;\n            this.emitter = new Emitter();\n            element.addEventListener('touchstart', this.onTouchStart_, {\n                passive: false,\n            });\n            element.addEventListener('touchmove', this.onTouchMove_, {\n                passive: true,\n            });\n            element.addEventListener('touchend', this.onTouchEnd_);\n            element.addEventListener('mousedown', this.onMouseDown_);\n        }\n        computePosition_(offset) {\n            const rect = this.elem_.getBoundingClientRect();\n            return {\n                bounds: {\n                    width: rect.width,\n                    height: rect.height,\n                },\n                point: offset\n                    ? {\n                        x: offset.x,\n                        y: offset.y,\n                    }\n                    : null,\n            };\n        }\n        onMouseDown_(ev) {\n            var _a;\n            ev.preventDefault();\n            (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n            const doc = this.elem_.ownerDocument;\n            doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseMove_(ev) {\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseUp_(ev) {\n            const doc = this.elem_.ownerDocument;\n            doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onTouchStart_(ev) {\n            ev.preventDefault();\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchMove_(ev) {\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchEnd_(ev) {\n            var _a;\n            const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n    }\n\n    function mapRange(value, start1, end1, start2, end2) {\n        const p = (value - start1) / (end1 - start1);\n        return start2 + p * (end2 - start2);\n    }\n    function getDecimalDigits(value) {\n        const text = String(value.toFixed(10));\n        const frac = text.split('.')[1];\n        return frac.replace(/0+$/, '').length;\n    }\n    function constrainRange(value, min, max) {\n        return Math.min(Math.max(value, min), max);\n    }\n    function loopRange(value, max) {\n        return ((value % max) + max) % max;\n    }\n\n    const className$g = ClassName('txt');\n    class NumberTextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$g(), className$g(undefined, 'num'));\n            if (config.arrayPosition) {\n                this.element.classList.add(className$g(undefined, config.arrayPosition));\n            }\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$g('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n            this.dragging_ = config.dragging;\n            this.dragging_.emitter.on('change', this.onDraggingChange_);\n            this.element.classList.add(className$g());\n            this.inputElement.classList.add(className$g('i'));\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$g('k'));\n            this.element.appendChild(knobElem);\n            this.knobElement = knobElem;\n            const guideElem = doc.createElementNS(SVG_NS, 'svg');\n            guideElem.classList.add(className$g('g'));\n            this.knobElement.appendChild(guideElem);\n            const bodyElem = doc.createElementNS(SVG_NS, 'path');\n            bodyElem.classList.add(className$g('gb'));\n            guideElem.appendChild(bodyElem);\n            this.guideBodyElem_ = bodyElem;\n            const headElem = doc.createElementNS(SVG_NS, 'path');\n            headElem.classList.add(className$g('gh'));\n            guideElem.appendChild(headElem);\n            this.guideHeadElem_ = headElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(ClassName('tt')());\n            this.knobElement.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.refresh();\n        }\n        onDraggingChange_(ev) {\n            if (ev.rawValue === null) {\n                this.element.classList.remove(className$g(undefined, 'drg'));\n                return;\n            }\n            this.element.classList.add(className$g(undefined, 'drg'));\n            const x = ev.rawValue / this.props_.get('draggingScale');\n            const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n            const adx = constrainRange(-aox, -4, +4);\n            this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\n            this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n            const formatter = this.props_.get('formatter');\n            this.tooltipElem_.textContent = formatter(this.value.rawValue);\n            this.tooltipElem_.style.left = `${x}px`;\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class NumberTextController {\n        constructor(doc, config) {\n            this.originRawValue_ = 0;\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.dragging_ = createValue(null);\n            this.view = new NumberTextView(doc, {\n                arrayPosition: config.arrayPosition,\n                dragging: this.dragging_,\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n            this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n            this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n            const ph = new PointerHandler(this.view.knobElement);\n            ph.emitter.on('down', this.onPointerDown_);\n            ph.emitter.on('move', this.onPointerMove_);\n            ph.emitter.on('up', this.onPointerUp_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n        onInputKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onInputKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPointerDown_() {\n            this.originRawValue_ = this.value.rawValue;\n            this.dragging_.rawValue = 0;\n        }\n        computeDraggingValue_(data) {\n            if (!data.point) {\n                return null;\n            }\n            const dx = data.point.x - data.bounds.width / 2;\n            return this.originRawValue_ + dx * this.props.get('draggingScale');\n        }\n        onPointerMove_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: false,\n                last: false,\n            });\n            this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n        }\n        onPointerUp_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: true,\n                last: true,\n            });\n            this.dragging_.rawValue = null;\n        }\n    }\n\n    const className$f = ClassName('sld');\n    class SliderView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$f());\n            config.viewProps.bindClassModifiers(this.element);\n            const trackElem = doc.createElement('div');\n            trackElem.classList.add(className$f('t'));\n            config.viewProps.bindTabIndex(trackElem);\n            this.element.appendChild(trackElem);\n            this.trackElement = trackElem;\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$f('k'));\n            this.trackElement.appendChild(knobElem);\n            this.knobElement = knobElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const p = constrainRange(mapRange(this.value.rawValue, this.props_.get('minValue'), this.props_.get('maxValue'), 0, 100), 0, 100);\n            this.knobElement.style.width = `${p}%`;\n        }\n        onChange_() {\n            this.update_();\n        }\n    }\n\n    class SliderController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.props = config.props;\n            this.view = new SliderView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.trackElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('move', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.trackElement.addEventListener('keydown', this.onKeyDown_);\n            this.view.trackElement.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get('minValue'), this.props.get('maxValue')), opts);\n        }\n        onPointerDownOrMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$e = ClassName('sldtxt');\n    class SliderTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$e());\n            const sliderElem = doc.createElement('div');\n            sliderElem.classList.add(className$e('s'));\n            this.sliderView_ = config.sliderView;\n            sliderElem.appendChild(this.sliderView_.element);\n            this.element.appendChild(sliderElem);\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$e('t'));\n            this.textView_ = config.textView;\n            textElem.appendChild(this.textView_.element);\n            this.element.appendChild(textElem);\n        }\n    }\n\n    class SliderTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.sliderC_ = new SliderController(doc, {\n                baseStep: config.baseStep,\n                props: config.sliderProps,\n                value: config.value,\n                viewProps: this.viewProps,\n            });\n            this.textC_ = new NumberTextController(doc, {\n                baseStep: config.baseStep,\n                parser: config.parser,\n                props: config.textProps,\n                value: config.value,\n                viewProps: config.viewProps,\n            });\n            this.view = new SliderTextView(doc, {\n                sliderView: this.sliderC_.view,\n                textView: this.textC_.view,\n            });\n        }\n        get sliderController() {\n            return this.sliderC_;\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    function writePrimitive(target, value) {\n        target.write(value);\n    }\n\n    function parseListOptions(value) {\n        const p = ParamsParsers;\n        if (Array.isArray(value)) {\n            return p.required.array(p.required.object({\n                text: p.required.string,\n                value: p.required.raw,\n            }))(value).value;\n        }\n        if (typeof value === 'object') {\n            return p.required.raw(value)\n                .value;\n        }\n        return undefined;\n    }\n    function parsePickerLayout(value) {\n        if (value === 'inline' || value === 'popup') {\n            return value;\n        }\n        return undefined;\n    }\n    function parsePointDimensionParams(value) {\n        const p = ParamsParsers;\n        return p.required.object({\n            max: p.optional.number,\n            min: p.optional.number,\n            step: p.optional.number,\n        })(value).value;\n    }\n    function normalizeListOptions(options) {\n        if (Array.isArray(options)) {\n            return options;\n        }\n        const items = [];\n        Object.keys(options).forEach((text) => {\n            items.push({ text: text, value: options[text] });\n        });\n        return items;\n    }\n    function createListConstraint(options) {\n        return !isEmpty(options)\n            ? new ListConstraint(normalizeListOptions(forceCast(options)))\n            : null;\n    }\n    function findListItems(constraint) {\n        const c = constraint\n            ? findConstraint(constraint, ListConstraint)\n            : null;\n        if (!c) {\n            return null;\n        }\n        return c.options;\n    }\n    function findStep(constraint) {\n        const c = constraint ? findConstraint(constraint, StepConstraint) : null;\n        if (!c) {\n            return null;\n        }\n        return c.step;\n    }\n    function getSuitableDecimalDigits(constraint, rawValue) {\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        if (sc) {\n            return getDecimalDigits(sc.step);\n        }\n        return Math.max(getDecimalDigits(rawValue), 2);\n    }\n    function getBaseStep(constraint) {\n        const step = findStep(constraint);\n        return step !== null && step !== void 0 ? step : 1;\n    }\n    function getSuitableDraggingScale(constraint, rawValue) {\n        var _a;\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        const base = Math.abs((_a = sc === null || sc === void 0 ? void 0 : sc.step) !== null && _a !== void 0 ? _a : rawValue);\n        return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n    }\n\n    const className$d = ClassName('ckb');\n    class CheckboxView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$d());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('label');\n            labelElem.classList.add(className$d('l'));\n            this.element.appendChild(labelElem);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$d('i'));\n            inputElem.type = 'checkbox';\n            labelElem.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.viewProps.bindDisabled(this.inputElement);\n            const wrapperElem = doc.createElement('div');\n            wrapperElem.classList.add(className$d('w'));\n            labelElem.appendChild(wrapperElem);\n            const markElem = createSvgIconElement(doc, 'check');\n            wrapperElem.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            this.inputElement.checked = this.value.rawValue;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class CheckboxController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new CheckboxView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            this.value.rawValue = inputElem.checked;\n        }\n    }\n\n    function createConstraint$5(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const BooleanInputPlugin = {\n        id: 'input-bool',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n            constraint: (args) => createConstraint$5(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a;\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(doc, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new CheckboxController(doc, {\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const className$c = ClassName('col');\n    class ColorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$c());\n            config.foldable.bindExpandedClass(this.element, className$c(undefined, 'expanded'));\n            bindValueMap(config.foldable, 'completed', valueToClassName(this.element, className$c(undefined, 'cpl')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$c('h'));\n            this.element.appendChild(headElem);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$c('s'));\n            headElem.appendChild(swatchElem);\n            this.swatchElement = swatchElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$c('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$c('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    function rgbToHsl(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const c = cmax - cmin;\n        let h = 0;\n        let s = 0;\n        const l = (cmin + cmax) / 2;\n        if (c !== 0) {\n            s = c / (1 - Math.abs(cmax + cmin - 1));\n            if (rp === cmax) {\n                h = (gp - bp) / c;\n            }\n            else if (gp === cmax) {\n                h = 2 + (bp - rp) / c;\n            }\n            else {\n                h = 4 + (rp - gp) / c;\n            }\n            h = h / 6 + (h < 0 ? 1 : 0);\n        }\n        return [h * 360, s * 100, l * 100];\n    }\n    function hslToRgb(h, s, l) {\n        const hp = ((h % 360) + 360) % 360;\n        const sp = constrainRange(s / 100, 0, 1);\n        const lp = constrainRange(l / 100, 0, 1);\n        const c = (1 - Math.abs(2 * lp - 1)) * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = lp - c / 2;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function rgbToHsv(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const d = cmax - cmin;\n        let h;\n        if (d === 0) {\n            h = 0;\n        }\n        else if (cmax === rp) {\n            h = 60 * (((((gp - bp) / d) % 6) + 6) % 6);\n        }\n        else if (cmax === gp) {\n            h = 60 * ((bp - rp) / d + 2);\n        }\n        else {\n            h = 60 * ((rp - gp) / d + 4);\n        }\n        const s = cmax === 0 ? 0 : d / cmax;\n        const v = cmax;\n        return [h, s * 100, v * 100];\n    }\n    function hsvToRgb(h, s, v) {\n        const hp = loopRange(h, 360);\n        const sp = constrainRange(s / 100, 0, 1);\n        const vp = constrainRange(v / 100, 0, 1);\n        const c = vp * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = vp - c;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function hslToHsv(h, s, l) {\n        const sd = l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100);\n        return [\n            h,\n            sd !== 0 ? (s * (100 - Math.abs(2 * l - 100))) / sd : 0,\n            l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100),\n        ];\n    }\n    function hsvToHsl(h, s, v) {\n        const sd = 100 - Math.abs((v * (200 - s)) / 100 - 100);\n        return [h, sd !== 0 ? (s * v) / sd : 0, (v * (200 - s)) / (2 * 100)];\n    }\n    function removeAlphaComponent(comps) {\n        return [comps[0], comps[1], comps[2]];\n    }\n    function appendAlphaComponent(comps, alpha) {\n        return [comps[0], comps[1], comps[2], alpha];\n    }\n    const MODE_CONVERTER_MAP = {\n        hsl: {\n            hsl: (h, s, l) => [h, s, l],\n            hsv: hslToHsv,\n            rgb: hslToRgb,\n        },\n        hsv: {\n            hsl: hsvToHsl,\n            hsv: (h, s, v) => [h, s, v],\n            rgb: hsvToRgb,\n        },\n        rgb: {\n            hsl: rgbToHsl,\n            hsv: rgbToHsv,\n            rgb: (r, g, b) => [r, g, b],\n        },\n    };\n    function convertColorMode(components, fromMode, toMode) {\n        return MODE_CONVERTER_MAP[fromMode][toMode](...components);\n    }\n\n    const CONSTRAINT_MAP = {\n        hsl: (comps) => {\n            var _a;\n            return [\n                loopRange(comps[0], 360),\n                constrainRange(comps[1], 0, 100),\n                constrainRange(comps[2], 0, 100),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n        hsv: (comps) => {\n            var _a;\n            return [\n                loopRange(comps[0], 360),\n                constrainRange(comps[1], 0, 100),\n                constrainRange(comps[2], 0, 100),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n        rgb: (comps) => {\n            var _a;\n            return [\n                constrainRange(comps[0], 0, 255),\n                constrainRange(comps[1], 0, 255),\n                constrainRange(comps[2], 0, 255),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n    };\n    function isRgbColorComponent(obj, key) {\n        if (typeof obj !== 'object' || isEmpty(obj)) {\n            return false;\n        }\n        return key in obj && typeof obj[key] === 'number';\n    }\n    class Color {\n        constructor(comps, mode) {\n            this.mode_ = mode;\n            this.comps_ = CONSTRAINT_MAP[mode](comps);\n        }\n        static black() {\n            return new Color([0, 0, 0], 'rgb');\n        }\n        static fromObject(obj) {\n            const comps = 'a' in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];\n            return new Color(comps, 'rgb');\n        }\n        static toRgbaObject(color) {\n            return color.toRgbaObject();\n        }\n        static isRgbColorObject(obj) {\n            return (isRgbColorComponent(obj, 'r') &&\n                isRgbColorComponent(obj, 'g') &&\n                isRgbColorComponent(obj, 'b'));\n        }\n        static isRgbaColorObject(obj) {\n            return this.isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\n        }\n        static isColorObject(obj) {\n            return this.isRgbColorObject(obj);\n        }\n        static equals(v1, v2) {\n            if (v1.mode_ !== v2.mode_) {\n                return false;\n            }\n            const comps1 = v1.comps_;\n            const comps2 = v2.comps_;\n            for (let i = 0; i < comps1.length; i++) {\n                if (comps1[i] !== comps2[i]) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        get mode() {\n            return this.mode_;\n        }\n        getComponents(opt_mode) {\n            return appendAlphaComponent(convertColorMode(removeAlphaComponent(this.comps_), this.mode_, opt_mode || this.mode_), this.comps_[3]);\n        }\n        toRgbaObject() {\n            const rgbComps = this.getComponents('rgb');\n            return {\n                r: rgbComps[0],\n                g: rgbComps[1],\n                b: rgbComps[2],\n                a: rgbComps[3],\n            };\n        }\n    }\n\n    const className$b = ClassName('colp');\n    class ColorPickerView {\n        constructor(doc, config) {\n            this.alphaViews_ = null;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$b());\n            const hsvElem = doc.createElement('div');\n            hsvElem.classList.add(className$b('hsv'));\n            const svElem = doc.createElement('div');\n            svElem.classList.add(className$b('sv'));\n            this.svPaletteView_ = config.svPaletteView;\n            svElem.appendChild(this.svPaletteView_.element);\n            hsvElem.appendChild(svElem);\n            const hElem = doc.createElement('div');\n            hElem.classList.add(className$b('h'));\n            this.hPaletteView_ = config.hPaletteView;\n            hElem.appendChild(this.hPaletteView_.element);\n            hsvElem.appendChild(hElem);\n            this.element.appendChild(hsvElem);\n            const rgbElem = doc.createElement('div');\n            rgbElem.classList.add(className$b('rgb'));\n            this.textView_ = config.textView;\n            rgbElem.appendChild(this.textView_.element);\n            this.element.appendChild(rgbElem);\n            if (config.alphaViews) {\n                this.alphaViews_ = {\n                    palette: config.alphaViews.palette,\n                    text: config.alphaViews.text,\n                };\n                const aElem = doc.createElement('div');\n                aElem.classList.add(className$b('a'));\n                const apElem = doc.createElement('div');\n                apElem.classList.add(className$b('ap'));\n                apElem.appendChild(this.alphaViews_.palette.element);\n                aElem.appendChild(apElem);\n                const atElem = doc.createElement('div');\n                atElem.classList.add(className$b('at'));\n                atElem.appendChild(this.alphaViews_.text.element);\n                aElem.appendChild(atElem);\n                this.element.appendChild(aElem);\n            }\n        }\n        get allFocusableElements() {\n            const elems = [\n                this.svPaletteView_.element,\n                this.hPaletteView_.element,\n                this.textView_.modeSelectElement,\n                ...this.textView_.textViews.map((v) => v.inputElement),\n            ];\n            if (this.alphaViews_) {\n                elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n            }\n            return elems;\n        }\n    }\n\n    function parseColorInputParams(params) {\n        const p = ParamsParsers;\n        return parseParams(params, {\n            alpha: p.optional.boolean,\n            expanded: p.optional.boolean,\n            picker: p.optional.custom(parsePickerLayout),\n        });\n    }\n    function getBaseStepForColor(forAlpha) {\n        return forAlpha ? 0.1 : 1;\n    }\n\n    function parseCssNumberOrPercentage(text, maxValue) {\n        const m = text.match(/^(.+)%$/);\n        if (!m) {\n            return Math.min(parseFloat(text), maxValue);\n        }\n        return Math.min(parseFloat(m[1]) * 0.01 * maxValue, maxValue);\n    }\n    const ANGLE_TO_DEG_MAP = {\n        deg: (angle) => angle,\n        grad: (angle) => (angle * 360) / 400,\n        rad: (angle) => (angle * 360) / (2 * Math.PI),\n        turn: (angle) => angle * 360,\n    };\n    function parseCssNumberOrAngle(text) {\n        const m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n        if (!m) {\n            return parseFloat(text);\n        }\n        const angle = parseFloat(m[1]);\n        const unit = m[2];\n        return ANGLE_TO_DEG_MAP[unit](angle);\n    }\n    const NOTATION_TO_PARSER_MAP = {\n        'func.rgb': (text) => {\n            const m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrPercentage(m[1], 255),\n                parseCssNumberOrPercentage(m[2], 255),\n                parseCssNumberOrPercentage(m[3], 255),\n            ];\n            if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n                return null;\n            }\n            return new Color(comps, 'rgb');\n        },\n        'func.rgba': (text) => {\n            const m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrPercentage(m[1], 255),\n                parseCssNumberOrPercentage(m[2], 255),\n                parseCssNumberOrPercentage(m[3], 255),\n                parseCssNumberOrPercentage(m[4], 1),\n            ];\n            if (isNaN(comps[0]) ||\n                isNaN(comps[1]) ||\n                isNaN(comps[2]) ||\n                isNaN(comps[3])) {\n                return null;\n            }\n            return new Color(comps, 'rgb');\n        },\n        'func.hsl': (text) => {\n            const m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrAngle(m[1]),\n                parseCssNumberOrPercentage(m[2], 100),\n                parseCssNumberOrPercentage(m[3], 100),\n            ];\n            if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n                return null;\n            }\n            return new Color(comps, 'hsl');\n        },\n        'func.hsla': (text) => {\n            const m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrAngle(m[1]),\n                parseCssNumberOrPercentage(m[2], 100),\n                parseCssNumberOrPercentage(m[3], 100),\n                parseCssNumberOrPercentage(m[4], 1),\n            ];\n            if (isNaN(comps[0]) ||\n                isNaN(comps[1]) ||\n                isNaN(comps[2]) ||\n                isNaN(comps[3])) {\n                return null;\n            }\n            return new Color(comps, 'hsl');\n        },\n        'hex.rgb': (text) => {\n            const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n            if (mRgb) {\n                return new Color([\n                    parseInt(mRgb[1] + mRgb[1], 16),\n                    parseInt(mRgb[2] + mRgb[2], 16),\n                    parseInt(mRgb[3] + mRgb[3], 16),\n                ], 'rgb');\n            }\n            const mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n            if (mRrggbb) {\n                return new Color([\n                    parseInt(mRrggbb[1], 16),\n                    parseInt(mRrggbb[2], 16),\n                    parseInt(mRrggbb[3], 16),\n                ], 'rgb');\n            }\n            return null;\n        },\n        'hex.rgba': (text) => {\n            const mRgb = text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n            if (mRgb) {\n                return new Color([\n                    parseInt(mRgb[1] + mRgb[1], 16),\n                    parseInt(mRgb[2] + mRgb[2], 16),\n                    parseInt(mRgb[3] + mRgb[3], 16),\n                    mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1),\n                ], 'rgb');\n            }\n            const mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n            if (mRrggbb) {\n                return new Color([\n                    parseInt(mRrggbb[1], 16),\n                    parseInt(mRrggbb[2], 16),\n                    parseInt(mRrggbb[3], 16),\n                    mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1),\n                ], 'rgb');\n            }\n            return null;\n        },\n    };\n    function getColorNotation(text) {\n        const notations = Object.keys(NOTATION_TO_PARSER_MAP);\n        return notations.reduce((result, notation) => {\n            if (result) {\n                return result;\n            }\n            const subparser = NOTATION_TO_PARSER_MAP[notation];\n            return subparser(text) ? notation : null;\n        }, null);\n    }\n    const CompositeColorParser = (text) => {\n        const notation = getColorNotation(text);\n        return notation ? NOTATION_TO_PARSER_MAP[notation](text) : null;\n    };\n    function hasAlphaComponent(notation) {\n        return (notation === 'func.hsla' ||\n            notation === 'func.rgba' ||\n            notation === 'hex.rgba');\n    }\n    function colorFromString(value) {\n        if (typeof value === 'string') {\n            const cv = CompositeColorParser(value);\n            if (cv) {\n                return cv;\n            }\n        }\n        return Color.black();\n    }\n    function zerofill(comp) {\n        const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n        return hex.length === 1 ? `0${hex}` : hex;\n    }\n    function colorToHexRgbString(value, prefix = '#') {\n        const hexes = removeAlphaComponent(value.getComponents('rgb'))\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToHexRgbaString(value, prefix = '#') {\n        const rgbaComps = value.getComponents('rgb');\n        const hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255]\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToFunctionalRgbString(value) {\n        const formatter = createNumberFormatter(0);\n        const comps = removeAlphaComponent(value.getComponents('rgb')).map((comp) => formatter(comp));\n        return `rgb(${comps.join(', ')})`;\n    }\n    function colorToFunctionalRgbaString(value) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(0);\n        const comps = value.getComponents('rgb').map((comp, index) => {\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return formatter(comp);\n        });\n        return `rgba(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n        ];\n        const comps = removeAlphaComponent(value.getComponents('hsl')).map((comp, index) => formatters[index](comp));\n        return `hsl(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslaString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n            createNumberFormatter(2),\n        ];\n        const comps = value\n            .getComponents('hsl')\n            .map((comp, index) => formatters[index](comp));\n        return `hsla(${comps.join(', ')})`;\n    }\n    const NOTATION_TO_STRINGIFIER_MAP = {\n        'func.hsl': colorToFunctionalHslString,\n        'func.hsla': colorToFunctionalHslaString,\n        'func.rgb': colorToFunctionalRgbString,\n        'func.rgba': colorToFunctionalRgbaString,\n        'hex.rgb': colorToHexRgbString,\n        'hex.rgba': colorToHexRgbaString,\n    };\n    function getColorStringifier(notation) {\n        return NOTATION_TO_STRINGIFIER_MAP[notation];\n    }\n\n    const className$a = ClassName('apl');\n    class APaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$a());\n            config.viewProps.bindTabIndex(this.element);\n            const barElem = doc.createElement('div');\n            barElem.classList.add(className$a('b'));\n            this.element.appendChild(barElem);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$a('c'));\n            barElem.appendChild(colorElem);\n            this.colorElem_ = colorElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$a('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            const previewElem = doc.createElement('div');\n            previewElem.classList.add(className$a('p'));\n            this.markerElem_.appendChild(previewElem);\n            this.previewElem_ = previewElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const rgbaComps = c.getComponents('rgb');\n            const leftColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], 'rgb');\n            const rightColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], 'rgb');\n            const gradientComps = [\n                'to right',\n                colorToFunctionalRgbaString(leftColor),\n                colorToFunctionalRgbaString(rightColor),\n            ];\n            this.colorElem_.style.background = `linear-gradient(${gradientComps.join(',')})`;\n            this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n            const left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class APaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new APaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const alpha = d.point.x / d.bounds.width;\n            const c = this.value.rawValue;\n            const [h, s, v] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, alpha], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, a + step], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$9 = ClassName('coltxt');\n    function createModeSelectElement(doc) {\n        const selectElem = doc.createElement('select');\n        const items = [\n            { text: 'RGB', value: 'rgb' },\n            { text: 'HSL', value: 'hsl' },\n            { text: 'HSV', value: 'hsv' },\n        ];\n        selectElem.appendChild(items.reduce((frag, item) => {\n            const optElem = doc.createElement('option');\n            optElem.textContent = item.text;\n            optElem.value = item.value;\n            frag.appendChild(optElem);\n            return frag;\n        }, doc.createDocumentFragment()));\n        return selectElem;\n    }\n    class ColorTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$9());\n            const modeElem = doc.createElement('div');\n            modeElem.classList.add(className$9('m'));\n            this.modeElem_ = createModeSelectElement(doc);\n            this.modeElem_.classList.add(className$9('ms'));\n            modeElem.appendChild(this.modeSelectElement);\n            const modeMarkerElem = doc.createElement('div');\n            modeMarkerElem.classList.add(className$9('mm'));\n            modeMarkerElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            modeElem.appendChild(modeMarkerElem);\n            this.element.appendChild(modeElem);\n            const textsElem = doc.createElement('div');\n            textsElem.classList.add(className$9('w'));\n            this.element.appendChild(textsElem);\n            this.textsElem_ = textsElem;\n            this.textViews_ = config.textViews;\n            this.applyTextViews_();\n            bindValue(config.colorMode, (mode) => {\n                this.modeElem_.value = mode;\n            });\n        }\n        get modeSelectElement() {\n            return this.modeElem_;\n        }\n        get textViews() {\n            return this.textViews_;\n        }\n        set textViews(textViews) {\n            this.textViews_ = textViews;\n            this.applyTextViews_();\n        }\n        applyTextViews_() {\n            removeChildElements(this.textsElem_);\n            const doc = this.element.ownerDocument;\n            this.textViews_.forEach((v) => {\n                const compElem = doc.createElement('div');\n                compElem.classList.add(className$9('c'));\n                compElem.appendChild(v.element);\n                this.textsElem_.appendChild(compElem);\n            });\n        }\n    }\n\n    const FORMATTER = createNumberFormatter(0);\n    const MODE_TO_CONSTRAINT_MAP = {\n        rgb: () => {\n            return new RangeConstraint({ min: 0, max: 255 });\n        },\n        hsl: (index) => {\n            return index === 0\n                ? new RangeConstraint({ min: 0, max: 360 })\n                : new RangeConstraint({ min: 0, max: 100 });\n        },\n        hsv: (index) => {\n            return index === 0\n                ? new RangeConstraint({ min: 0, max: 360 })\n                : new RangeConstraint({ min: 0, max: 100 });\n        },\n    };\n    function createComponentController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === 3 - 1 ? 'lst' : 'mid',\n            baseStep: getBaseStepForColor(false),\n            parser: config.parser,\n            props: ValueMap.fromObject({\n                draggingScale: 1,\n                formatter: FORMATTER,\n            }),\n            value: createValue(0, {\n                constraint: MODE_TO_CONSTRAINT_MAP[config.colorMode](index),\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class ColorTextController {\n        constructor(doc, config) {\n            this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n            this.parser_ = config.parser;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.colorMode = createValue(this.value.rawValue.mode);\n            this.ccs_ = this.createComponentControllers_(doc);\n            this.view = new ColorTextView(doc, {\n                colorMode: this.colorMode,\n                textViews: [this.ccs_[0].view, this.ccs_[1].view, this.ccs_[2].view],\n            });\n            this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\n        }\n        createComponentControllers_(doc) {\n            const cc = {\n                colorMode: this.colorMode.rawValue,\n                parser: this.parser_,\n                viewProps: this.viewProps,\n            };\n            const ccs = [\n                createComponentController(doc, cc, 0),\n                createComponentController(doc, cc, 1),\n                createComponentController(doc, cc, 2),\n            ];\n            ccs.forEach((cs, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: cs.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents(this.colorMode.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const pickedMode = this.colorMode.rawValue;\n                        const comps = p.rawValue.getComponents(pickedMode);\n                        comps[index] = s.rawValue;\n                        return new Color(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode);\n                    },\n                });\n            });\n            return ccs;\n        }\n        onModeSelectChange_(ev) {\n            const selectElem = ev.currentTarget;\n            this.colorMode.rawValue = selectElem.value;\n            this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument);\n            this.view.textViews = [\n                this.ccs_[0].view,\n                this.ccs_[1].view,\n                this.ccs_[2].view,\n            ];\n        }\n    }\n\n    const className$8 = ClassName('hpl');\n    class HPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$8());\n            config.viewProps.bindTabIndex(this.element);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$8('c'));\n            this.element.appendChild(colorElem);\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$8('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const [h] = c.getComponents('hsv');\n            this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new Color([h, 100, 100], 'hsv'));\n            const left = mapRange(h, 0, 360, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class HPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new HPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const hue = mapRange(d.point.x, 0, d.bounds.width, 0, 360);\n            const c = this.value.rawValue;\n            const [, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([hue, s, v, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h + step, s, v, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$7 = ClassName('svp');\n    const CANVAS_RESOL = 64;\n    class SvPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$7());\n            config.viewProps.bindTabIndex(this.element);\n            const canvasElem = doc.createElement('canvas');\n            canvasElem.height = CANVAS_RESOL;\n            canvasElem.width = CANVAS_RESOL;\n            canvasElem.classList.add(className$7('c'));\n            this.element.appendChild(canvasElem);\n            this.canvasElement = canvasElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$7('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const ctx = getCanvasContext(this.canvasElement);\n            if (!ctx) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const hsvComps = c.getComponents('hsv');\n            const width = this.canvasElement.width;\n            const height = this.canvasElement.height;\n            const imgData = ctx.getImageData(0, 0, width, height);\n            const data = imgData.data;\n            for (let iy = 0; iy < height; iy++) {\n                for (let ix = 0; ix < width; ix++) {\n                    const s = mapRange(ix, 0, width, 0, 100);\n                    const v = mapRange(iy, 0, height, 100, 0);\n                    const rgbComps = hsvToRgb(hsvComps[0], s, v);\n                    const i = (iy * width + ix) * 4;\n                    data[i] = rgbComps[0];\n                    data[i + 1] = rgbComps[1];\n                    data[i + 2] = rgbComps[2];\n                    data[i + 3] = 255;\n                }\n            }\n            ctx.putImageData(imgData, 0, 0);\n            const left = mapRange(hsvComps[1], 0, 100, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n            const top = mapRange(hsvComps[2], 0, 100, 100, 0);\n            this.markerElem_.style.top = `${top}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class SvPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SvPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100);\n            const value = mapRange(d.point.y, 0, d.bounds.height, 100, 0);\n            const [h, , , a] = this.value.rawValue.getComponents('hsv');\n            this.value.setRawValue(new Color([h, saturation, value, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [h, s, v, a] = this.value.rawValue.getComponents('hsv');\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(new Color([h, s + ds, v + dv, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class ColorPickerController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.hPaletteC_ = new HPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.svPaletteC_ = new SvPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.alphaIcs_ = config.supportsAlpha\n                ? {\n                    palette: new APaletteController(doc, {\n                        value: this.value,\n                        viewProps: this.viewProps,\n                    }),\n                    text: new NumberTextController(doc, {\n                        parser: parseNumber,\n                        baseStep: 0.1,\n                        props: ValueMap.fromObject({\n                            draggingScale: 0.01,\n                            formatter: createNumberFormatter(2),\n                        }),\n                        value: createValue(0, {\n                            constraint: new RangeConstraint({ min: 0, max: 1 }),\n                        }),\n                        viewProps: this.viewProps,\n                    }),\n                }\n                : null;\n            if (this.alphaIcs_) {\n                connectValues({\n                    primary: this.value,\n                    secondary: this.alphaIcs_.text.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents()[3];\n                    },\n                    backward: (p, s) => {\n                        const comps = p.rawValue.getComponents();\n                        comps[3] = s.rawValue;\n                        return new Color(comps, p.rawValue.mode);\n                    },\n                });\n            }\n            this.textC_ = new ColorTextController(doc, {\n                parser: parseNumber,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorPickerView(doc, {\n                alphaViews: this.alphaIcs_\n                    ? {\n                        palette: this.alphaIcs_.palette.view,\n                        text: this.alphaIcs_.text.view,\n                    }\n                    : null,\n                hPaletteView: this.hPaletteC_.view,\n                supportsAlpha: config.supportsAlpha,\n                svPaletteView: this.svPaletteC_.view,\n                textView: this.textC_.view,\n            });\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    const className$6 = ClassName('colsw');\n    class ColorSwatchView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$6());\n            config.viewProps.bindClassModifiers(this.element);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$6('sw'));\n            this.element.appendChild(swatchElem);\n            this.swatchElem_ = swatchElem;\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$6('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            this.update_();\n        }\n        update_() {\n            const value = this.value.rawValue;\n            this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ColorSwatchController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ColorSwatchView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    class ColorController {\n        constructor(doc, config) {\n            this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.swatchC_ = new ColorSwatchController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            const buttonElem = this.swatchC_.view.buttonElement;\n            buttonElem.addEventListener('blur', this.onButtonBlur_);\n            buttonElem.addEventListener('click', this.onButtonClick_);\n            this.textC_ = new TextController(doc, {\n                parser: config.parser,\n                props: ValueMap.fromObject({\n                    formatter: config.formatter,\n                }),\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorView(doc, {\n                foldable: this.foldable_,\n                pickerLayout: config.pickerLayout,\n            });\n            this.view.swatchElement.appendChild(this.swatchC_.view.element);\n            this.view.textElement.appendChild(this.textC_.view.element);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const pickerC = new ColorPickerController(doc, {\n                supportsAlpha: config.supportsAlpha,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            pickerC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = pickerC;\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(pickerC.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        get textController() {\n            return this.textC_;\n        }\n        onButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.swatchC_.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.swatchC_.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    function colorFromObject(value) {\n        if (Color.isColorObject(value)) {\n            return Color.fromObject(value);\n        }\n        return Color.black();\n    }\n    function colorToRgbNumber(value) {\n        return removeAlphaComponent(value.getComponents('rgb')).reduce((result, comp) => {\n            return (result << 8) | (Math.floor(comp) & 0xff);\n        }, 0);\n    }\n    function colorToRgbaNumber(value) {\n        return (value.getComponents('rgb').reduce((result, comp, index) => {\n            const hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n            return (result << 8) | hex;\n        }, 0) >>> 0);\n    }\n    function numberToRgbColor(num) {\n        return new Color([(num >> 16) & 0xff, (num >> 8) & 0xff, num & 0xff], 'rgb');\n    }\n    function numberToRgbaColor(num) {\n        return new Color([\n            (num >> 24) & 0xff,\n            (num >> 16) & 0xff,\n            (num >> 8) & 0xff,\n            mapRange(num & 0xff, 0, 255, 0, 1),\n        ], 'rgb');\n    }\n    function colorFromRgbNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbColor(value);\n    }\n    function colorFromRgbaNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbaColor(value);\n    }\n\n    function createColorStringWriter(notation) {\n        const stringify = getColorStringifier(notation);\n        return (target, value) => {\n            writePrimitive(target, stringify(value));\n        };\n    }\n    function createColorNumberWriter(supportsAlpha) {\n        const colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n        return (target, value) => {\n            writePrimitive(target, colorToNumber(value));\n        };\n    }\n    function writeRgbaColorObject(target, value) {\n        const obj = value.toRgbaObject();\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n        target.writeProperty('a', obj.a);\n    }\n    function writeRgbColorObject(target, value) {\n        const obj = value.toRgbaObject();\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n    }\n    function createColorObjectWriter(supportsAlpha) {\n        return supportsAlpha ? writeRgbaColorObject : writeRgbColorObject;\n    }\n\n    function shouldSupportAlpha$1(inputParams) {\n        return 'alpha' in inputParams && inputParams.alpha === true;\n    }\n    function createFormatter$1(supportsAlpha) {\n        return supportsAlpha\n            ? (v) => colorToHexRgbaString(v, '0x')\n            : (v) => colorToHexRgbString(v, '0x');\n    }\n    const NumberColorInputPlugin = {\n        id: 'input-color-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            if (!('view' in params)) {\n                return null;\n            }\n            if (params.view !== 'color') {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (args) => {\n                return shouldSupportAlpha$1(args.params)\n                    ? colorFromRgbaNumber\n                    : colorFromRgbNumber;\n            },\n            equals: Color.equals,\n            writer: (args) => {\n                return createColorNumberWriter(shouldSupportAlpha$1(args.params));\n            },\n        },\n        controller: (args) => {\n            const supportsAlpha = shouldSupportAlpha$1(args.params);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: createFormatter$1(supportsAlpha),\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function shouldSupportAlpha(initialValue) {\n        return Color.isRgbaColorObject(initialValue);\n    }\n    const ObjectColorInputPlugin = {\n        id: 'input-color-object',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Color.isColorObject(value)) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => colorFromObject,\n            equals: Color.equals,\n            writer: (args) => createColorObjectWriter(shouldSupportAlpha(args.initialValue)),\n        },\n        controller: (args) => {\n            const supportsAlpha = Color.isRgbaColorObject(args.initialValue);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            const formatter = supportsAlpha\n                ? colorToHexRgbaString\n                : colorToHexRgbString;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: formatter,\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const StringColorInputPlugin = {\n        id: 'input-color-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            if ('view' in params && params.view === 'text') {\n                return null;\n            }\n            const notation = getColorNotation(value);\n            if (!notation) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => colorFromString,\n            equals: Color.equals,\n            writer: (args) => {\n                const notation = getColorNotation(args.initialValue);\n                if (!notation) {\n                    throw TpError.shouldNeverHappen();\n                }\n                return createColorStringWriter(notation);\n            },\n        },\n        controller: (args) => {\n            const notation = getColorNotation(args.initialValue);\n            if (!notation) {\n                throw TpError.shouldNeverHappen();\n            }\n            const stringifier = getColorStringifier(notation);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: stringifier,\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: hasAlphaComponent(notation),\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class PointNdConstraint {\n        constructor(config) {\n            this.components = config.components;\n            this.asm_ = config.assembly;\n        }\n        constrain(value) {\n            const comps = this.asm_\n                .toComponents(value)\n                .map((comp, index) => { var _a, _b; return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp; });\n            return this.asm_.fromComponents(comps);\n        }\n    }\n\n    const className$5 = ClassName('pndtxt');\n    class PointNdTextView {\n        constructor(doc, config) {\n            this.textViews = config.textViews;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$5());\n            this.textViews.forEach((v) => {\n                const axisElem = doc.createElement('div');\n                axisElem.classList.add(className$5('a'));\n                axisElem.appendChild(v.element);\n                this.element.appendChild(axisElem);\n            });\n        }\n    }\n\n    function createAxisController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n            baseStep: config.axes[index].baseStep,\n            parser: config.parser,\n            props: config.axes[index].textProps,\n            value: createValue(0, {\n                constraint: config.axes[index].constraint,\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class PointNdTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\n            this.acs_.forEach((c, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: c.value,\n                    forward: (p) => {\n                        return config.assembly.toComponents(p.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const comps = config.assembly.toComponents(p.rawValue);\n                        comps[index] = s.rawValue;\n                        return config.assembly.fromComponents(comps);\n                    },\n                });\n            });\n            this.view = new PointNdTextView(doc, {\n                textViews: this.acs_.map((ac) => ac.view),\n            });\n        }\n    }\n\n    function createStepConstraint(params) {\n        if ('step' in params && !isEmpty(params.step)) {\n            return new StepConstraint(params.step);\n        }\n        return null;\n    }\n    function createRangeConstraint(params) {\n        if (('max' in params && !isEmpty(params.max)) ||\n            ('min' in params && !isEmpty(params.min))) {\n            return new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            });\n        }\n        return null;\n    }\n    function createConstraint$4(params) {\n        const constraints = [];\n        const sc = createStepConstraint(params);\n        if (sc) {\n            constraints.push(sc);\n        }\n        const rc = createRangeConstraint(params);\n        if (rc) {\n            constraints.push(rc);\n        }\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function findRange(constraint) {\n        const c = constraint ? findConstraint(constraint, RangeConstraint) : null;\n        if (!c) {\n            return [undefined, undefined];\n        }\n        return [c.minValue, c.maxValue];\n    }\n    function estimateSuitableRange(constraint) {\n        const [min, max] = findRange(constraint);\n        return [min !== null && min !== void 0 ? min : 0, max !== null && max !== void 0 ? max : 100];\n    }\n    const NumberInputPlugin = {\n        id: 'input-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                max: p.optional.number,\n                min: p.optional.number,\n                options: p.optional.custom(parseListOptions),\n                step: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => numberFromUnknown,\n            constraint: (args) => createConstraint$4(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a, _b;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(args.document, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            const formatter = (_b = ('format' in args.params ? args.params.format : undefined)) !== null && _b !== void 0 ? _b : createNumberFormatter(getSuitableDecimalDigits(c, value.rawValue));\n            if (c && findConstraint(c, RangeConstraint)) {\n                const [min, max] = estimateSuitableRange(c);\n                return new SliderTextController(args.document, {\n                    baseStep: getBaseStep(c),\n                    parser: parseNumber,\n                    sliderProps: ValueMap.fromObject({\n                        maxValue: max,\n                        minValue: min,\n                    }),\n                    textProps: ValueMap.fromObject({\n                        draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                        formatter: formatter,\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new NumberTextController(args.document, {\n                baseStep: getBaseStep(c),\n                parser: parseNumber,\n                props: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                    formatter: formatter,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point2d {\n        constructor(x = 0, y = 0) {\n            this.x = x;\n            this.y = y;\n        }\n        getComponents() {\n            return [this.x, this.y];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            if (typeof x !== 'number' || typeof y !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n            };\n        }\n    }\n    const Point2dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point2d(...comps),\n    };\n\n    const className$4 = ClassName('p2d');\n    class Point2dView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$4());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.expanded, valueToClassName(this.element, className$4(undefined, 'expanded')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$4('h'));\n            this.element.appendChild(headElem);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$4('b'));\n            buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\n            config.viewProps.bindDisabled(buttonElem);\n            headElem.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$4('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$4('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    const className$3 = ClassName('p2dp');\n    class Point2dPickerView {\n        constructor(doc, config) {\n            this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.invertsY_ = config.invertsY;\n            this.maxValue_ = config.maxValue;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$3());\n            if (config.layout === 'popup') {\n                this.element.classList.add(className$3(undefined, 'p'));\n            }\n            const padElem = doc.createElement('div');\n            padElem.classList.add(className$3('p'));\n            config.viewProps.bindTabIndex(padElem);\n            this.element.appendChild(padElem);\n            this.padElement = padElem;\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$3('g'));\n            this.padElement.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const xAxisElem = doc.createElementNS(SVG_NS, 'line');\n            xAxisElem.classList.add(className$3('ax'));\n            xAxisElem.setAttributeNS(null, 'x1', '0');\n            xAxisElem.setAttributeNS(null, 'y1', '50%');\n            xAxisElem.setAttributeNS(null, 'x2', '100%');\n            xAxisElem.setAttributeNS(null, 'y2', '50%');\n            this.svgElem_.appendChild(xAxisElem);\n            const yAxisElem = doc.createElementNS(SVG_NS, 'line');\n            yAxisElem.classList.add(className$3('ax'));\n            yAxisElem.setAttributeNS(null, 'x1', '50%');\n            yAxisElem.setAttributeNS(null, 'y1', '0');\n            yAxisElem.setAttributeNS(null, 'x2', '50%');\n            yAxisElem.setAttributeNS(null, 'y2', '100%');\n            this.svgElem_.appendChild(yAxisElem);\n            const lineElem = doc.createElementNS(SVG_NS, 'line');\n            lineElem.classList.add(className$3('l'));\n            lineElem.setAttributeNS(null, 'x1', '50%');\n            lineElem.setAttributeNS(null, 'y1', '50%');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$3('m'));\n            this.padElement.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        get allFocusableElements() {\n            return [this.padElement];\n        }\n        update_() {\n            const [x, y] = this.value.rawValue.getComponents();\n            const max = this.maxValue_;\n            const px = mapRange(x, -max, +max, 0, 100);\n            const py = mapRange(y, -max, +max, 0, 100);\n            const ipy = this.invertsY_ ? 100 - py : py;\n            this.lineElem_.setAttributeNS(null, 'x2', `${px}%`);\n            this.lineElem_.setAttributeNS(null, 'y2', `${ipy}%`);\n            this.markerElem_.style.left = `${px}%`;\n            this.markerElem_.style.top = `${ipy}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n        onFoldableChange_() {\n            this.update_();\n        }\n    }\n\n    function computeOffset(ev, baseSteps, invertsY) {\n        return [\n            getStepForKey(baseSteps[0], getHorizontalStepKeys(ev)),\n            getStepForKey(baseSteps[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1),\n        ];\n    }\n    class Point2dPickerController {\n        constructor(doc, config) {\n            this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n            this.onPadKeyUp_ = this.onPadKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.baseSteps_ = config.baseSteps;\n            this.maxValue_ = config.maxValue;\n            this.invertsY_ = config.invertsY;\n            this.view = new Point2dPickerView(doc, {\n                invertsY: this.invertsY_,\n                layout: config.layout,\n                maxValue: this.maxValue_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.padElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n            this.view.padElement.addEventListener('keyup', this.onPadKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const max = this.maxValue_;\n            const px = mapRange(d.point.x, 0, d.bounds.width, -max, +max);\n            const py = mapRange(this.invertsY_ ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);\n            this.value.setRawValue(new Point2d(px, py), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPadKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPadKeyUp_(ev) {\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class Point2dController {\n        constructor(doc, config) {\n            var _a, _b;\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n            this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const padC = new Point2dPickerController(doc, {\n                baseSteps: [config.axes[0].baseStep, config.axes[1].baseStep],\n                invertsY: config.invertsY,\n                layout: config.pickerLayout,\n                maxValue: config.maxValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            padC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = padC;\n            this.textC_ = new PointNdTextController(doc, {\n                assembly: Point2dAssembly,\n                axes: config.axes,\n                parser: config.parser,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new Point2dView(doc, {\n                expanded: this.foldable_.value('expanded'),\n                pickerLayout: config.pickerLayout,\n                viewProps: this.viewProps,\n            });\n            this.view.textElement.appendChild(this.textC_.view.element);\n            (_a = this.view.buttonElement) === null || _a === void 0 ? void 0 : _a.addEventListener('blur', this.onPadButtonBlur_);\n            (_b = this.view.buttonElement) === null || _b === void 0 ? void 0 : _b.addEventListener('click', this.onPadButtonClick_);\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(this.pickerC_.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        onPadButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onPadButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    function point2dFromUnknown(value) {\n        return Point2d.isObject(value)\n            ? new Point2d(value.x, value.y)\n            : new Point2d();\n    }\n    function writePoint2d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n    }\n\n    function createDimensionConstraint$2(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$3(params) {\n        return new PointNdConstraint({\n            assembly: Point2dAssembly,\n            components: [\n                createDimensionConstraint$2('x' in params ? params.x : undefined),\n                createDimensionConstraint$2('y' in params ? params.y : undefined),\n            ],\n        });\n    }\n    function getSuitableMaxDimensionValue(constraint, rawValue) {\n        const rc = constraint && findConstraint(constraint, RangeConstraint);\n        if (rc) {\n            return Math.max(Math.abs(rc.minValue || 0), Math.abs(rc.maxValue || 0));\n        }\n        const step = getBaseStep(constraint);\n        return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n    }\n    function getSuitableMaxValue(initialValue, constraint) {\n        const xc = constraint instanceof PointNdConstraint\n            ? constraint.components[0]\n            : undefined;\n        const yc = constraint instanceof PointNdConstraint\n            ? constraint.components[1]\n            : undefined;\n        const xr = getSuitableMaxDimensionValue(xc, initialValue.x);\n        const yr = getSuitableMaxDimensionValue(yc, initialValue.y);\n        return Math.max(xr, yr);\n    }\n    function createAxis$2(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    function shouldInvertY(params) {\n        if (!('y' in params)) {\n            return false;\n        }\n        const yParams = params.y;\n        if (!yParams) {\n            return false;\n        }\n        return 'inverted' in yParams ? !!yParams.inverted : false;\n    }\n    const Point2dInputPlugin = {\n        id: 'input-point2d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point2d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                expanded: p.optional.boolean,\n                picker: p.optional.custom(parsePickerLayout),\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.object({\n                    inverted: p.optional.boolean,\n                    max: p.optional.number,\n                    min: p.optional.number,\n                    step: p.optional.number,\n                }),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point2dFromUnknown,\n            constraint: (args) => createConstraint$3(args.params),\n            equals: Point2d.equals,\n            writer: (_args) => writePoint2d,\n        },\n        controller: (args) => {\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new Point2dController(doc, {\n                axes: [\n                    createAxis$2(value.rawValue.x, c.components[0]),\n                    createAxis$2(value.rawValue.y, c.components[1]),\n                ],\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                invertsY: shouldInvertY(args.params),\n                maxValue: getSuitableMaxValue(value.rawValue, c),\n                parser: parseNumber,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point3d {\n        constructor(x = 0, y = 0, z = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n            };\n        }\n    }\n    const Point3dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point3d(...comps),\n    };\n\n    function point3dFromUnknown(value) {\n        return Point3d.isObject(value)\n            ? new Point3d(value.x, value.y, value.z)\n            : new Point3d();\n    }\n    function writePoint3d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n    }\n\n    function createDimensionConstraint$1(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$2(params) {\n        return new PointNdConstraint({\n            assembly: Point3dAssembly,\n            components: [\n                createDimensionConstraint$1('x' in params ? params.x : undefined),\n                createDimensionConstraint$1('y' in params ? params.y : undefined),\n                createDimensionConstraint$1('z' in params ? params.z : undefined),\n            ],\n        });\n    }\n    function createAxis$1(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point3dInputPlugin = {\n        id: 'input-point3d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point3d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point3dFromUnknown,\n            constraint: (args) => createConstraint$2(args.params),\n            equals: Point3d.equals,\n            writer: (_args) => writePoint3d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point3dAssembly,\n                axes: [\n                    createAxis$1(value.rawValue.x, c.components[0]),\n                    createAxis$1(value.rawValue.y, c.components[1]),\n                    createAxis$1(value.rawValue.z, c.components[2]),\n                ],\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point4d {\n        constructor(x = 0, y = 0, z = 0, w = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n            this.w = w;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z, this.w];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            const w = obj.w;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number' ||\n                typeof w !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n                w: this.w,\n            };\n        }\n    }\n    const Point4dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point4d(...comps),\n    };\n\n    function point4dFromUnknown(value) {\n        return Point4d.isObject(value)\n            ? new Point4d(value.x, value.y, value.z, value.w)\n            : new Point4d();\n    }\n    function writePoint4d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n        target.writeProperty('w', value.w);\n    }\n\n    function createDimensionConstraint(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$1(params) {\n        return new PointNdConstraint({\n            assembly: Point4dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined),\n                createDimensionConstraint('y' in params ? params.y : undefined),\n                createDimensionConstraint('z' in params ? params.z : undefined),\n                createDimensionConstraint('w' in params ? params.w : undefined),\n            ],\n        });\n    }\n    function createAxis(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point4dInputPlugin = {\n        id: 'input-point4d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point4d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n                w: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point4dFromUnknown,\n            constraint: (args) => createConstraint$1(args.params),\n            equals: Point4d.equals,\n            writer: (_args) => writePoint4d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point4dAssembly,\n                axes: value.rawValue\n                    .getComponents()\n                    .map((comp, index) => createAxis(comp, c.components[index])),\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function createConstraint(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const StringInputPlugin = {\n        id: 'input-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n            constraint: (args) => createConstraint(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a;\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(doc, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new TextController(doc, {\n                parser: (v) => v,\n                props: ValueMap.fromObject({\n                    formatter: formatString,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const Constants = {\n        monitor: {\n            defaultInterval: 200,\n            defaultLineCount: 3,\n        },\n    };\n\n    const className$2 = ClassName('mll');\n    class MultiLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$2());\n            config.viewProps.bindClassModifiers(this.element);\n            const textareaElem = doc.createElement('textarea');\n            textareaElem.classList.add(className$2('i'));\n            textareaElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            textareaElem.readOnly = true;\n            config.viewProps.bindDisabled(textareaElem);\n            this.element.appendChild(textareaElem);\n            this.textareaElem_ = textareaElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const elem = this.textareaElem_;\n            const shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n            const lines = [];\n            this.value.rawValue.forEach((value) => {\n                if (value !== undefined) {\n                    lines.push(this.formatter_(value));\n                }\n            });\n            elem.textContent = lines.join('\\n');\n            if (shouldScroll) {\n                elem.scrollTop = elem.scrollHeight;\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class MultiLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new MultiLogView(doc, {\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$1 = ClassName('sgl');\n    class SingleLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$1());\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$1('i'));\n            inputElem.readOnly = true;\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const values = this.value.rawValue;\n            const lastValue = values[values.length - 1];\n            this.inputElement.value =\n                lastValue !== undefined ? this.formatter_(lastValue) : '';\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class SingleLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SingleLogView(doc, {\n                formatter: config.formatter,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const BooleanMonitorPlugin = {\n        id: 'monitor-bool',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            if (args.value.rawValue.length === 1) {\n                return new SingleLogController(args.document, {\n                    formatter: BooleanFormatter,\n                    value: args.value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new MultiLogController(args.document, {\n                formatter: BooleanFormatter,\n                lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class GraphCursor {\n        constructor() {\n            this.emitter = new Emitter();\n            this.index_ = -1;\n        }\n        get index() {\n            return this.index_;\n        }\n        set index(index) {\n            const changed = this.index_ !== index;\n            if (changed) {\n                this.index_ = index;\n                this.emitter.emit('change', {\n                    index: index,\n                    sender: this,\n                });\n            }\n        }\n    }\n\n    const className = ClassName('grl');\n    class GraphLogView {\n        constructor(doc, config) {\n            this.onCursorChange_ = this.onCursorChange_.bind(this);\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n            this.formatter_ = config.formatter;\n            this.minValue_ = config.minValue;\n            this.maxValue_ = config.maxValue;\n            this.cursor_ = config.cursor;\n            this.cursor_.emitter.on('change', this.onCursorChange_);\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className('g'));\n            svgElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(className('t'), ClassName('tt')());\n            this.element.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        get graphElement() {\n            return this.svgElem_;\n        }\n        update_() {\n            const bounds = this.svgElem_.getBoundingClientRect();\n            const maxIndex = this.value.rawValue.length - 1;\n            const min = this.minValue_;\n            const max = this.maxValue_;\n            const points = [];\n            this.value.rawValue.forEach((v, index) => {\n                if (v === undefined) {\n                    return;\n                }\n                const x = mapRange(index, 0, maxIndex, 0, bounds.width);\n                const y = mapRange(v, min, max, bounds.height, 0);\n                points.push([x, y].join(','));\n            });\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            const tooltipElem = this.tooltipElem_;\n            const value = this.value.rawValue[this.cursor_.index];\n            if (value === undefined) {\n                tooltipElem.classList.remove(className('t', 'a'));\n                return;\n            }\n            const tx = mapRange(this.cursor_.index, 0, maxIndex, 0, bounds.width);\n            const ty = mapRange(value, min, max, bounds.height, 0);\n            tooltipElem.style.left = `${tx}px`;\n            tooltipElem.style.top = `${ty}px`;\n            tooltipElem.textContent = `${this.formatter_(value)}`;\n            if (!tooltipElem.classList.contains(className('t', 'a'))) {\n                tooltipElem.classList.add(className('t', 'a'), className('t', 'in'));\n                forceReflow(tooltipElem);\n                tooltipElem.classList.remove(className('t', 'in'));\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n        onCursorChange_() {\n            this.update_();\n        }\n    }\n\n    class GraphLogController {\n        constructor(doc, config) {\n            this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n            this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n            this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n            this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n            this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.cursor_ = new GraphCursor();\n            this.view = new GraphLogView(doc, {\n                cursor: this.cursor_,\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                maxValue: config.maxValue,\n                minValue: config.minValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            if (!supportsTouch(doc)) {\n                this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n                this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n            }\n            else {\n                const ph = new PointerHandler(this.view.element);\n                ph.emitter.on('down', this.onGraphPointerDown_);\n                ph.emitter.on('move', this.onGraphPointerMove_);\n                ph.emitter.on('up', this.onGraphPointerUp_);\n            }\n        }\n        onGraphMouseLeave_() {\n            this.cursor_.index = -1;\n        }\n        onGraphMouseMove_(ev) {\n            const bounds = this.view.element.getBoundingClientRect();\n            this.cursor_.index = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerDown_(ev) {\n            this.onGraphPointerMove_(ev);\n        }\n        onGraphPointerMove_(ev) {\n            if (!ev.data.point) {\n                this.cursor_.index = -1;\n                return;\n            }\n            this.cursor_.index = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerUp_() {\n            this.cursor_.index = -1;\n        }\n    }\n\n    function createFormatter(params) {\n        return 'format' in params && !isEmpty(params.format)\n            ? params.format\n            : createNumberFormatter(2);\n    }\n    function createTextMonitor(args) {\n        var _a;\n        if (args.value.rawValue.length === 1) {\n            return new SingleLogController(args.document, {\n                formatter: createFormatter(args.params),\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new MultiLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function createGraphMonitor(args) {\n        var _a, _b, _c;\n        return new GraphLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            maxValue: (_b = ('max' in args.params ? args.params.max : null)) !== null && _b !== void 0 ? _b : 100,\n            minValue: (_c = ('min' in args.params ? args.params.min : null)) !== null && _c !== void 0 ? _c : 0,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function shouldShowGraph(params) {\n        return 'view' in params && params.view === 'graph';\n    }\n    const NumberMonitorPlugin = {\n        id: 'monitor-number',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                lineCount: p.optional.number,\n                max: p.optional.number,\n                min: p.optional.number,\n                view: p.optional.string,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            defaultBufferSize: (params) => (shouldShowGraph(params) ? 64 : 1),\n            reader: (_args) => numberFromUnknown,\n        },\n        controller: (args) => {\n            if (shouldShowGraph(args.params)) {\n                return createGraphMonitor(args);\n            }\n            return createTextMonitor(args);\n        },\n    };\n\n    const StringMonitorPlugin = {\n        id: 'monitor-string',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n                multiline: p.optional.boolean,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            const value = args.value;\n            const multiline = value.rawValue.length > 1 ||\n                ('multiline' in args.params && args.params.multiline);\n            if (multiline) {\n                return new MultiLogController(args.document, {\n                    formatter: formatString,\n                    lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new SingleLogController(args.document, {\n                formatter: formatString,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class InputBinding {\n        constructor(config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.reader = config.reader;\n            this.writer = config.writer;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.target = config.target;\n            this.read();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue !== undefined) {\n                this.value.rawValue = this.reader(targetValue);\n            }\n        }\n        write_(rawValue) {\n            this.writer(this.target, rawValue);\n        }\n        onValueChange_(ev) {\n            this.write_(ev.rawValue);\n            this.emitter.emit('change', {\n                options: ev.options,\n                rawValue: ev.rawValue,\n                sender: this,\n            });\n        }\n    }\n\n    function createInputBindingController(plugin, args) {\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const p = ParamsParsers;\n        const valueArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(valueArgs);\n        const constraint = plugin.binding.constraint\n            ? plugin.binding.constraint(valueArgs)\n            : undefined;\n        const value = createValue(reader(result.initialValue), {\n            constraint: constraint,\n            equals: plugin.binding.equals,\n        });\n        const binding = new InputBinding({\n            reader: reader,\n            target: args.target,\n            value: value,\n            writer: plugin.binding.writer(valueArgs),\n        });\n        const disabled = p.optional.boolean(args.params.disabled).value;\n        const hidden = p.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            constraint: constraint,\n            document: args.document,\n            initialValue: result.initialValue,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        const label = p.optional.string(args.params.label).value;\n        return new InputBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: label || args.target.key,\n            }),\n            valueController: controller,\n        });\n    }\n\n    class MonitorBinding {\n        constructor(config) {\n            this.onTick_ = this.onTick_.bind(this);\n            this.reader_ = config.reader;\n            this.target = config.target;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.ticker = config.ticker;\n            this.ticker.emitter.on('tick', this.onTick_);\n            this.read();\n        }\n        dispose() {\n            this.ticker.dispose();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue === undefined) {\n                return;\n            }\n            const buffer = this.value.rawValue;\n            const newValue = this.reader_(targetValue);\n            this.value.rawValue = createPushedBuffer(buffer, newValue);\n            this.emitter.emit('update', {\n                rawValue: newValue,\n                sender: this,\n            });\n        }\n        onTick_(_) {\n            this.read();\n        }\n    }\n\n    function createTicker(document, interval) {\n        return interval === 0\n            ? new ManualTicker()\n            : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n    }\n    function createMonitorBindingController(plugin, args) {\n        var _a, _b, _c;\n        const P = ParamsParsers;\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const bindingArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(bindingArgs);\n        const bufferSize = (_b = (_a = P.optional.number(args.params.bufferSize).value) !== null && _a !== void 0 ? _a : (plugin.binding.defaultBufferSize &&\n            plugin.binding.defaultBufferSize(result.params))) !== null && _b !== void 0 ? _b : 1;\n        const interval = P.optional.number(args.params.interval).value;\n        const binding = new MonitorBinding({\n            reader: reader,\n            target: args.target,\n            ticker: createTicker(args.document, interval),\n            value: initializeBuffer(bufferSize),\n        });\n        const disabled = P.optional.boolean(args.params.disabled).value;\n        const hidden = P.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            document: args.document,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        const label = (_c = P.optional.string(args.params.label).value) !== null && _c !== void 0 ? _c : args.target.key;\n        return new MonitorBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: label,\n            }),\n            valueController: controller,\n        });\n    }\n\n    class PluginPool {\n        constructor() {\n            this.pluginsMap_ = {\n                blades: [],\n                inputs: [],\n                monitors: [],\n            };\n        }\n        getAll() {\n            return [\n                ...this.pluginsMap_.blades,\n                ...this.pluginsMap_.inputs,\n                ...this.pluginsMap_.monitors,\n            ];\n        }\n        register(r) {\n            if (r.type === 'blade') {\n                this.pluginsMap_.blades.unshift(r);\n            }\n            else if (r.type === 'input') {\n                this.pluginsMap_.inputs.unshift(r);\n            }\n            else if (r.type === 'monitor') {\n                this.pluginsMap_.monitors.unshift(r);\n            }\n        }\n        createInput(document, target, params) {\n            const initialValue = target.read();\n            if (isEmpty(initialValue)) {\n                throw new TpError({\n                    context: {\n                        key: target.key,\n                    },\n                    type: 'nomatchingcontroller',\n                });\n            }\n            const bc = this.pluginsMap_.inputs.reduce((result, plugin) => result ||\n                createInputBindingController(plugin, {\n                    document: document,\n                    target: target,\n                    params: params,\n                }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createMonitor(document, target, params) {\n            const bc = this.pluginsMap_.monitors.reduce((result, plugin) => result ||\n                createMonitorBindingController(plugin, {\n                    document: document,\n                    params: params,\n                    target: target,\n                }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createBlade(document, params) {\n            const bc = this.pluginsMap_.blades.reduce((result, plugin) => result ||\n                createBladeController(plugin, {\n                    document: document,\n                    params: params,\n                }), null);\n            if (!bc) {\n                throw new TpError({\n                    type: 'nomatchingview',\n                    context: {\n                        params: params,\n                    },\n                });\n            }\n            return bc;\n        }\n        createBladeApi(bc) {\n            if (bc instanceof InputBindingController) {\n                return new InputBindingApi(bc);\n            }\n            if (bc instanceof MonitorBindingController) {\n                return new MonitorBindingApi(bc);\n            }\n            if (bc instanceof RackController) {\n                return new RackApi(bc, this);\n            }\n            const api = this.pluginsMap_.blades.reduce((result, plugin) => result ||\n                plugin.api({\n                    controller: bc,\n                    pool: this,\n                }), null);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n    }\n\n    function createDefaultPluginPool() {\n        const pool = new PluginPool();\n        [\n            Point2dInputPlugin,\n            Point3dInputPlugin,\n            Point4dInputPlugin,\n            StringInputPlugin,\n            NumberInputPlugin,\n            StringColorInputPlugin,\n            ObjectColorInputPlugin,\n            NumberColorInputPlugin,\n            BooleanInputPlugin,\n            BooleanMonitorPlugin,\n            StringMonitorPlugin,\n            NumberMonitorPlugin,\n            ButtonBladePlugin,\n            FolderBladePlugin,\n            SeparatorBladePlugin,\n            TabBladePlugin,\n        ].forEach((p) => {\n            pool.register(p);\n        });\n        return pool;\n    }\n\n    class ListApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get options() {\n            return this.controller_.valueController.props.get('options');\n        }\n        set options(options) {\n            this.controller_.valueController.props.set('options', options);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class SliderApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get maxValue() {\n            return this.controller_.valueController.sliderController.props.get('maxValue');\n        }\n        set maxValue(maxValue) {\n            this.controller_.valueController.sliderController.props.set('maxValue', maxValue);\n        }\n        get minValue() {\n            return this.controller_.valueController.sliderController.props.get('minValue');\n        }\n        set minValue(minValue) {\n            this.controller_.valueController.sliderController.props.set('minValue', minValue);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class TextApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get formatter() {\n            return this.controller_.valueController.props.get('formatter');\n        }\n        set formatter(formatter) {\n            this.controller_.valueController.props.set('formatter', formatter);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    const ListBladePlugin = (function () {\n        return {\n            id: 'list',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    options: p.required.custom(parseListOptions),\n                    value: p.required.raw,\n                    view: p.required.constant('list'),\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                const ic = new ListController(args.document, {\n                    props: ValueMap.fromObject({\n                        options: normalizeListOptions(args.params.options),\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof ListController)) {\n                    return null;\n                }\n                return new ListApi(args.controller);\n            },\n        };\n    })();\n\n    /**\n     * @hidden\n     */\n    function exportPresetJson(targets) {\n        return targets.reduce((result, target) => {\n            return Object.assign(result, {\n                [target.presetKey]: target.read(),\n            });\n        }, {});\n    }\n    /**\n     * @hidden\n     */\n    function importPresetJson(targets, preset) {\n        targets.forEach((target) => {\n            const value = preset[target.presetKey];\n            if (value !== undefined) {\n                target.write(value);\n            }\n        });\n    }\n\n    class RootApi extends FolderApi {\n        /**\n         * @hidden\n         */\n        constructor(controller, pool) {\n            super(controller, pool);\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        /**\n         * Imports a preset of all inputs.\n         * @param preset The preset object to import.\n         */\n        importPreset(preset) {\n            const targets = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding.target;\n            });\n            importPresetJson(targets, preset);\n            this.refresh();\n        }\n        /**\n         * Exports a preset of all inputs.\n         * @return An exported preset object.\n         */\n        exportPreset() {\n            const targets = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding.target;\n            });\n            return exportPresetJson(targets);\n        }\n        /**\n         * Refreshes all bindings of the pane.\n         */\n        refresh() {\n            // Force-read all input bindings\n            this.controller_.rackController.rack\n                .find(InputBindingController)\n                .forEach((ibc) => {\n                ibc.binding.read();\n            });\n            // Force-read all monitor bindings\n            this.controller_.rackController.rack\n                .find(MonitorBindingController)\n                .forEach((mbc) => {\n                mbc.binding.read();\n            });\n        }\n    }\n\n    class RootController extends FolderController {\n        constructor(doc, config) {\n            super(doc, {\n                expanded: config.expanded,\n                blade: config.blade,\n                props: config.props,\n                root: true,\n                viewProps: config.viewProps,\n            });\n        }\n    }\n\n    const SliderBladePlugin = {\n        id: 'slider',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                max: p.required.number,\n                min: p.required.number,\n                view: p.required.constant('slider'),\n                format: p.optional.function,\n                label: p.optional.string,\n                value: p.optional.number,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a, _b;\n            const v = (_a = args.params.value) !== null && _a !== void 0 ? _a : 0;\n            const vc = new SliderTextController(args.document, {\n                baseStep: 1,\n                parser: parseNumber,\n                sliderProps: ValueMap.fromObject({\n                    maxValue: args.params.max,\n                    minValue: args.params.min,\n                }),\n                textProps: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(undefined, v),\n                    formatter: (_b = args.params.format) !== null && _b !== void 0 ? _b : numberToString,\n                }),\n                value: createValue(v),\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: vc,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof SliderTextController)) {\n                return null;\n            }\n            return new SliderApi(args.controller);\n        },\n    };\n\n    const TextBladePlugin = (function () {\n        return {\n            id: 'text',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    parse: p.required.function,\n                    value: p.required.raw,\n                    view: p.required.constant('text'),\n                    format: p.optional.function,\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                var _a;\n                const ic = new TextController(args.document, {\n                    parser: args.params.parse,\n                    props: ValueMap.fromObject({\n                        formatter: (_a = args.params.format) !== null && _a !== void 0 ? _a : ((v) => String(v)),\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof TextController)) {\n                    return null;\n                }\n                return new TextApi(args.controller);\n            },\n        };\n    })();\n\n    function createDefaultWrapperElement(doc) {\n        const elem = doc.createElement('div');\n        elem.classList.add(ClassName('dfw')());\n        if (doc.body) {\n            doc.body.appendChild(elem);\n        }\n        return elem;\n    }\n    function embedStyle(doc, id, css) {\n        if (doc.querySelector(`style[data-tp-style=${id}]`)) {\n            return;\n        }\n        const styleElem = doc.createElement('style');\n        styleElem.dataset.tpStyle = id;\n        styleElem.textContent = css;\n        doc.head.appendChild(styleElem);\n    }\n    /**\n     * The root pane of Tweakpane.\n     */\n    class Pane extends RootApi {\n        constructor(opt_config) {\n            var _a;\n            const config = opt_config || {};\n            const doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\n            const pool = createDefaultPluginPool();\n            const rootController = new RootController(doc, {\n                expanded: config.expanded,\n                blade: createBlade(),\n                props: ValueMap.fromObject({\n                    title: config.title,\n                }),\n                viewProps: ViewProps.create(),\n            });\n            super(rootController, pool);\n            this.pool_ = pool;\n            this.containerElem_ = config.container || createDefaultWrapperElement(doc);\n            this.containerElem_.appendChild(this.element);\n            this.doc_ = doc;\n            this.usesDefaultWrapper_ = !config.container;\n            this.setUpDefaultPlugins_();\n        }\n        get document() {\n            if (!this.doc_) {\n                throw TpError.alreadyDisposed();\n            }\n            return this.doc_;\n        }\n        dispose() {\n            const containerElem = this.containerElem_;\n            if (!containerElem) {\n                throw TpError.alreadyDisposed();\n            }\n            if (this.usesDefaultWrapper_) {\n                const parentElem = containerElem.parentElement;\n                if (parentElem) {\n                    parentElem.removeChild(containerElem);\n                }\n            }\n            this.containerElem_ = null;\n            this.doc_ = null;\n            super.dispose();\n        }\n        registerPlugin(bundle) {\n            const plugins = 'plugin' in bundle\n                ? [bundle.plugin]\n                : 'plugins' in bundle\n                    ? bundle.plugins\n                    : [];\n            plugins.forEach((p) => {\n                this.pool_.register(p);\n                this.embedPluginStyle_(p);\n            });\n        }\n        embedPluginStyle_(plugin) {\n            if (plugin.css) {\n                embedStyle(this.document, `plugin-${plugin.id}`, plugin.css);\n            }\n        }\n        setUpDefaultPlugins_() {\n            // NOTE: This string literal will be replaced with the default CSS by Rollup at the compilation time\n            embedStyle(this.document, 'default', '.tp-lstv_s,.tp-btnv_b,.tp-p2dv_b,.tp-colswv_sw,.tp-p2dpv_p,.tp-txtv_i,.tp-grlv_g,.tp-sglv_i,.tp-mllv_i,.tp-fldv_b,.tp-rotv_b,.tp-ckbv_i,.tp-coltxtv_ms,.tp-tbiv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-lstv_s,.tp-btnv_b,.tp-p2dv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-lstv_s:hover,.tp-btnv_b:hover,.tp-p2dv_b:hover{background-color:var(--btn-bg-h)}.tp-lstv_s:focus,.tp-btnv_b:focus,.tp-p2dv_b:focus{background-color:var(--btn-bg-f)}.tp-lstv_s:active,.tp-btnv_b:active,.tp-p2dv_b:active{background-color:var(--btn-bg-a)}.tp-lstv_s:disabled,.tp-btnv_b:disabled,.tp-p2dv_b:disabled{opacity:0.5}.tp-colswv_sw,.tp-p2dpv_p,.tp-txtv_i{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-colswv_sw:hover,.tp-p2dpv_p:hover,.tp-txtv_i:hover{background-color:var(--in-bg-h)}.tp-colswv_sw:focus,.tp-p2dpv_p:focus,.tp-txtv_i:focus{background-color:var(--in-bg-f)}.tp-colswv_sw:active,.tp-p2dpv_p:active,.tp-txtv_i:active{background-color:var(--in-bg-a)}.tp-colswv_sw:disabled,.tp-p2dpv_p:disabled,.tp-txtv_i:disabled{opacity:0.5}.tp-grlv_g,.tp-sglv_i,.tp-mllv_i{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);width:100%}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono,Source Code Pro,Menlo,Courier,monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #2f3137);--bs-sh: var(--tp-base-shadow-color, rgba(0,0,0,0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #2f3137);--cnt-bg: var(--tp-container-background-color, rgba(187,188,196,0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187,188,196,0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187,188,196,0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187,188,196,0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(187,188,196,0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187,188,196,0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187,188,196,0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187,188,196,0.15));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187,188,196,0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0,0,0,0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187,188,196,0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(0,0,0,0.2))}.tp-fldv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-rotv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1 * var(--cnt-v-p))}.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-fldv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-rotv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-fldv_c>.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv{margin-left:4px}.tp-fldv_c>.tp-fldv>.tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-fldv_c .tp-fldv>.tp-fldv_c,.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-fldv_c>.tp-tabv>.tp-tabv_i,.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-fldv_c .tp-tabv>.tp-tabv_c,.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-fldv_b,.tp-rotv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(2px * 2 + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-fldv_b:hover,.tp-rotv_b:hover{background-color:var(--cnt-bg-h)}.tp-fldv_b:focus,.tp-rotv_b:focus{background-color:var(--cnt-bg-f)}.tp-fldv_b:active,.tp-rotv_b:active{background-color:var(--cnt-bg-a)}.tp-fldv_b:disabled,.tp-rotv_b:disabled{opacity:0.5}.tp-fldv_m,.tp-rotv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\\'\\';display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px) / 2 - 2px);margin:auto;opacity:0.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m,.tp-rotv.tp-rotv-expanded .tp-rotv_m{transform:none}.tp-fldv_c,.tp-rotv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c,.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c{display:none}.tp-fldv.tp-fldv-expanded>.tp-fldv_c,.tp-rotv.tp-rotv-expanded .tp-rotv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-coltxtv_m,.tp-lstv{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-coltxtv_mm,.tp-lstv_m{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-coltxtv_mm svg,.tp-lstv_m svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-coltxtv_mm svg path,.tp-lstv_m svg path{fill:currentColor}.tp-coltxtv_w,.tp-pndtxtv{display:flex}.tp-coltxtv_c,.tp-pndtxtv_a{width:100%}.tp-coltxtv_c+.tp-coltxtv_c,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-pndtxtv_a{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:0.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:\\'\\';height:2px;left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us) * 4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0,0,0,0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,0.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,0.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,0.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br)}.tp-colswv.tp-v-disabled{opacity:0.5}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,0.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:\\'\\';display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left 0.05s, top 0.05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:0.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:0.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:0.5}.tp-mllv_i{display:block;height:calc(var(--bld-us) * 3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:0.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:0.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:\\'\\';display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\\'\\';display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:\\'\\';display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:0.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:\\'\\';height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:\\'\\';height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:0.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:0.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:0.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\\'\\';height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:0.1;position:absolute;top:0;transition:border-radius 0.1s, height 0.1s, transform 0.1s, width 0.1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:\\'\\';font-size:0.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(2px * 2 + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1 * var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1 * var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}');\n            this.pool_.getAll().forEach((plugin) => {\n                this.embedPluginStyle_(plugin);\n            });\n            this.registerPlugin({\n                plugins: [\n                    SliderBladePlugin,\n                    ListBladePlugin,\n                    TabBladePlugin,\n                    TextBladePlugin,\n                ],\n            });\n        }\n    }\n\n    const VERSION = new Semver('3.0.7');\n\n    exports.BladeApi = BladeApi;\n    exports.ButtonApi = ButtonApi;\n    exports.FolderApi = FolderApi;\n    exports.InputBindingApi = InputBindingApi;\n    exports.ListApi = ListApi;\n    exports.MonitorBindingApi = MonitorBindingApi;\n    exports.Pane = Pane;\n    exports.SeparatorApi = SeparatorApi;\n    exports.SliderApi = SliderApi;\n    exports.TabApi = TabApi;\n    exports.TabPageApi = TabPageApi;\n    exports.TextApi = TextApi;\n    exports.TpChangeEvent = TpChangeEvent;\n    exports.VERSION = VERSION;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","module.exports = __WEBPACK_EXTERNAL_MODULE_excalibur__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import * as ex from \"excalibur\";\r\nimport { BladeApi, FolderApi, ListApi, Pane, SliderApi, TabApi, TabPageApi } from \"tweakpane\";\r\nimport { PickerSystem } from './picker-system'\r\n\r\nexport class DevTool {\r\n    public pane: Pane\r\n    public tabs: TabApi;\r\n    public pickerSystem: PickerSystem;\r\n    pointerPos: { x: number, y: number } = { x: 0, y: 0 };\r\n    highlightedEntities: number[] = [-1];\r\n    selectedEntity: ex.Actor | null = null;\r\n    selectedEntityId: number = -1;\r\n    currentResolution: ex.ScreenDimension;\r\n    currentViewport: ex.ScreenDimension;\r\n    resolutionText: BladeApi<any>;\r\n    viewportText: BladeApi<any>;\r\n    screenFolder: FolderApi;\r\n\r\n    // tabs\r\n    selectedEntityTab: TabPageApi;\r\n    selectedEntityFolder: FolderApi;\r\n    screenTab: TabPageApi;\r\n    cameraTab: TabPageApi;\r\n    timerTab: TabPageApi;\r\n    clockTab: TabPageApi;\r\n    physicsTab: TabPageApi;\r\n    debugTab: TabPageApi;\r\n    pointerPosInput: any;\r\n\r\n    constructor(public engine: ex.Engine) {\r\n        this.pane = new Pane({\r\n            title: 'Excalibur Dev Tools',\r\n            expanded: true\r\n        });\r\n        const style = document.createElement('style');\r\n        style.innerText = \".excalibur-tweakpane-custom { width: 405px; }\";\r\n        document.head.appendChild(style);\r\n        this.pane.element.parentElement.classList.add(\"excalibur-tweakpane-custom\");\r\n\r\n        this._buildMain();\r\n\r\n        this.tabs = this.pane.addTab({\r\n            pages: [\r\n                { title: 'Entity' },\r\n                { title: 'Screen' },\r\n                { title: 'Camera' },\r\n                { title: 'Clock' },\r\n                { title: 'Timers' },\r\n                { title: 'Physics' },\r\n                { title: 'Settings' }\r\n            ]\r\n        });\r\n\r\n        this.selectedEntityTab = this.tabs.pages[0];\r\n        this.screenTab = this.tabs.pages[1];\r\n        this.cameraTab = this.tabs.pages[2];\r\n        this.clockTab = this.tabs.pages[3];\r\n        this.timerTab = this.tabs.pages[4];\r\n        this.physicsTab = this.tabs.pages[5];\r\n        this.debugTab = this.tabs.pages[6];\r\n\r\n        this._installPickerSystemIfNeeded(engine.currentScene);\r\n\r\n        engine.debug.transform.showPosition = true;\r\n        engine.debug.entity.showName = true;\r\n        this.selectedEntityFolder = this.selectedEntityTab.addFolder({\r\n            title: 'Selected',\r\n        });\r\n\r\n\r\n        this._buildScreenTab();\r\n        this._buildCameraTab();\r\n        this._buildClockTab();\r\n        this._buildTimersTab();\r\n        this._buildPhysicsTab();\r\n        this._buildDebugSettingsTab();\r\n\r\n        setInterval(() => {\r\n            this.update(this)\r\n        }, 30)\r\n\r\n        this.addListeners();\r\n    }\r\n\r\n    /**\r\n     * Add any event listeners relevant to the devtool\r\n     */\r\n    public addListeners() {\r\n        const game = this.engine;\r\n        game.canvas.addEventListener('click', () => {\r\n            if (this.highlightedEntities[0] !== -1) {\r\n                this.selectEntityById(this.highlightedEntities[0]);\r\n            }\r\n        });\r\n    }\r\n\r\n    public selectEntityById(id: number) {\r\n        const game = this.engine;\r\n        this.selectedEntityId = id;\r\n        this.selectedEntity = game.currentScene.world.entityManager.getById(id) as ex.Actor;\r\n        this._buildEntityUI(this.selectedEntity);\r\n\r\n        const transformComponent = this.selectedEntity.get(ex.TransformComponent)\r\n        this._buildTransformUI(transformComponent);\r\n\r\n        const motionComponent = this.selectedEntity.get(ex.MotionComponent);\r\n        this._buildMotionUI(motionComponent);\r\n\r\n        if (this.selectedEntity instanceof ex.ParticleEmitter) {\r\n            // build particle emitter UI\r\n            this._buildParticleEmitterUI(this.selectedEntity);\r\n        } else {\r\n            const graphicsComponent = this.selectedEntity.get(ex.GraphicsComponent);\r\n            this._buildGraphicsUI(graphicsComponent);\r\n            \r\n            const colliderComponent = this.selectedEntity.get(ex.ColliderComponent);\r\n            const bodyComponent = this.selectedEntity.get(ex.BodyComponent);\r\n            this._buildColliderUI(colliderComponent, bodyComponent);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * `update()` is called periodically over time\r\n     * @param devtool \r\n     */\r\n    public update(devtool: DevTool) {\r\n        const game = devtool.engine;\r\n        // Current pointer pos\r\n        const pointerPos = game.input.pointers.primary.lastWorldPos;\r\n        this.pointerPos.x = pointerPos.x;\r\n        this.pointerPos.y = pointerPos.y;\r\n        this.pointerPosInput.refresh();\r\n\r\n        // Updated Selection\r\n        const entityIds = [...this.pickerSystem.lastFrameEntityToPointers.keys(), ...this.pickerSystem.currentFrameEntityToPointers.keys()];\r\n        if (entityIds.length === 0) {\r\n            entityIds.push(-1); // nothing selected\r\n            entityIds.push(this.selectedEntityId);\r\n        }\r\n        this.highlightedEntities = entityIds;\r\n        game.debug.filter.useFilter = true;\r\n        game.debug.filter.ids = entityIds;\r\n\r\n        // Update Screen if needed\r\n        if (this.currentResolution.width !== game.screen.resolution.width ||\r\n            this.currentResolution.height !== game.screen.resolution.height ||\r\n            this.currentViewport.width !== game.screen.viewport.width ||\r\n            this.currentViewport.height !== game.screen.viewport.height) {\r\n\r\n            this.resolutionText.dispose();\r\n            this.viewportText.dispose();\r\n            this.resolutionText = this.screenFolder.addBlade({\r\n                view: 'text',\r\n                label: 'resolution',\r\n                value: `(${game.screen.resolution.width}x${game.screen.resolution.height})`,\r\n                parse: v => String(v),\r\n                index: 0\r\n            });\r\n            this.viewportText = this.screenFolder.addBlade({\r\n                view: 'text',\r\n                label: 'viewport',\r\n                value: `(${game.screen.viewport.width.toFixed(0)}x${game.screen.viewport.height.toFixed(0)})`,\r\n                parse: v => String(v),\r\n                index: 1\r\n            });\r\n        }\r\n        // Update timers\r\n        this._buildTimersTab();\r\n    }\r\n\r\n\r\n\r\n    private _installPickerSystemIfNeeded(scene: ex.Scene) {\r\n        this.pickerSystem = scene.world.systemManager.get(PickerSystem);\r\n        if (!this.pickerSystem) {\r\n            this.pickerSystem = new PickerSystem()\r\n            scene.world.systemManager.addSystem(this.pickerSystem)\r\n        }\r\n    }\r\n\r\n    private _buildMain() {\r\n        this.pane.addInput({ debug: false }, 'debug').on('change', () => {\r\n            this.engine.toggleDebug();\r\n        });\r\n\r\n        this.pane.addMonitor(this.engine.clock.fpsSampler, 'fps', {\r\n            view: 'graph',\r\n            label: 'fps (0 - 120)',\r\n            min: 0,\r\n            max: 120\r\n        });\r\n\r\n        let currentSceneName = '';\r\n        let scenes: { text: string, value: string }[] = []\r\n        for (let key in this.engine.scenes) {\r\n            if (this.engine.currentScene === this.engine.scenes[key]) {\r\n                currentSceneName = key;\r\n            }\r\n            scenes.push({ text: key, value: key })\r\n        }\r\n\r\n        let numberEntitiesBlade: BladeApi<any>;\r\n        const scenePicker = this.pane.addBlade({\r\n            view: 'list',\r\n            label: 'current scene',\r\n            options: scenes,\r\n            value: currentSceneName\r\n        }) as ListApi<string>;\r\n\r\n        scenePicker.on('change', ev => {\r\n            this.engine.goToScene(ev.value);\r\n            this._installPickerSystemIfNeeded(this.engine.currentScene);\r\n            numberEntitiesBlade.dispose();\r\n            numberEntitiesBlade = this.pane.addBlade({\r\n                view: 'text',\r\n                label: 'number of entities',\r\n                value: this.engine.currentScene.world.entityManager.entities.length,\r\n                parse: v => String(v),\r\n                index: 3\r\n            });\r\n        });\r\n\r\n        numberEntitiesBlade = this.pane.addBlade({\r\n            view: 'text',\r\n            label: 'number of entities',\r\n            value: this.engine.currentScene.world.entityManager.entities.length,\r\n            parse: v => String(v),\r\n            index: 3\r\n        });\r\n        this.pointerPos = { x: 10, y: 10 };\r\n        this.pointerPosInput = this.pane.addInput(this, \"pointerPos\", {\r\n            label: 'pointer pos (world)'\r\n        });\r\n\r\n        this.pane.addInput(this, \"selectedEntityId\", {\r\n            \"label\": \"Select By Id\"\r\n        }).on(\"change\", ev => this.selectEntityById(ev.value));\r\n\r\n    }\r\n\r\n    private _buildEntityUI(entity: ex.Entity) {\r\n        if (this.selectedEntityFolder) {\r\n            this.selectedEntityFolder.dispose();\r\n            this.selectedEntityFolder = this.selectedEntityTab.addFolder({\r\n                title: 'Selected'\r\n            });\r\n        }\r\n        this.selectedEntityFolder.addBlade({ view: 'text', label: 'id', value: entity.id.toString(), parse: v => String(v) });\r\n        this.selectedEntityFolder.addInput(this.selectedEntity, 'name');\r\n\r\n        this.selectedEntityFolder.addBlade({\r\n            view: 'text',\r\n            label: 'tags',\r\n            value: entity.tags.join(',') || 'none',\r\n            parse: v => String(v)\r\n        });\r\n\r\n        if (entity instanceof ex.Actor && entity.color) {\r\n            this.selectedEntityFolder.addInput(this.selectedEntity as ex.Actor, 'color').on(\"change\", ev => {\r\n                entity.color = new ex.Color(ev.value.r, ev.value.g, ev.value.b, ev.value.a);\r\n            });\r\n        }\r\n        this.selectedEntityFolder.addBlade({\r\n            view: 'text',\r\n            label: 'parent',\r\n            value: entity.parent ? `(${entity.parent?.id}) ${entity.parent?.name}` : 'none',\r\n            parse: (v) => String(v)\r\n        });\r\n        this.selectedEntityFolder.addBlade({\r\n            view: 'list',\r\n            label: 'children',\r\n            options: entity.children.map(c => ({ text: `(${c.id}) ${c.name}`, value: c.id })),\r\n            value: entity.children.length ? entity.children[0].id : 'none',\r\n        });\r\n        this.selectedEntityFolder.addButton({\r\n            title: 'Kill Entity'\r\n        }).on(\"click\", ev => {\r\n            this.selectedEntity.kill();\r\n            // clear entity tab\r\n            this.selectedEntityFolder.dispose();\r\n            this.selectedEntityFolder = this.selectedEntityTab.addFolder({\r\n                title: 'Selected'\r\n            });\r\n        });\r\n\r\n    }\r\n\r\n    private _buildColliderUI(colliderComponent: ex.ColliderComponent, bodyComponent: ex.BodyComponent) {\r\n        if (colliderComponent) {\r\n\r\n            const collider = this.selectedEntityFolder.addFolder({\r\n                title: 'Collider & Body'\r\n            });\r\n            collider.addBlade({\r\n                view: 'text',\r\n                label: 'type',\r\n                value: (colliderComponent.get() as any)?.constructor.name ?? 'none',\r\n                parse: (v) => String(v)\r\n            });\r\n            if (bodyComponent) {\r\n\r\n                const collisionTypes = collider.addBlade({\r\n                    view: 'list',\r\n                    label: 'collisionType',\r\n                    options: [ex.CollisionType.Active, ex.CollisionType.Fixed, ex.CollisionType.Passive, ex.CollisionType.PreventCollision].map(\r\n                        c => ({\r\n                            text: c,\r\n                            value: c\r\n                        })),\r\n                    value: bodyComponent.collisionType\r\n                }) as ListApi<ex.CollisionType>;\r\n                collisionTypes.on(\"change\", ev => {\r\n                    bodyComponent.collisionType = ev.value;\r\n                });\r\n\r\n                const collisionGroups = collider.addBlade({\r\n                    view: 'list',\r\n                    label: 'collisionGroup',\r\n                    options: [ex.CollisionGroup.All, ...ex.CollisionGroupManager.groups].map(c => ({\r\n                        text: c.name,\r\n                        value: c\r\n                    })),\r\n                    value: bodyComponent.group\r\n                }) as ListApi<any>;\r\n                collisionGroups.on(\"change\", ev => {\r\n                    bodyComponent.group = ev.value;\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    private _buildParticleEmitterUI(particles: ex.ParticleEmitter) {\r\n        const particlesFolder = this.selectedEntityFolder.addFolder({\r\n            title: 'Particles'\r\n        });\r\n\r\n        particlesFolder.addInput(particles, \"isEmitting\");\r\n        particlesFolder.addInput(particles, \"emitRate\");\r\n        particlesFolder.addInput(particles, \"fadeFlag\");\r\n        particlesFolder.addInput(particles, \"particleLife\", {\r\n            min: 100,\r\n            max: 10000,\r\n            step: 100\r\n        });\r\n        particlesFolder.addInput(particles, \"width\");\r\n        particlesFolder.addInput(particles, \"height\");\r\n        particlesFolder.addInput(particles, \"minVel\");\r\n        particlesFolder.addInput(particles, \"maxVel\");\r\n        particlesFolder.addInput(particles, \"minAngle\", {\r\n            min: 0,\r\n            max: Math.PI * 2,\r\n            step: .1\r\n        });\r\n        particlesFolder.addInput(particles, \"maxAngle\",  {\r\n            min: 0,\r\n            max: Math.PI * 2,\r\n            step: .1\r\n        });\r\n        particlesFolder.addInput(particles, \"minSize\");\r\n        particlesFolder.addInput(particles, \"maxSize\");\r\n        particlesFolder.addInput(particles, \"beginColor\");\r\n        particlesFolder.addInput(particles, \"endColor\");\r\n        particlesFolder.addInput(particles, \"opacity\", {\r\n            min: 0,\r\n            max: 1,\r\n            step: .01\r\n        });\r\n        particlesFolder.addInput(particles, \"randomRotation\");\r\n        particlesFolder.addInput(particles, \"particleRotationalVelocity\");\r\n    }\r\n\r\n    private _buildGraphicsUI(graphicsComponent: ex.GraphicsComponent) {\r\n        if (graphicsComponent) {\r\n\r\n            const graphics = this.selectedEntityFolder.addFolder({\r\n                title: 'Graphics'\r\n            });\r\n\r\n            graphics.addInput(graphicsComponent, \"anchor\");\r\n            graphics.addInput(graphicsComponent, \"opacity\", {\r\n                min: 0,\r\n                max: 1,\r\n                step: 0.05\r\n            });\r\n            graphics.addInput(graphicsComponent, \"visible\");\r\n\r\n            // woof a lot of effort to do this\r\n            const dropdown: { text: string; value: number; }[] = [];\r\n            const allGraphics: ex.Graphic[] = [];\r\n            const currentGfx = graphicsComponent.current.map(c => c.graphic);\r\n            const namedGfx: ex.Graphic[] = [];\r\n            let gfxIndex = 0;\r\n            for (let key in graphicsComponent.graphics) {\r\n                dropdown.push({ text: key, value: gfxIndex++ });\r\n                allGraphics.push(graphicsComponent.graphics[key]);\r\n\r\n                namedGfx.push(graphicsComponent.graphics[key]);\r\n            }\r\n            let anonIndex = 0;\r\n            for (let graphic of currentGfx) {\r\n                if (namedGfx.indexOf(graphic) === -1) {\r\n                    dropdown.push({ text: `anonymous${anonIndex++}`, value: gfxIndex });\r\n                    allGraphics.push(graphic);\r\n                }\r\n            }\r\n\r\n            const graphicsList = graphics.addBlade({\r\n                view: 'list',\r\n                label: 'graphics',\r\n                options: dropdown,\r\n                value: allGraphics.indexOf(graphicsComponent.current[0]?.graphic)\r\n            }) as ListApi<number>;\r\n            graphicsList.on('change', ev => {\r\n                graphicsComponent.use(allGraphics[ev.value]);\r\n            });\r\n        }\r\n    }\r\n\r\n    private _buildMotionUI(motionComponent: ex.MotionComponent) {\r\n        if (motionComponent) {\r\n            const motion = this.selectedEntityFolder.addFolder({\r\n                title: 'Motion'\r\n            });\r\n            motion.addInput(motionComponent, \"vel\");\r\n            motion.addInput(motionComponent, \"acc\");\r\n            motion.addInput(motionComponent, \"angularVelocity\", {\r\n                step: .1\r\n            });\r\n            motion.addInput(motionComponent, \"scaleFactor\");\r\n            motion.addInput(motionComponent, \"inertia\");\r\n        }\r\n    }\r\n\r\n    private _buildTransformUI(transformComponent: ex.TransformComponent) {\r\n        if (transformComponent) {\r\n            const transform = this.selectedEntityFolder.addFolder({\r\n                title: 'Transform'\r\n            });\r\n            const coordPlane = transform.addBlade({\r\n                view: 'list',\r\n                label: 'coord plane',\r\n                options: [ex.CoordPlane.World, ex.CoordPlane.Screen].map(c => ({ text: c, value: c })),\r\n                value: transformComponent.coordPlane\r\n            }) as ListApi<ex.CoordPlane>;\r\n            coordPlane.on(\"change\", ev => transformComponent.coordPlane = ev.value);\r\n\r\n            const tx = transform.addInput(transformComponent, \"pos\");\r\n            const rot = transform.addInput(transformComponent, \"rotation\", {\r\n                min: 0,\r\n                max: 2 * Math.PI,\r\n            });\r\n            const scale = transform.addInput(transformComponent, 'scale');\r\n            transform.addSeparator();\r\n\r\n            const globalTx = transform.addInput(transformComponent, \"globalPos\", { label: \"global pos\" });\r\n            const globalRot = transform.addInput(transformComponent, \"globalRotation\", {\r\n                label: \"global rot\",\r\n                min: 0,\r\n                max: 2 * Math.PI,\r\n            });\r\n            const globalScale = transform.addInput(transformComponent, 'globalScale', { label: \"global pos\" });\r\n\r\n            globalTx.on(\"change\", () => tx.refresh());\r\n            tx.on(\"change\", () => globalTx.refresh());\r\n\r\n            globalRot.on(\"change\", () => rot.refresh());\r\n            rot.on(\"change\", () => globalRot.refresh());\r\n\r\n            globalScale.on(\"change\", () => scale.refresh());\r\n            scale.on(\"change\", () => globalScale.refresh());\r\n\r\n            transform.addInput(transformComponent, \"z\", {label : \"z-index\"});\r\n        }\r\n    }\r\n\r\n    private _buildScreenTab() {\r\n        this.screenFolder = this.screenTab.addFolder({\r\n            title: 'Screen'\r\n        });\r\n        this.currentResolution = this.engine.screen.resolution;\r\n        this.currentViewport = this.engine.screen.viewport;\r\n        this.resolutionText = this.screenFolder.addBlade({\r\n            view: 'text',\r\n            label: 'resolution',\r\n            value: `(${this.engine.screen.resolution.width}x${this.engine.screen.resolution.height})`,\r\n            parse: v => String(v),\r\n            index: 0\r\n        });\r\n        this.viewportText = this.screenFolder.addBlade({\r\n            view: 'text',\r\n            label: 'viewport',\r\n            value: `(${this.engine.screen.viewport.width.toFixed(0)}x${this.engine.screen.viewport.height.toFixed(0)})`,\r\n            parse: v => String(v),\r\n            index: 1\r\n        });\r\n\r\n        let fullscreen = this.screenFolder.addButton({\r\n            title: 'Fullscreen',\r\n        });\r\n        fullscreen.on('click', () => {\r\n            this.engine.screen.goFullScreen();\r\n        });\r\n\r\n        this.screenFolder.addSeparator();\r\n\r\n        const colorBlindness = this.screenFolder.addBlade({\r\n            view: 'list',\r\n            label: 'Color Blindness Mode',\r\n            options: [ex.ColorBlindnessMode.Deuteranope, ex.ColorBlindnessMode.Protanope, ex.ColorBlindnessMode.Tritanope].map(c => ({ text: c, value: c })),\r\n            value: ex.ColorBlindnessMode.Deuteranope\r\n        }) as ListApi<ex.ColorBlindnessMode>;\r\n\r\n        const shouldSimulate = {\"simulate\": false};\r\n        const simulate = this.screenFolder.addInput(shouldSimulate, \"simulate\");\r\n\r\n        this.screenFolder.addButton({\r\n            title: 'Apply'\r\n        }).on(\"click\", () => {\r\n            if (shouldSimulate.simulate) {\r\n                this.engine.debug.colorBlindMode.simulate(colorBlindness.value);\r\n            } else {\r\n                this.engine.debug.colorBlindMode.correct(colorBlindness.value);\r\n            }\r\n        });\r\n        this.screenFolder.addButton({\r\n            title: 'Clear'\r\n        }).on('click', () => {\r\n            this.engine.debug.colorBlindMode.clear();\r\n        });\r\n    }\r\n\r\n    private _buildCameraTab() {\r\n        const cameraFolder = this.cameraTab.addFolder({\r\n            title: 'Camera',\r\n        });\r\n\r\n        cameraFolder.addInput(this.engine.currentScene.camera, \"zoom\", {\r\n            min: .01,\r\n            max: 10,\r\n            step: .1\r\n        });\r\n        cameraFolder.addInput(this.engine.currentScene.camera, \"pos\");\r\n    }\r\n\r\n    private _buildClockTab() {\r\n        const clock = this.clockTab.addFolder({\r\n            title: 'Clock'\r\n        });\r\n\r\n        let usingTestClock = this.engine.clock instanceof ex.TestClock;\r\n        let stepMs = 16;\r\n        const step = clock.addButton({\r\n            title: 'step',\r\n            disabled: !usingTestClock,\r\n            index: 2\r\n        }).on('click', () => (this.engine.clock as ex.TestClock).step(stepMs));\r\n        const stepSlider = clock.addBlade({\r\n            view: 'slider',\r\n            label: 'step (ms)',\r\n            min: 1,\r\n            max: 100,\r\n            step: 16,\r\n            value: stepMs\r\n        }) as SliderApi;\r\n        stepSlider.on('change', ev => stepMs = ev.value)\r\n\r\n        const useTestClock = clock.addButton({\r\n            title: 'Use Test Clock',\r\n            index: 0,\r\n        });\r\n        useTestClock.on('click', () => {\r\n            this.engine.debug.useTestClock();\r\n            usingTestClock = true;\r\n            step.disabled = false;\r\n        });\r\n\r\n        const useStandardClock = clock.addButton({\r\n            title: 'Use Standard Clock',\r\n            index: 1\r\n        });\r\n        useStandardClock.on('click', () => {\r\n            this.engine.debug.useStandardClock();\r\n            usingTestClock = false;\r\n            step.disabled = true;\r\n        });\r\n\r\n        this.pane.addSeparator();\r\n\r\n        const stopGameButton = clock.addButton({\r\n            title: 'Stop',\r\n            disabled: false\r\n        });\r\n        const startGameButton = clock.addButton({\r\n            title: 'Start',\r\n            disabled: true\r\n        });\r\n        stopGameButton.on('click', () => {\r\n            this.engine.clock.stop();\r\n            startGameButton.disabled = false;\r\n            stopGameButton.disabled = true;\r\n        });\r\n        startGameButton.on('click', () => {\r\n            this.engine.clock.start();\r\n            stopGameButton.disabled = false;\r\n            startGameButton.disabled = true;\r\n        });\r\n\r\n    }\r\n\r\n    private _timersFolder: FolderApi;\r\n    private _buildTimersTab() {\r\n        const timers = this.timerTab;\r\n\r\n        if (this._timersFolder) {\r\n            this._timersFolder.dispose();\r\n        }\r\n        this._timersFolder = this.timerTab.addFolder({\r\n            title: \"Timers\"\r\n        });\r\n\r\n\r\n        for (let timer of this.engine.currentScene.timers) {\r\n            let status = (timer.repeats && timer.maxNumberOfRepeats === -1) ? 'repeats': ((timer as any)._numberOfTicks + 1) + ' of ' + (timer.maxNumberOfRepeats === -1 ? 1 : timer.maxNumberOfRepeats);\r\n            if (!timer.isRunning) {\r\n                status = \"stopped\";\r\n            }\r\n            if (timer.complete) {\r\n                status = \"complete\";\r\n            }\r\n            this._timersFolder.addBlade({\r\n                view: 'text',\r\n                label: `timer(${timer.id})`,\r\n                value:`${status} next(${timer.timeToNextAction.toFixed(0)}ms)`,\r\n                parse: v => String(v)\r\n            });\r\n        }\r\n    }\r\n\r\n    private _buildPhysicsTab() {\r\n        const physics = this.physicsTab;\r\n\r\n        const physicsSettings: typeof ex.Physics = {} as any\r\n\r\n        for (let key in ex.Physics) {\r\n            physicsSettings[key] = ex.Physics[key];\r\n        }\r\n        physics.addInput(physicsSettings, \"enabled\").on('change', ev => ex.Physics.enabled = ev.value);\r\n        physics.addInput(physicsSettings, \"acc\");\r\n        const solverInput = physics.addInput(physicsSettings, \"collisionResolutionStrategy\");\r\n        physics.addButton({\r\n            title: 'Use Arcade'\r\n        }).on('click', () => {\r\n            ex.Physics.useArcadePhysics();\r\n            physicsSettings.collisionResolutionStrategy = ex.Physics.collisionResolutionStrategy;\r\n            solverInput.refresh();\r\n        });\r\n        physics.addButton({\r\n            title: 'Use Realistic'\r\n        }).on('click', () => {\r\n            ex.Physics.useRealisticPhysics();\r\n            physicsSettings.collisionResolutionStrategy = ex.Physics.collisionResolutionStrategy;\r\n            solverInput.refresh();\r\n        });\r\n\r\n        physics.addInput(physicsSettings, 'bodiesCanSleepByDefault').on(\"change\", ev => ex.Physics.bodiesCanSleepByDefault = ev.value);\r\n        physics.addInput(physicsSettings, 'warmStart').on(\"change\", ev => ex.Physics.warmStart = ev.value);\r\n        physics.addInput(physicsSettings, 'sleepEpsilon', { min: 0.01, max: 2, step: .05}).on(\"change\", ev => ex.Physics.sleepEpsilon = ev.value);\r\n        physics.addInput(physicsSettings, 'wakeThreshold', { min: 0.01, max: 2, step: .05}).on(\"change\", ev => ex.Physics.wakeThreshold = ev.value);\r\n        physics.addInput(physicsSettings, \"positionIterations\", {\r\n            min: 1,\r\n            max: 30,\r\n            step: 1\r\n        }).on(\"change\", ev => ex.Physics.positionIterations = ev.value);\r\n        physics.addInput(physicsSettings, \"velocityIterations\", {\r\n            min: 1,\r\n            max: 30,\r\n            step: 1\r\n        }).on('change', ev => ex.Physics.velocityIterations = ev.value);\r\n        // physics.addInput(Physics, \"acc\");\r\n        physics.addInput(physicsSettings, \"checkForFastBodies\").on(\"change\", ev => ex.Physics.checkForFastBodies = ev.value);\r\n    }\r\n\r\n    private _buildDebugSettingsTab() {\r\n        const debug = this.debugTab;\r\n\r\n        var supportedKeys = ['entity', 'transform', 'motion', 'body', 'collider', 'physics', 'graphics', 'camera'];\r\n        for (let key of supportedKeys) {\r\n            let folder = debug.addFolder({ title: key });\r\n            if (this.engine.debug[key]) {\r\n                for (let option in this.engine.debug[key]) {\r\n                    if (option) {\r\n                        if (option.toLocaleLowerCase().includes('color')) {\r\n                            folder.addInput(this.engine.debug[key], option);\r\n                        } else {\r\n                            if (Array.isArray(this.engine.debug[key][option])) {\r\n                                continue;\r\n                            }\r\n                            folder.addInput(this.engine.debug[key], option);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","/**\n * dat-gui JavaScript Controller Library\n * https://github.com/dataarts/dat.gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nexport default function(color, forceCSSHex) {\n  const colorFormat = color.__state.conversionName.toString();\n\n  const r = Math.round(color.r);\n  const g = Math.round(color.g);\n  const b = Math.round(color.b);\n  const a = color.a;\n  const h = Math.round(color.h);\n  const s = color.s.toFixed(1);\n  const v = color.v.toFixed(1);\n\n  if (forceCSSHex || (colorFormat === 'THREE_CHAR_HEX') || (colorFormat === 'SIX_CHAR_HEX')) {\n    let str = color.hex.toString(16);\n    while (str.length < 6) {\n      str = '0' + str;\n    }\n    return '#' + str;\n  } else if (colorFormat === 'CSS_RGB') {\n    return 'rgb(' + r + ',' + g + ',' + b + ')';\n  } else if (colorFormat === 'CSS_RGBA') {\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n  } else if (colorFormat === 'HEX') {\n    return '0x' + color.hex.toString(16);\n  } else if (colorFormat === 'RGB_ARRAY') {\n    return '[' + r + ',' + g + ',' + b + ']';\n  } else if (colorFormat === 'RGBA_ARRAY') {\n    return '[' + r + ',' + g + ',' + b + ',' + a + ']';\n  } else if (colorFormat === 'RGB_OBJ') {\n    return '{r:' + r + ',g:' + g + ',b:' + b + '}';\n  } else if (colorFormat === 'RGBA_OBJ') {\n    return '{r:' + r + ',g:' + g + ',b:' + b + ',a:' + a + '}';\n  } else if (colorFormat === 'HSV_OBJ') {\n    return '{h:' + h + ',s:' + s + ',v:' + v + '}';\n  } else if (colorFormat === 'HSVA_OBJ') {\n    return '{h:' + h + ',s:' + s + ',v:' + v + ',a:' + a + '}';\n  }\n\n  return 'unknown format';\n}\n","/**\n * dat-gui JavaScript Controller Library\n * https://github.com/dataarts/dat.gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nconst ARR_EACH = Array.prototype.forEach;\nconst ARR_SLICE = Array.prototype.slice;\n\n/**\n * Band-aid methods for things that should be a lot easier in JavaScript.\n * Implementation and structure inspired by underscore.js\n * http://documentcloud.github.com/underscore/\n */\n\nconst Common = {\n  BREAK: {},\n\n  extend: function(target) {\n    this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n      const keys = this.isObject(obj) ? Object.keys(obj) : [];\n      keys.forEach(function(key) {\n        if (!this.isUndefined(obj[key])) {\n          target[key] = obj[key];\n        }\n      }.bind(this));\n    }, this);\n\n    return target;\n  },\n\n  defaults: function(target) {\n    this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n      const keys = this.isObject(obj) ? Object.keys(obj) : [];\n      keys.forEach(function(key) {\n        if (this.isUndefined(target[key])) {\n          target[key] = obj[key];\n        }\n      }.bind(this));\n    }, this);\n\n    return target;\n  },\n\n  compose: function() {\n    const toCall = ARR_SLICE.call(arguments);\n    return function() {\n      let args = ARR_SLICE.call(arguments);\n      for (let i = toCall.length - 1; i >= 0; i--) {\n        args = [toCall[i].apply(this, args)];\n      }\n      return args[0];\n    };\n  },\n\n  each: function(obj, itr, scope) {\n    if (!obj) {\n      return;\n    }\n\n    if (ARR_EACH && obj.forEach && obj.forEach === ARR_EACH) {\n      obj.forEach(itr, scope);\n    } else if (obj.length === obj.length + 0) { // Is number but not NaN\n      let key;\n      let l;\n      for (key = 0, l = obj.length; key < l; key++) {\n        if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) {\n          return;\n        }\n      }\n    } else {\n      for (const key in obj) {\n        if (itr.call(scope, obj[key], key) === this.BREAK) {\n          return;\n        }\n      }\n    }\n  },\n\n  defer: function(fnc) {\n    setTimeout(fnc, 0);\n  },\n\n  // if the function is called repeatedly, wait until threshold passes until we execute the function\n  debounce: function(func, threshold, callImmediately) {\n    let timeout;\n\n    return function() {\n      const obj = this;\n      const args = arguments;\n      function delayed() {\n        timeout = null;\n        if (!callImmediately) func.apply(obj, args);\n      }\n\n      const callNow = callImmediately || !timeout;\n\n      clearTimeout(timeout);\n      timeout = setTimeout(delayed, threshold);\n\n      if (callNow) {\n        func.apply(obj, args);\n      }\n    };\n  },\n\n  toArray: function(obj) {\n    if (obj.toArray) return obj.toArray();\n    return ARR_SLICE.call(obj);\n  },\n\n  isUndefined: function(obj) {\n    return obj === undefined;\n  },\n\n  isNull: function(obj) {\n    return obj === null;\n  },\n\n  isNaN: function(obj) {\n    return isNaN(obj);\n  },\n\n  isArray: Array.isArray || function(obj) {\n    return obj.constructor === Array;\n  },\n\n  isObject: function(obj) {\n    return obj === Object(obj);\n  },\n\n  isNumber: function(obj) {\n    return obj === obj + 0;\n  },\n\n  isString: function(obj) {\n    return obj === obj + '';\n  },\n\n  isBoolean: function(obj) {\n    return obj === false || obj === true;\n  },\n\n  isFunction: function(obj) {\n    return obj instanceof Function;\n  }\n\n};\n\nexport default Common;\n","/**\n * dat-gui JavaScript Controller Library\n * https://github.com/dataarts/dat.gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport toString from './toString';\nimport common from '../utils/common';\n\nconst INTERPRETATIONS = [\n  // Strings\n  {\n    litmus: common.isString,\n    conversions: {\n      THREE_CHAR_HEX: {\n        read: function(original) {\n          const test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n          if (test === null) {\n            return false;\n          }\n\n          return {\n            space: 'HEX',\n            hex: parseInt(\n              '0x' +\n              test[1].toString() + test[1].toString() +\n              test[2].toString() + test[2].toString() +\n              test[3].toString() + test[3].toString(), 0\n            )\n          };\n        },\n\n        write: toString\n      },\n\n      SIX_CHAR_HEX: {\n        read: function(original) {\n          const test = original.match(/^#([A-F0-9]{6})$/i);\n          if (test === null) {\n            return false;\n          }\n\n          return {\n            space: 'HEX',\n            hex: parseInt('0x' + test[1].toString(), 0)\n          };\n        },\n\n        write: toString\n      },\n\n      CSS_RGB: {\n        read: function(original) {\n          const test = original.match(/^rgb\\(\\s*(\\S+)\\s*,\\s*(\\S+)\\s*,\\s*(\\S+)\\s*\\)/);\n          if (test === null) {\n            return false;\n          }\n\n          return {\n            space: 'RGB',\n            r: parseFloat(test[1]),\n            g: parseFloat(test[2]),\n            b: parseFloat(test[3])\n          };\n        },\n\n        write: toString\n      },\n\n      CSS_RGBA: {\n        read: function(original) {\n          const test = original.match(/^rgba\\(\\s*(\\S+)\\s*,\\s*(\\S+)\\s*,\\s*(\\S+)\\s*,\\s*(\\S+)\\s*\\)/);\n          if (test === null) {\n            return false;\n          }\n\n          return {\n            space: 'RGB',\n            r: parseFloat(test[1]),\n            g: parseFloat(test[2]),\n            b: parseFloat(test[3]),\n            a: parseFloat(test[4])\n          };\n        },\n\n        write: toString\n      }\n    }\n  },\n\n  // Numbers\n  {\n    litmus: common.isNumber,\n\n    conversions: {\n\n      HEX: {\n        read: function(original) {\n          return {\n            space: 'HEX',\n            hex: original,\n            conversionName: 'HEX'\n          };\n        },\n\n        write: function(color) {\n          return color.hex;\n        }\n      }\n\n    }\n\n  },\n\n  // Arrays\n  {\n    litmus: common.isArray,\n    conversions: {\n      RGB_ARRAY: {\n        read: function(original) {\n          if (original.length !== 3) {\n            return false;\n          }\n\n          return {\n            space: 'RGB',\n            r: original[0],\n            g: original[1],\n            b: original[2]\n          };\n        },\n\n        write: function(color) {\n          return [color.r, color.g, color.b];\n        }\n      },\n\n      RGBA_ARRAY: {\n        read: function(original) {\n          if (original.length !== 4) return false;\n          return {\n            space: 'RGB',\n            r: original[0],\n            g: original[1],\n            b: original[2],\n            a: original[3]\n          };\n        },\n\n        write: function(color) {\n          return [color.r, color.g, color.b, color.a];\n        }\n      }\n    }\n  },\n\n  // Objects\n  {\n    litmus: common.isObject,\n    conversions: {\n\n      RGBA_OBJ: {\n        read: function(original) {\n          if (common.isNumber(original.r) &&\n            common.isNumber(original.g) &&\n            common.isNumber(original.b) &&\n            common.isNumber(original.a)) {\n            return {\n              space: 'RGB',\n              r: original.r,\n              g: original.g,\n              b: original.b,\n              a: original.a\n            };\n          }\n          return false;\n        },\n\n        write: function(color) {\n          return {\n            r: color.r,\n            g: color.g,\n            b: color.b,\n            a: color.a\n          };\n        }\n      },\n\n      RGB_OBJ: {\n        read: function(original) {\n          if (common.isNumber(original.r) &&\n            common.isNumber(original.g) &&\n            common.isNumber(original.b)) {\n            return {\n              space: 'RGB',\n              r: original.r,\n              g: original.g,\n              b: original.b\n            };\n          }\n          return false;\n        },\n\n        write: function(color) {\n          return {\n            r: color.r,\n            g: color.g,\n            b: color.b\n          };\n        }\n      },\n\n      HSVA_OBJ: {\n        read: function(original) {\n          if (common.isNumber(original.h) &&\n            common.isNumber(original.s) &&\n            common.isNumber(original.v) &&\n            common.isNumber(original.a)) {\n            return {\n              space: 'HSV',\n              h: original.h,\n              s: original.s,\n              v: original.v,\n              a: original.a\n            };\n          }\n          return false;\n        },\n\n        write: function(color) {\n          return {\n            h: color.h,\n            s: color.s,\n            v: color.v,\n            a: color.a\n          };\n        }\n      },\n\n      HSV_OBJ: {\n        read: function(original) {\n          if (common.isNumber(original.h) &&\n            common.isNumber(original.s) &&\n            common.isNumber(original.v)) {\n            return {\n              space: 'HSV',\n              h: original.h,\n              s: original.s,\n              v: original.v\n            };\n          }\n          return false;\n        },\n\n        write: function(color) {\n          return {\n            h: color.h,\n            s: color.s,\n            v: color.v\n          };\n        }\n      }\n    }\n  }\n];\n\nlet result;\nlet toReturn;\n\nconst interpret = function() {\n  toReturn = false;\n\n  const original = arguments.length > 1 ? common.toArray(arguments) : arguments[0];\n  common.each(INTERPRETATIONS, function(family) {\n    if (family.litmus(original)) {\n      common.each(family.conversions, function(conversion, conversionName) {\n        result = conversion.read(original);\n\n        if (toReturn === false && result !== false) {\n          toReturn = result;\n          result.conversionName = conversionName;\n          result.conversion = conversion;\n          return common.BREAK;\n        }\n      });\n\n      return common.BREAK;\n    }\n  });\n\n  return toReturn;\n};\n\nexport default interpret;\n","/**\n * dat-gui JavaScript Controller Library\n * https://github.com/dataarts/dat.gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nlet tmpComponent;\n\nconst ColorMath = {\n  hsv_to_rgb: function(h, s, v) {\n    const hi = Math.floor(h / 60) % 6;\n\n    const f = h / 60 - Math.floor(h / 60);\n    const p = v * (1.0 - s);\n    const q = v * (1.0 - (f * s));\n    const t = v * (1.0 - ((1.0 - f) * s));\n\n    const c = [\n      [v, t, p],\n      [q, v, p],\n      [p, v, t],\n      [p, q, v],\n      [t, p, v],\n      [v, p, q]\n    ][hi];\n\n    return {\n      r: c[0] * 255,\n      g: c[1] * 255,\n      b: c[2] * 255\n    };\n  },\n\n  rgb_to_hsv: function(r, g, b) {\n    const min = Math.min(r, g, b);\n    const max = Math.max(r, g, b);\n    const delta = max - min;\n    let h;\n    let s;\n\n    if (max !== 0) {\n      s = delta / max;\n    } else {\n      return {\n        h: NaN,\n        s: 0,\n        v: 0\n      };\n    }\n\n    if (r === max) {\n      h = (g - b) / delta;\n    } else if (g === max) {\n      h = 2 + (b - r) / delta;\n    } else {\n      h = 4 + (r - g) / delta;\n    }\n    h /= 6;\n    if (h < 0) {\n      h += 1;\n    }\n\n    return {\n      h: h * 360,\n      s: s,\n      v: max / 255\n    };\n  },\n\n  rgb_to_hex: function(r, g, b) {\n    let hex = this.hex_with_component(0, 2, r);\n    hex = this.hex_with_component(hex, 1, g);\n    hex = this.hex_with_component(hex, 0, b);\n    return hex;\n  },\n\n  component_from_hex: function(hex, componentIndex) {\n    return (hex >> (componentIndex * 8)) & 0xFF;\n  },\n\n  hex_with_component: function(hex, componentIndex, value) {\n    return value << (tmpComponent = componentIndex * 8) | (hex & ~(0xFF << tmpComponent));\n  }\n};\n\nexport default ColorMath;\n","/**\n * dat-gui JavaScript Controller Library\n * https://github.com/dataarts/dat.gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport interpret from './interpret';\nimport math from './math';\nimport colorToString from './toString';\nimport common from '../utils/common';\n\nclass Color {\n  constructor() {\n    this.__state = interpret.apply(this, arguments);\n\n    if (this.__state === false) {\n      throw new Error('Failed to interpret color arguments');\n    }\n\n    this.__state.a = this.__state.a || 1;\n  }\n\n  toString() {\n    return colorToString(this);\n  }\n\n  toHexString() {\n    return colorToString(this, true);\n  }\n\n  toOriginal() {\n    return this.__state.conversion.write(this);\n  }\n}\n\nfunction defineRGBComponent(target, component, componentHexIndex) {\n  Object.defineProperty(target, component, {\n    get: function() {\n      if (this.__state.space === 'RGB') {\n        return this.__state[component];\n      }\n\n      Color.recalculateRGB(this, component, componentHexIndex);\n\n      return this.__state[component];\n    },\n\n    set: function(v) {\n      if (this.__state.space !== 'RGB') {\n        Color.recalculateRGB(this, component, componentHexIndex);\n        this.__state.space = 'RGB';\n      }\n\n      this.__state[component] = v;\n    }\n  });\n}\n\nfunction defineHSVComponent(target, component) {\n  Object.defineProperty(target, component, {\n    get: function() {\n      if (this.__state.space === 'HSV') {\n        return this.__state[component];\n      }\n\n      Color.recalculateHSV(this);\n\n      return this.__state[component];\n    },\n\n    set: function(v) {\n      if (this.__state.space !== 'HSV') {\n        Color.recalculateHSV(this);\n        this.__state.space = 'HSV';\n      }\n\n      this.__state[component] = v;\n    }\n  });\n}\n\n\nColor.recalculateRGB = function(color, component, componentHexIndex) {\n  if (color.__state.space === 'HEX') {\n    color.__state[component] = math.component_from_hex(color.__state.hex, componentHexIndex);\n  } else if (color.__state.space === 'HSV') {\n    common.extend(color.__state, math.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n  } else {\n    throw new Error('Corrupted color state');\n  }\n};\n\nColor.recalculateHSV = function(color) {\n  const result = math.rgb_to_hsv(color.r, color.g, color.b);\n\n  common.extend(color.__state,\n    {\n      s: result.s,\n      v: result.v\n    });\n\n  if (!common.isNaN(result.h)) {\n    color.__state.h = result.h;\n  } else if (common.isUndefined(color.__state.h)) {\n    color.__state.h = 0;\n  }\n};\n\nColor.COMPONENTS = ['r', 'g', 'b', 'h', 's', 'v', 'hex', 'a'];\n\ndefineRGBComponent(Color.prototype, 'r', 2);\ndefineRGBComponent(Color.prototype, 'g', 1);\ndefineRGBComponent(Color.prototype, 'b', 0);\n\ndefineHSVComponent(Color.prototype, 'h');\ndefineHSVComponent(Color.prototype, 's');\ndefineHSVComponent(Color.prototype, 'v');\n\nObject.defineProperty(Color.prototype, 'a', {\n  get: function() {\n    return this.__state.a;\n  },\n\n  set: function(v) {\n    this.__state.a = v;\n  }\n});\n\nObject.defineProperty(Color.prototype, 'hex', {\n  get: function() {\n    if (this.__state.space !== 'HEX') {\n      this.__state.hex = math.rgb_to_hex(this.r, this.g, this.b);\n      this.__state.space = 'HEX';\n    }\n\n    return this.__state.hex;\n  },\n\n  set: function(v) {\n    this.__state.space = 'HEX';\n    this.__state.hex = v;\n  }\n});\n\nexport default Color;\n","/**\n * dat-gui JavaScript Controller Library\n * https://github.com/dataarts/dat.gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n/**\n * @class An \"abstract\" class that represents a given property of an object.\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n */\nclass Controller {\n  constructor(object, property) {\n    this.initialValue = object[property];\n\n    /**\n     * Those who extend this class will put their DOM elements in here.\n     * @type {DOMElement}\n     */\n    this.domElement = document.createElement('div');\n\n    /**\n     * The object to manipulate\n     * @type {Object}\n     */\n    this.object = object;\n\n    /**\n     * The name of the property to manipulate\n     * @type {String}\n     */\n    this.property = property;\n\n    /**\n     * The function to be called on change.\n     * @type {Function}\n     * @ignore\n     */\n    this.__onChange = undefined;\n\n    /**\n     * The function to be called on finishing change.\n     * @type {Function}\n     * @ignore\n     */\n    this.__onFinishChange = undefined;\n  }\n\n  /**\n   * Specify that a function fire every time someone changes the value with\n   * this Controller.\n   *\n   * @param {Function} fnc This function will be called whenever the value\n   * is modified via this Controller.\n   * @returns {Controller} this\n   */\n  onChange(fnc) {\n    this.__onChange = fnc;\n    return this;\n  }\n\n  /**\n   * Specify that a function fire every time someone \"finishes\" changing\n   * the value wih this Controller. Useful for values that change\n   * incrementally like numbers or strings.\n   *\n   * @param {Function} fnc This function will be called whenever\n   * someone \"finishes\" changing the value via this Controller.\n   * @returns {Controller} this\n   */\n  onFinishChange(fnc) {\n    this.__onFinishChange = fnc;\n    return this;\n  }\n\n  /**\n   * Change the value of <code>object[property]</code>\n   *\n   * @param {Object} newValue The new value of <code>object[property]</code>\n   */\n  setValue(newValue) {\n    this.object[this.property] = newValue;\n    if (this.__onChange) {\n      this.__onChange.call(this, newValue);\n    }\n\n    this.updateDisplay();\n    return this;\n  }\n\n  /**\n   * Gets the value of <code>object[property]</code>\n   *\n   * @returns {Object} The current value of <code>object[property]</code>\n   */\n  getValue() {\n    return this.object[this.property];\n  }\n\n  /**\n   * Refreshes the visual display of a Controller in order to keep sync\n   * with the object's current value.\n   * @returns {Controller} this\n   */\n  updateDisplay() {\n    return this;\n  }\n\n  /**\n   * @returns {boolean} true if the value has deviated from initialValue\n   */\n  isModified() {\n    return this.initialValue !== this.getValue();\n  }\n}\n\nexport default Controller;\n","/**\n * dat-gui JavaScript Controller Library\n * https://github.com/dataarts/dat.gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport common from '../utils/common';\n\nconst EVENT_MAP = {\n  HTMLEvents: ['change'],\n  MouseEvents: ['click', 'mousemove', 'mousedown', 'mouseup', 'mouseover'],\n  KeyboardEvents: ['keydown']\n};\n\nconst EVENT_MAP_INV = {};\ncommon.each(EVENT_MAP, function(v, k) {\n  common.each(v, function(e) {\n    EVENT_MAP_INV[e] = k;\n  });\n});\n\nconst CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\n\nfunction cssValueToPixels(val) {\n  if (val === '0' || common.isUndefined(val)) {\n    return 0;\n  }\n\n  const match = val.match(CSS_VALUE_PIXELS);\n\n  if (!common.isNull(match)) {\n    return parseFloat(match[1]);\n  }\n\n  // TODO ...ems? %?\n\n  return 0;\n}\n\n/**\n * @namespace\n * @member dat.dom\n */\nconst dom = {\n\n  /**\n   *\n   * @param elem\n   * @param selectable\n   */\n  makeSelectable: function(elem, selectable) {\n    if (elem === undefined || elem.style === undefined) return;\n\n    elem.onselectstart = selectable ? function() {\n      return false;\n    } : function() {\n    };\n\n    elem.style.MozUserSelect = selectable ? 'auto' : 'none';\n    elem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\n    elem.unselectable = selectable ? 'on' : 'off';\n  },\n\n  /**\n   *\n   * @param elem\n   * @param horizontal\n   * @param vert\n   */\n  makeFullscreen: function(elem, hor, vert) {\n    let vertical = vert;\n    let horizontal = hor;\n\n    if (common.isUndefined(horizontal)) {\n      horizontal = true;\n    }\n\n    if (common.isUndefined(vertical)) {\n      vertical = true;\n    }\n\n    elem.style.position = 'absolute';\n\n    if (horizontal) {\n      elem.style.left = 0;\n      elem.style.right = 0;\n    }\n    if (vertical) {\n      elem.style.top = 0;\n      elem.style.bottom = 0;\n    }\n  },\n\n  /**\n   *\n   * @param elem\n   * @param eventType\n   * @param params\n   */\n  fakeEvent: function(elem, eventType, pars, aux) {\n    const params = pars || {};\n    const className = EVENT_MAP_INV[eventType];\n    if (!className) {\n      throw new Error('Event type ' + eventType + ' not supported.');\n    }\n    const evt = document.createEvent(className);\n    switch (className) {\n      case 'MouseEvents':\n      {\n        const clientX = params.x || params.clientX || 0;\n        const clientY = params.y || params.clientY || 0;\n        evt.initMouseEvent(eventType, params.bubbles || false,\n          params.cancelable || true, window, params.clickCount || 1,\n          0, // screen X\n          0, // screen Y\n          clientX, // client X\n          clientY, // client Y\n          false, false, false, false, 0, null);\n        break;\n      }\n      case 'KeyboardEvents':\n      {\n        const init = evt.initKeyboardEvent || evt.initKeyEvent; // webkit || moz\n        common.defaults(params, {\n          cancelable: true,\n          ctrlKey: false,\n          altKey: false,\n          shiftKey: false,\n          metaKey: false,\n          keyCode: undefined,\n          charCode: undefined\n        });\n        init(eventType, params.bubbles || false,\n          params.cancelable, window,\n          params.ctrlKey, params.altKey,\n          params.shiftKey, params.metaKey,\n          params.keyCode, params.charCode);\n        break;\n      }\n      default:\n      {\n        evt.initEvent(eventType, params.bubbles || false, params.cancelable || true);\n        break;\n      }\n    }\n    common.defaults(evt, aux);\n    elem.dispatchEvent(evt);\n  },\n\n  /**\n   *\n   * @param elem\n   * @param event\n   * @param func\n   * @param bool\n   */\n  bind: function(elem, event, func, newBool) {\n    const bool = newBool || false;\n    if (elem.addEventListener) {\n      elem.addEventListener(event, func, bool);\n    } else if (elem.attachEvent) {\n      elem.attachEvent('on' + event, func);\n    }\n    return dom;\n  },\n\n  /**\n   *\n   * @param elem\n   * @param event\n   * @param func\n   * @param bool\n   */\n  unbind: function(elem, event, func, newBool) {\n    const bool = newBool || false;\n    if (elem.removeEventListener) {\n      elem.removeEventListener(event, func, bool);\n    } else if (elem.detachEvent) {\n      elem.detachEvent('on' + event, func);\n    }\n    return dom;\n  },\n\n  /**\n   *\n   * @param elem\n   * @param className\n   */\n  addClass: function(elem, className) {\n    if (elem.className === undefined) {\n      elem.className = className;\n    } else if (elem.className !== className) {\n      const classes = elem.className.split(/ +/);\n      if (classes.indexOf(className) === -1) {\n        classes.push(className);\n        elem.className = classes.join(' ').replace(/^\\s+/, '').replace(/\\s+$/, '');\n      }\n    }\n    return dom;\n  },\n\n  /**\n   *\n   * @param elem\n   * @param className\n   */\n  removeClass: function(elem, className) {\n    if (className) {\n      if (elem.className === className) {\n        elem.removeAttribute('class');\n      } else {\n        const classes = elem.className.split(/ +/);\n        const index = classes.indexOf(className);\n        if (index !== -1) {\n          classes.splice(index, 1);\n          elem.className = classes.join(' ');\n        }\n      }\n    } else {\n      elem.className = undefined;\n    }\n    return dom;\n  },\n\n  hasClass: function(elem, className) {\n    return new RegExp('(?:^|\\\\s+)' + className + '(?:\\\\s+|$)').test(elem.className) || false;\n  },\n\n  /**\n   *\n   * @param elem\n   */\n  getWidth: function(elem) {\n    const style = getComputedStyle(elem);\n\n    return cssValueToPixels(style['border-left-width']) +\n      cssValueToPixels(style['border-right-width']) +\n      cssValueToPixels(style['padding-left']) +\n      cssValueToPixels(style['padding-right']) +\n      cssValueToPixels(style.width);\n  },\n\n  /**\n   *\n   * @param elem\n   */\n  getHeight: function(elem) {\n    const style = getComputedStyle(elem);\n\n    return cssValueToPixels(style['border-top-width']) +\n      cssValueToPixels(style['border-bottom-width']) +\n      cssValueToPixels(style['padding-top']) +\n      cssValueToPixels(style['padding-bottom']) +\n      cssValueToPixels(style.height);\n  },\n\n  /**\n   *\n   * @param el\n   */\n  getOffset: function(el) {\n    let elem = el;\n    const offset = { left: 0, top: 0 };\n    if (elem.offsetParent) {\n      do {\n        offset.left += elem.offsetLeft;\n        offset.top += elem.offsetTop;\n        elem = elem.offsetParent;\n      } while (elem);\n    }\n    return offset;\n  },\n\n  // http://stackoverflow.com/posts/2684561/revisions\n  /**\n   *\n   * @param elem\n   */\n  isActive: function(elem) {\n    return elem === document.activeElement && (elem.type || elem.href);\n  }\n\n};\n\nexport default dom;\n","/**\n * dat-gui JavaScript Controller Library\n * https://github.com/dataarts/dat.gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport dom from '../dom/dom';\n\n/**\n * @class Provides a checkbox input to alter the boolean property of an object.\n *\n * @extends dat.controllers.Controller\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n */\nclass BooleanController extends Controller {\n  constructor(object, property) {\n    super(object, property);\n\n    const _this = this;\n    this.__prev = this.getValue();\n\n    this.__checkbox = document.createElement('input');\n    this.__checkbox.setAttribute('type', 'checkbox');\n\n    function onChange() {\n      _this.setValue(!_this.__prev);\n    }\n\n    dom.bind(this.__checkbox, 'change', onChange, false);\n\n    this.domElement.appendChild(this.__checkbox);\n\n    // Match original value\n    this.updateDisplay();\n  }\n\n  setValue(v) {\n    const toReturn = super.setValue(v);\n    if (this.__onFinishChange) {\n      this.__onFinishChange.call(this, this.getValue());\n    }\n    this.__prev = this.getValue();\n    return toReturn;\n  }\n\n  updateDisplay() {\n    if (this.getValue() === true) {\n      this.__checkbox.setAttribute('checked', 'checked');\n      this.__checkbox.checked = true;\n      this.__prev = true;\n    } else {\n      this.__checkbox.checked = false;\n      this.__prev = false;\n    }\n\n    return super.updateDisplay();\n  }\n}\n\nexport default BooleanController;\n","/**\n * dat-gui JavaScript Controller Library\n * https://github.com/dataarts/dat.gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport dom from '../dom/dom';\nimport common from '../utils/common';\n\n/**\n * @class Provides a select input to alter the property of an object, using a\n * list of accepted values.\n *\n * @extends dat.controllers.Controller\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n * @param {Object|string[]} options A map of labels to acceptable values, or\n * a list of acceptable string values.\n */\nclass OptionController extends Controller {\n  constructor(object, property, opts) {\n    super(object, property);\n\n    let options = opts;\n\n    const _this = this;\n\n    /**\n     * The drop down menu\n     * @ignore\n     */\n    this.__select = document.createElement('select');\n\n    if (common.isArray(options)) {\n      const map = {};\n      common.each(options, function(element) {\n        map[element] = element;\n      });\n      options = map;\n    }\n\n    common.each(options, function(value, key) {\n      const opt = document.createElement('option');\n      opt.innerHTML = key;\n      opt.setAttribute('value', value);\n      _this.__select.appendChild(opt);\n    });\n\n    // Acknowledge original value\n    this.updateDisplay();\n\n    dom.bind(this.__select, 'change', function() {\n      const desiredValue = this.options[this.selectedIndex].value;\n      _this.setValue(desiredValue);\n    });\n\n    this.domElement.appendChild(this.__select);\n  }\n\n  setValue(v) {\n    const toReturn = super.setValue(v);\n\n    if (this.__onFinishChange) {\n      this.__onFinishChange.call(this, this.getValue());\n    }\n    return toReturn;\n  }\n\n  updateDisplay() {\n    if (dom.isActive(this.__select)) return this; // prevent number from updating if user is trying to manually update\n    this.__select.value = this.getValue();\n    return super.updateDisplay();\n  }\n}\n\nexport default OptionController;\n","/**\n * dat-gui JavaScript Controller Library\n * https://github.com/dataarts/dat.gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport dom from '../dom/dom';\n\n/**\n * @class Provides a text input to alter the string property of an object.\n *\n * @extends dat.controllers.Controller\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n */\nclass StringController extends Controller {\n  constructor(object, property) {\n    super(object, property);\n\n    const _this = this;\n\n    function onChange() {\n      _this.setValue(_this.__input.value);\n    }\n\n    function onBlur() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    this.__input = document.createElement('input');\n    this.__input.setAttribute('type', 'text');\n\n    dom.bind(this.__input, 'keyup', onChange);\n    dom.bind(this.__input, 'change', onChange);\n    dom.bind(this.__input, 'blur', onBlur);\n    dom.bind(this.__input, 'keydown', function(e) {\n      if (e.keyCode === 13) {\n        this.blur();\n      }\n    });\n\n    this.updateDisplay();\n\n    this.domElement.appendChild(this.__input);\n  }\n\n  updateDisplay() {\n    // Stops the caret from moving on account of:\n    // keyup -> setValue -> updateDisplay\n    if (!dom.isActive(this.__input)) {\n      this.__input.value = this.getValue();\n    }\n    return super.updateDisplay();\n  }\n}\n\nexport default StringController;\n","/**\n * dat-gui JavaScript Controller Library\n * https://github.com/dataarts/dat.gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport common from '../utils/common';\n\nfunction numDecimals(x) {\n  const _x = x.toString();\n  if (_x.indexOf('.') > -1) {\n    return _x.length - _x.indexOf('.') - 1;\n  }\n\n  return 0;\n}\n\n/**\n * @class Represents a given property of an object that is a number.\n *\n * @extends dat.controllers.Controller\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n * @param {Object} [params] Optional parameters\n * @param {Number} [params.min] Minimum allowed value\n * @param {Number} [params.max] Maximum allowed value\n * @param {Number} [params.step] Increment by which to change value\n */\nclass NumberController extends Controller {\n  constructor(object, property, params) {\n    super(object, property);\n\n    const _params = params || {};\n\n    this.__min = _params.min;\n    this.__max = _params.max;\n    this.__step = _params.step;\n\n    if (common.isUndefined(this.__step)) {\n      if (this.initialValue === 0) {\n        this.__impliedStep = 1; // What are we, psychics?\n      } else {\n        // Hey Doug, check this out.\n        this.__impliedStep = Math.pow(10, Math.floor(Math.log(Math.abs(this.initialValue)) / Math.LN10)) / 10;\n      }\n    } else {\n      this.__impliedStep = this.__step;\n    }\n\n    this.__precision = numDecimals(this.__impliedStep);\n  }\n\n  setValue(v) {\n    let _v = v;\n\n    if (this.__min !== undefined && _v < this.__min) {\n      _v = this.__min;\n    } else if (this.__max !== undefined && _v > this.__max) {\n      _v = this.__max;\n    }\n\n    if (this.__step !== undefined && _v % this.__step !== 0) {\n      _v = Math.round(_v / this.__step) * this.__step;\n    }\n\n    return super.setValue(_v);\n  }\n\n  /**\n   * Specify a minimum value for <code>object[property]</code>.\n   *\n   * @param {Number} minValue The minimum value for\n   * <code>object[property]</code>\n   * @returns {dat.controllers.NumberController} this\n   */\n  min(minValue) {\n    this.__min = minValue;\n    return this;\n  }\n\n  /**\n   * Specify a maximum value for <code>object[property]</code>.\n   *\n   * @param {Number} maxValue The maximum value for\n   * <code>object[property]</code>\n   * @returns {dat.controllers.NumberController} this\n   */\n  max(maxValue) {\n    this.__max = maxValue;\n    return this;\n  }\n\n  /**\n   * Specify a step value that dat.controllers.NumberController\n   * increments by.\n   *\n   * @param {Number} stepValue The step value for\n   * dat.controllers.NumberController\n   * @default if minimum and maximum specified increment is 1% of the\n   * difference otherwise stepValue is 1\n   * @returns {dat.controllers.NumberController} this\n   */\n  step(stepValue) {\n    this.__step = stepValue;\n    this.__impliedStep = stepValue;\n    this.__precision = numDecimals(stepValue);\n    return this;\n  }\n}\n\nexport default NumberController;\n","/**\n * dat-gui JavaScript Controller Library\n * https://github.com/dataarts/dat.gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport NumberController from './NumberController';\nimport dom from '../dom/dom';\nimport common from '../utils/common';\n\nfunction roundToDecimal(value, decimals) {\n  const tenTo = Math.pow(10, decimals);\n  return Math.round(value * tenTo) / tenTo;\n}\n\n/**\n * @class Represents a given property of an object that is a number and\n * provides an input element with which to manipulate it.\n *\n * @extends dat.controllers.Controller\n * @extends dat.controllers.NumberController\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n * @param {Object} [params] Optional parameters\n * @param {Number} [params.min] Minimum allowed value\n * @param {Number} [params.max] Maximum allowed value\n * @param {Number} [params.step] Increment by which to change value\n */\nclass NumberControllerBox extends NumberController {\n  constructor(object, property, params) {\n    super(object, property, params);\n\n    this.__truncationSuspended = false;\n\n    const _this = this;\n\n    /**\n     * {Number} Previous mouse y position\n     * @ignore\n     */\n    let prevY;\n\n    function onChange() {\n      const attempted = parseFloat(_this.__input.value);\n      if (!common.isNaN(attempted)) {\n        _this.setValue(attempted);\n      }\n    }\n\n    function onFinish() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    function onBlur() {\n      onFinish();\n    }\n\n    function onMouseDrag(e) {\n      const diff = prevY - e.clientY;\n      _this.setValue(_this.getValue() + diff * _this.__impliedStep);\n\n      prevY = e.clientY;\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      onFinish();\n    }\n\n    function onMouseDown(e) {\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      prevY = e.clientY;\n    }\n\n    this.__input = document.createElement('input');\n    this.__input.setAttribute('type', 'text');\n\n    // Makes it so manually specified values are not truncated.\n\n    dom.bind(this.__input, 'change', onChange);\n    dom.bind(this.__input, 'blur', onBlur);\n    dom.bind(this.__input, 'mousedown', onMouseDown);\n    dom.bind(this.__input, 'keydown', function(e) {\n      // When pressing enter, you can be as precise as you want.\n      if (e.keyCode === 13) {\n        _this.__truncationSuspended = true;\n        this.blur();\n        _this.__truncationSuspended = false;\n        onFinish();\n      }\n    });\n\n    this.updateDisplay();\n\n    this.domElement.appendChild(this.__input);\n  }\n\n  updateDisplay() {\n    this.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal(this.getValue(), this.__precision);\n    return super.updateDisplay();\n  }\n}\n\nexport default NumberControllerBox;\n","/**\n * dat-gui JavaScript Controller Library\n * https://github.com/dataarts/dat.gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport NumberController from './NumberController';\nimport dom from '../dom/dom';\n\nfunction map(v, i1, i2, o1, o2) {\n  return o1 + (o2 - o1) * ((v - i1) / (i2 - i1));\n}\n\n/**\n * @class Represents a given property of an object that is a number, contains\n * a minimum and maximum, and provides a slider element with which to\n * manipulate it. It should be noted that the slider element is made up of\n * <code>&lt;div&gt;</code> tags, <strong>not</strong> the html5\n * <code>&lt;slider&gt;</code> element.\n *\n * @extends dat.controllers.Controller\n * @extends dat.controllers.NumberController\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n * @param {Number} minValue Minimum allowed value\n * @param {Number} maxValue Maximum allowed value\n * @param {Number} stepValue Increment by which to change value\n */\nclass NumberControllerSlider extends NumberController {\n  constructor(object, property, min, max, step) {\n    super(object, property, { min: min, max: max, step: step });\n\n    const _this = this;\n\n    this.__background = document.createElement('div');\n    this.__foreground = document.createElement('div');\n\n    dom.bind(this.__background, 'mousedown', onMouseDown);\n    dom.bind(this.__background, 'touchstart', onTouchStart);\n\n    dom.addClass(this.__background, 'slider');\n    dom.addClass(this.__foreground, 'slider-fg');\n\n    function onMouseDown(e) {\n      document.activeElement.blur();\n\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n\n      onMouseDrag(e);\n    }\n\n    function onMouseDrag(e) {\n      e.preventDefault();\n\n      const bgRect = _this.__background.getBoundingClientRect();\n\n      _this.setValue(\n        map(e.clientX, bgRect.left, bgRect.right, _this.__min, _this.__max)\n      );\n\n      return false;\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    function onTouchStart(e) {\n      if (e.touches.length !== 1) { return; }\n      dom.bind(window, 'touchmove', onTouchMove);\n      dom.bind(window, 'touchend', onTouchEnd);\n      onTouchMove(e);\n    }\n\n    function onTouchMove(e) {\n      const clientX = e.touches[0].clientX;\n      const bgRect = _this.__background.getBoundingClientRect();\n\n      _this.setValue(\n        map(clientX, bgRect.left, bgRect.right, _this.__min, _this.__max)\n      );\n    }\n\n    function onTouchEnd() {\n      dom.unbind(window, 'touchmove', onTouchMove);\n      dom.unbind(window, 'touchend', onTouchEnd);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    this.updateDisplay();\n\n    this.__background.appendChild(this.__foreground);\n    this.domElement.appendChild(this.__background);\n  }\n\n  updateDisplay() {\n    const pct = (this.getValue() - this.__min) / (this.__max - this.__min);\n    this.__foreground.style.width = pct * 100 + '%';\n    return super.updateDisplay();\n  }\n}\n\nexport default NumberControllerSlider;\n","/**\n * dat-gui JavaScript Controller Library\n * https://github.com/dataarts/dat.gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport dom from '../dom/dom';\n\n/**\n * @class Provides a GUI interface to fire a specified method, a property of an object.\n *\n * @extends dat.controllers.Controller\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n */\nclass FunctionController extends Controller {\n  constructor(object, property, text) {\n    super(object, property);\n\n    const _this = this;\n\n    this.__button = document.createElement('div');\n    this.__button.innerHTML = text === undefined ? 'Fire' : text;\n\n    dom.bind(this.__button, 'click', function(e) {\n      e.preventDefault();\n      _this.fire();\n      return false;\n    });\n\n    dom.addClass(this.__button, 'button');\n\n    this.domElement.appendChild(this.__button);\n  }\n\n  fire() {\n    if (this.__onChange) {\n      this.__onChange.call(this);\n    }\n    this.getValue().call(this.object);\n    if (this.__onFinishChange) {\n      this.__onFinishChange.call(this, this.getValue());\n    }\n  }\n}\n\nexport default FunctionController;\n","/**\n * dat-gui JavaScript Controller Library\n * https://github.com/dataarts/dat.gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport dom from '../dom/dom';\nimport Color from '../color/Color';\nimport interpret from '../color/interpret';\nimport common from '../utils/common';\n\n/**\n * @class Represents a given property of an object that is a color.\n * @param {Object} object\n * @param {string} property\n */\nclass ColorController extends Controller {\n  constructor(object, property) {\n    super(object, property);\n\n    this.__color = new Color(this.getValue());\n    this.__temp = new Color(0);\n\n    const _this = this;\n\n    this.domElement = document.createElement('div');\n\n    dom.makeSelectable(this.domElement, false);\n\n    this.__selector = document.createElement('div');\n    this.__selector.className = 'selector';\n\n    this.__saturation_field = document.createElement('div');\n    this.__saturation_field.className = 'saturation-field';\n\n    this.__field_knob = document.createElement('div');\n    this.__field_knob.className = 'field-knob';\n    this.__field_knob_border = '2px solid ';\n\n    this.__hue_knob = document.createElement('div');\n    this.__hue_knob.className = 'hue-knob';\n\n    this.__hue_field = document.createElement('div');\n    this.__hue_field.className = 'hue-field';\n\n    this.__input = document.createElement('input');\n    this.__input.type = 'text';\n    this.__input_textShadow = '0 1px 1px ';\n\n    dom.bind(this.__input, 'keydown', function(e) {\n      if (e.keyCode === 13) { // on enter\n        onBlur.call(this);\n      }\n    });\n\n    dom.bind(this.__input, 'blur', onBlur);\n\n    dom.bind(this.__selector, 'mousedown', function(/* e */) {\n      dom\n        .addClass(this, 'drag')\n        .bind(window, 'mouseup', function(/* e */) {\n          dom.removeClass(_this.__selector, 'drag');\n        });\n    });\n\n    dom.bind(this.__selector, 'touchstart', function(/* e */) {\n      dom\n        .addClass(this, 'drag')\n        .bind(window, 'touchend', function(/* e */) {\n          dom.removeClass(_this.__selector, 'drag');\n        });\n    });\n\n    const valueField = document.createElement('div');\n\n    common.extend(this.__selector.style, {\n      width: '122px',\n      height: '102px',\n      padding: '3px',\n      backgroundColor: '#222',\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\n    });\n\n    common.extend(this.__field_knob.style, {\n      position: 'absolute',\n      width: '12px',\n      height: '12px',\n      border: this.__field_knob_border + (this.__color.v < 0.5 ? '#fff' : '#000'),\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\n      borderRadius: '12px',\n      zIndex: 1\n    });\n\n    common.extend(this.__hue_knob.style, {\n      position: 'absolute',\n      width: '15px',\n      height: '2px',\n      borderRight: '4px solid #fff',\n      zIndex: 1\n    });\n\n    common.extend(this.__saturation_field.style, {\n      width: '100px',\n      height: '100px',\n      border: '1px solid #555',\n      marginRight: '3px',\n      display: 'inline-block',\n      cursor: 'pointer'\n    });\n\n    common.extend(valueField.style, {\n      width: '100%',\n      height: '100%',\n      background: 'none'\n    });\n\n    linearGradient(valueField, 'top', 'rgba(0,0,0,0)', '#000');\n\n    common.extend(this.__hue_field.style, {\n      width: '15px',\n      height: '100px',\n      border: '1px solid #555',\n      cursor: 'ns-resize',\n      position: 'absolute',\n      top: '3px',\n      right: '3px'\n    });\n\n    hueGradient(this.__hue_field);\n\n    common.extend(this.__input.style, {\n      outline: 'none',\n      //      width: '120px',\n      textAlign: 'center',\n      //      padding: '4px',\n      //      marginBottom: '6px',\n      color: '#fff',\n      border: 0,\n      fontWeight: 'bold',\n      textShadow: this.__input_textShadow + 'rgba(0,0,0,0.7)'\n    });\n\n    dom.bind(this.__saturation_field, 'mousedown', fieldDown);\n    dom.bind(this.__saturation_field, 'touchstart', fieldDown);\n\n    dom.bind(this.__field_knob, 'mousedown', fieldDown);\n    dom.bind(this.__field_knob, 'touchstart', fieldDown);\n\n    dom.bind(this.__hue_field, 'mousedown', fieldDownH);\n    dom.bind(this.__hue_field, 'touchstart', fieldDownH);\n\n    function fieldDown(e) {\n      setSV(e);\n      dom.bind(window, 'mousemove', setSV);\n      dom.bind(window, 'touchmove', setSV);\n      dom.bind(window, 'mouseup', fieldUpSV);\n      dom.bind(window, 'touchend', fieldUpSV);\n    }\n\n    function fieldDownH(e) {\n      setH(e);\n      dom.bind(window, 'mousemove', setH);\n      dom.bind(window, 'touchmove', setH);\n      dom.bind(window, 'mouseup', fieldUpH);\n      dom.bind(window, 'touchend', fieldUpH);\n    }\n\n    function fieldUpSV() {\n      dom.unbind(window, 'mousemove', setSV);\n      dom.unbind(window, 'touchmove', setSV);\n      dom.unbind(window, 'mouseup', fieldUpSV);\n      dom.unbind(window, 'touchend', fieldUpSV);\n      onFinish();\n    }\n\n    function fieldUpH() {\n      dom.unbind(window, 'mousemove', setH);\n      dom.unbind(window, 'touchmove', setH);\n      dom.unbind(window, 'mouseup', fieldUpH);\n      dom.unbind(window, 'touchend', fieldUpH);\n      onFinish();\n    }\n\n    function onBlur() {\n      const i = interpret(this.value);\n      if (i !== false) {\n        _this.__color.__state = i;\n        _this.setValue(_this.__color.toOriginal());\n      } else {\n        this.value = _this.__color.toString();\n      }\n    }\n\n    function onFinish() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.__color.toOriginal());\n      }\n    }\n\n    this.__saturation_field.appendChild(valueField);\n    this.__selector.appendChild(this.__field_knob);\n    this.__selector.appendChild(this.__saturation_field);\n    this.__selector.appendChild(this.__hue_field);\n    this.__hue_field.appendChild(this.__hue_knob);\n\n    this.domElement.appendChild(this.__input);\n    this.domElement.appendChild(this.__selector);\n\n    this.updateDisplay();\n\n    function setSV(e) {\n      if (e.type.indexOf('touch') === -1) { e.preventDefault(); }\n\n      const fieldRect = _this.__saturation_field.getBoundingClientRect();\n      const { clientX, clientY } = (e.touches && e.touches[0]) || e;\n      let s = (clientX - fieldRect.left) / (fieldRect.right - fieldRect.left);\n      let v = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\n\n      if (v > 1) {\n        v = 1;\n      } else if (v < 0) {\n        v = 0;\n      }\n\n      if (s > 1) {\n        s = 1;\n      } else if (s < 0) {\n        s = 0;\n      }\n\n      _this.__color.v = v;\n      _this.__color.s = s;\n\n      _this.setValue(_this.__color.toOriginal());\n\n\n      return false;\n    }\n\n    function setH(e) {\n      if (e.type.indexOf('touch') === -1) { e.preventDefault(); }\n\n      const fieldRect = _this.__hue_field.getBoundingClientRect();\n      const { clientY } = (e.touches && e.touches[0]) || e;\n      let h = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\n\n      if (h > 1) {\n        h = 1;\n      } else if (h < 0) {\n        h = 0;\n      }\n\n      _this.__color.h = h * 360;\n\n      _this.setValue(_this.__color.toOriginal());\n\n      return false;\n    }\n  }\n\n  updateDisplay() {\n    const i = interpret(this.getValue());\n\n    if (i !== false) {\n      let mismatch = false;\n\n      // Check for mismatch on the interpreted value.\n\n      common.each(Color.COMPONENTS, function(component) {\n        if (!common.isUndefined(i[component]) && !common.isUndefined(this.__color.__state[component]) &&\n          i[component] !== this.__color.__state[component]) {\n          mismatch = true;\n          return {}; // break\n        }\n      }, this);\n\n      // If nothing diverges, we keep our previous values\n      // for statefulness, otherwise we recalculate fresh\n      if (mismatch) {\n        common.extend(this.__color.__state, i);\n      }\n    }\n\n    common.extend(this.__temp.__state, this.__color.__state);\n\n    this.__temp.a = 1;\n\n    const flip = (this.__color.v < 0.5 || this.__color.s > 0.5) ? 255 : 0;\n    const _flip = 255 - flip;\n\n    common.extend(this.__field_knob.style, {\n      marginLeft: 100 * this.__color.s - 7 + 'px',\n      marginTop: 100 * (1 - this.__color.v) - 7 + 'px',\n      backgroundColor: this.__temp.toHexString(),\n      border: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip + ')'\n    });\n\n    this.__hue_knob.style.marginTop = (1 - this.__color.h / 360) * 100 + 'px';\n\n    this.__temp.s = 1;\n    this.__temp.v = 1;\n\n    linearGradient(this.__saturation_field, 'left', '#fff', this.__temp.toHexString());\n\n    this.__input.value = this.__color.toString();\n\n    common.extend(this.__input.style, {\n      backgroundColor: this.__color.toHexString(),\n      color: 'rgb(' + flip + ',' + flip + ',' + flip + ')',\n      textShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip + ',.7)'\n    });\n  }\n}\n\nconst vendors = ['-moz-', '-o-', '-webkit-', '-ms-', ''];\n\nfunction linearGradient(elem, x, a, b) {\n  elem.style.background = '';\n  common.each(vendors, function(vendor) {\n    elem.style.cssText += 'background: ' + vendor + 'linear-gradient(' + x + ', ' + a + ' 0%, ' + b + ' 100%); ';\n  });\n}\n\nfunction hueGradient(elem) {\n  elem.style.background = '';\n  elem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);';\n  elem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n}\n\nexport default ColorController;\n","/**\n * dat-gui JavaScript Controller Library\n * https://github.com/dataarts/dat.gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nconst css = {\n  load: function(url, indoc) {\n    const doc = indoc || document;\n    const link = doc.createElement('link');\n    link.type = 'text/css';\n    link.rel = 'stylesheet';\n    link.href = url;\n    doc.getElementsByTagName('head')[0].appendChild(link);\n  },\n\n  inject: function(cssContent, indoc) {\n    const doc = indoc || document;\n    const injected = document.createElement('style');\n    injected.type = 'text/css';\n    injected.innerHTML = cssContent;\n    const head = doc.getElementsByTagName('head')[0];\n    try {\n      head.appendChild(injected);\n    } catch (e) { // Unable to inject CSS, probably because of a Content Security Policy\n    }\n  }\n};\n\nexport default css;\n","const saveDialogContents = `<div id=\"dg-save\" class=\"dg dialogue\">\n\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\n\n  <textarea id=\"dg-new-constructor\"></textarea>\n\n  <div id=\"dg-save-locally\">\n\n    <input id=\"dg-local-storage\" type=\"checkbox\"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id=\"dg-local-explain\">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>`;\n\nexport default saveDialogContents;\n","/**\n * dat-gui JavaScript Controller Library\n * https://github.com/dataarts/dat.gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport OptionController from './OptionController';\nimport NumberControllerBox from './NumberControllerBox';\nimport NumberControllerSlider from './NumberControllerSlider';\nimport StringController from './StringController';\nimport FunctionController from './FunctionController';\nimport BooleanController from './BooleanController';\nimport common from '../utils/common';\n\nconst ControllerFactory = function(object, property) {\n  const initialValue = object[property];\n\n  // Providing options?\n  if (common.isArray(arguments[2]) || common.isObject(arguments[2])) {\n    return new OptionController(object, property, arguments[2]);\n  }\n\n  // Providing a map?\n  if (common.isNumber(initialValue)) {\n    // Has min and max? (slider)\n    if (common.isNumber(arguments[2]) && common.isNumber(arguments[3])) {\n      // has step?\n      if (common.isNumber(arguments[4])) {\n        return new NumberControllerSlider(object, property,\n          arguments[2], arguments[3], arguments[4]);\n      }\n\n      return new NumberControllerSlider(object, property, arguments[2], arguments[3]);\n    }\n\n    // number box\n    if (common.isNumber(arguments[4])) { // has step\n      return new NumberControllerBox(object, property,\n        { min: arguments[2], max: arguments[3], step: arguments[4] });\n    }\n    return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3] });\n  }\n\n  if (common.isString(initialValue)) {\n    return new StringController(object, property);\n  }\n\n  if (common.isFunction(initialValue)) {\n    return new FunctionController(object, property, '');\n  }\n\n  if (common.isBoolean(initialValue)) {\n    return new BooleanController(object, property);\n  }\n\n  return null;\n};\n\nexport default ControllerFactory;\n","/**\n * dat-gui JavaScript Controller Library\n * https://github.com/dataarts/dat.gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction requestAnimationFrame(callback) {\n  setTimeout(callback, 1000 / 60);\n}\n\nexport default window.requestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.oRequestAnimationFrame ||\n    window.msRequestAnimationFrame ||\n    requestAnimationFrame;\n","/**\n * dat-gui JavaScript Controller Library\n * https://github.com/dataarts/dat.gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport dom from './dom';\nimport common from '../utils/common';\n\nclass CenteredDiv {\n  constructor() {\n    this.backgroundElement = document.createElement('div');\n    common.extend(this.backgroundElement.style, {\n      backgroundColor: 'rgba(0,0,0,0.8)',\n      top: 0,\n      left: 0,\n      display: 'none',\n      zIndex: '1000',\n      opacity: 0,\n      WebkitTransition: 'opacity 0.2s linear',\n      transition: 'opacity 0.2s linear'\n    });\n\n    dom.makeFullscreen(this.backgroundElement);\n    this.backgroundElement.style.position = 'fixed';\n\n    this.domElement = document.createElement('div');\n    common.extend(this.domElement.style, {\n      position: 'fixed',\n      display: 'none',\n      zIndex: '1001',\n      opacity: 0,\n      WebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear',\n      transition: 'transform 0.2s ease-out, opacity 0.2s linear'\n    });\n\n\n    document.body.appendChild(this.backgroundElement);\n    document.body.appendChild(this.domElement);\n\n    const _this = this;\n    dom.bind(this.backgroundElement, 'click', function() {\n      _this.hide();\n    });\n  }\n\n  show() {\n    const _this = this;\n\n    this.backgroundElement.style.display = 'block';\n\n    this.domElement.style.display = 'block';\n    this.domElement.style.opacity = 0;\n    //    this.domElement.style.top = '52%';\n    this.domElement.style.webkitTransform = 'scale(1.1)';\n\n    this.layout();\n\n    common.defer(function() {\n      _this.backgroundElement.style.opacity = 1;\n      _this.domElement.style.opacity = 1;\n      _this.domElement.style.webkitTransform = 'scale(1)';\n    });\n  }\n\n  /**\n   * Hide centered div\n   */\n  hide() {\n    const _this = this;\n\n    const hide = function() {\n      _this.domElement.style.display = 'none';\n      _this.backgroundElement.style.display = 'none';\n\n      dom.unbind(_this.domElement, 'webkitTransitionEnd', hide);\n      dom.unbind(_this.domElement, 'transitionend', hide);\n      dom.unbind(_this.domElement, 'oTransitionEnd', hide);\n    };\n\n    dom.bind(this.domElement, 'webkitTransitionEnd', hide);\n    dom.bind(this.domElement, 'transitionend', hide);\n    dom.bind(this.domElement, 'oTransitionEnd', hide);\n\n    this.backgroundElement.style.opacity = 0;\n    //    this.domElement.style.top = '48%';\n    this.domElement.style.opacity = 0;\n    this.domElement.style.webkitTransform = 'scale(1.1)';\n  }\n\n  layout() {\n    this.domElement.style.left = window.innerWidth / 2 - dom.getWidth(this.domElement) / 2 + 'px';\n    this.domElement.style.top = window.innerHeight / 2 - dom.getHeight(this.domElement) / 2 + 'px';\n  }\n}\n\nexport default CenteredDiv;\n","/**\n * dat-gui JavaScript Controller Library\n * https://github.com/dataarts/dat.gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport css from '../utils/css';\nimport saveDialogueContents from './saveDialogue.html';\nimport ControllerFactory from '../controllers/ControllerFactory';\nimport Controller from '../controllers/Controller';\nimport BooleanController from '../controllers/BooleanController';\nimport FunctionController from '../controllers/FunctionController';\nimport NumberControllerBox from '../controllers/NumberControllerBox';\nimport NumberControllerSlider from '../controllers/NumberControllerSlider';\nimport ColorController from '../controllers/ColorController';\nimport requestAnimationFrame from '../utils/requestAnimationFrame';\nimport CenteredDiv from '../dom/CenteredDiv';\nimport dom from '../dom/dom';\nimport common from '../utils/common';\n\nimport styleSheet from './style.scss'; // CSS to embed in build\n\ncss.inject(styleSheet);\n\n/** @ignore Outer-most className for GUI's */\nconst CSS_NAMESPACE = 'dg';\n\nconst HIDE_KEY_CODE = 72;\n\n/** @ignore The only value shared between the JS and SCSS. Use caution. */\nconst CLOSE_BUTTON_HEIGHT = 20;\n\nconst DEFAULT_DEFAULT_PRESET_NAME = 'Default';\n\nconst SUPPORTS_LOCAL_STORAGE = (function() {\n  try {\n    return !!window.localStorage;\n  } catch (e) {\n    return false;\n  }\n}());\n\nlet SAVE_DIALOGUE;\n\n/** @ignore Have we yet to create an autoPlace GUI? */\nlet autoPlaceVirgin = true;\n\n/** @ignore Fixed position div that auto place GUI's go inside */\nlet autoPlaceContainer;\n\n/** @ignore Are we hiding the GUI's ? */\nlet hide = false;\n\n/** @private GUI's which should be hidden */\nconst hideableGuis = [];\n\n/**\n * @class A lightweight controller library for JavaScript. It allows you to easily\n * manipulate variables and fire functions on the fly.\n *\n * @typicalname gui\n *\n * @example\n * // Creating a GUI with options.\n * var gui = new dat.GUI({name: 'My GUI'});\n *\n * @example\n * // Creating a GUI and a subfolder.\n * var gui = new dat.GUI();\n * var folder1 = gui.addFolder('Flow Field');\n *\n * @param {Object} [params]\n * @param {String} [params.name] The name of this GUI.\n * @param {Object} [params.load] JSON object representing the saved state of\n * this GUI.\n * @param {dat.gui.GUI} [params.parent] The GUI I'm nested in.\n * @param {Boolean} [params.autoPlace=true]\n * @param {Boolean} [params.hideable=true] If true, GUI is shown/hidden by <kbd>h</kbd> keypress.\n * @param {Boolean} [params.closed=false] If true, starts closed\n * @param {Boolean} [params.closeOnTop=false] If true, close/open button shows on top of the GUI\n */\nconst GUI = function(pars) {\n  const _this = this;\n\n  let params = pars || {};\n\n  /**\n   * Outermost DOM Element\n   * @type {DOMElement}\n   */\n  this.domElement = document.createElement('div');\n  this.__ul = document.createElement('ul');\n  this.domElement.appendChild(this.__ul);\n\n  dom.addClass(this.domElement, CSS_NAMESPACE);\n\n  /**\n   * Nested GUI's by name\n   * @ignore\n   */\n  this.__folders = {};\n\n  this.__controllers = [];\n\n  /**\n   * List of objects I'm remembering for save, only used in top level GUI\n   * @ignore\n   */\n  this.__rememberedObjects = [];\n\n  /**\n   * Maps the index of remembered objects to a map of controllers, only used\n   * in top level GUI.\n   *\n   * @private\n   * @ignore\n   *\n   * @example\n   * [\n   *  {\n     *    propertyName: Controller,\n     *    anotherPropertyName: Controller\n     *  },\n   *  {\n     *    propertyName: Controller\n     *  }\n   * ]\n   */\n  this.__rememberedObjectIndecesToControllers = [];\n\n  this.__listening = [];\n\n  // Default parameters\n  params = common.defaults(params, {\n    closeOnTop: false,\n    autoPlace: true,\n    width: GUI.DEFAULT_WIDTH\n  });\n\n  params = common.defaults(params, {\n    resizable: params.autoPlace,\n    hideable: params.autoPlace\n  });\n\n  if (!common.isUndefined(params.load)) {\n    // Explicit preset\n    if (params.preset) {\n      params.load.preset = params.preset;\n    }\n  } else {\n    params.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\n  }\n\n  if (common.isUndefined(params.parent) && params.hideable) {\n    hideableGuis.push(this);\n  }\n\n  // Only root level GUI's are resizable.\n  params.resizable = common.isUndefined(params.parent) && params.resizable;\n\n  if (params.autoPlace && common.isUndefined(params.scrollable)) {\n    params.scrollable = true;\n  }\n  //    params.scrollable = common.isUndefined(params.parent) && params.scrollable === true;\n\n  // Not part of params because I don't want people passing this in via\n  // constructor. Should be a 'remembered' value.\n  let useLocalStorage =\n    SUPPORTS_LOCAL_STORAGE &&\n    localStorage.getItem(getLocalStorageHash(this, 'isLocal')) === 'true';\n\n  let saveToLocalStorage;\n  let titleRow;\n\n  Object.defineProperties(this,\n    /** @lends GUI.prototype */\n    {\n      /**\n       * The parent <code>GUI</code>\n       * @type dat.gui.GUI\n       */\n      parent: {\n        get: function() {\n          return params.parent;\n        }\n      },\n\n      scrollable: {\n        get: function() {\n          return params.scrollable;\n        }\n      },\n\n      /**\n       * Handles <code>GUI</code>'s element placement for you\n       * @type Boolean\n       */\n      autoPlace: {\n        get: function() {\n          return params.autoPlace;\n        }\n      },\n\n      /**\n       * Handles <code>GUI</code>'s position of open/close button\n       * @type Boolean\n       */\n      closeOnTop: {\n        get: function() {\n          return params.closeOnTop;\n        }\n      },\n\n      /**\n       * The identifier for a set of saved values\n       * @type String\n       */\n      preset: {\n        get: function() {\n          if (_this.parent) {\n            return _this.getRoot().preset;\n          }\n\n          return params.load.preset;\n        },\n\n        set: function(v) {\n          if (_this.parent) {\n            _this.getRoot().preset = v;\n          } else {\n            params.load.preset = v;\n          }\n          setPresetSelectIndex(this);\n          _this.revert();\n        }\n      },\n\n      /**\n       * The width of <code>GUI</code> element\n       * @type Number\n       */\n      width: {\n        get: function() {\n          return params.width;\n        },\n        set: function(v) {\n          params.width = v;\n          setWidth(_this, v);\n        }\n      },\n\n      /**\n       * The name of <code>GUI</code>. Used for folders. i.e\n       * a folder's name\n       * @type String\n       */\n      name: {\n        get: function() {\n          return params.name;\n        },\n        set: function(v) {\n          // TODO Check for collisions among sibling folders\n          params.name = v;\n          if (titleRow) {\n            titleRow.innerHTML = params.name;\n          }\n        }\n      },\n\n      /**\n       * Whether the <code>GUI</code> is collapsed or not\n       * @type Boolean\n       */\n      closed: {\n        get: function() {\n          return params.closed;\n        },\n        set: function(v) {\n          params.closed = v;\n          if (params.closed) {\n            dom.addClass(_this.__ul, GUI.CLASS_CLOSED);\n          } else {\n            dom.removeClass(_this.__ul, GUI.CLASS_CLOSED);\n          }\n          // For browsers that aren't going to respect the CSS transition,\n          // Lets just check our height against the window height right off\n          // the bat.\n          this.onResize();\n\n          if (_this.__closeButton) {\n            _this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\n          }\n        }\n      },\n\n      /**\n       * Contains all presets\n       * @type Object\n       */\n      load: {\n        get: function() {\n          return params.load;\n        }\n      },\n\n      /**\n       * Determines whether or not to use <a href=\"https://developer.mozilla.org/en/DOM/Storage#localStorage\">localStorage</a> as the means for\n       * <code>remember</code>ing\n       * @type Boolean\n       */\n      useLocalStorage: {\n\n        get: function() {\n          return useLocalStorage;\n        },\n        set: function(bool) {\n          if (SUPPORTS_LOCAL_STORAGE) {\n            useLocalStorage = bool;\n            if (bool) {\n              dom.bind(window, 'unload', saveToLocalStorage);\n            } else {\n              dom.unbind(window, 'unload', saveToLocalStorage);\n            }\n            localStorage.setItem(getLocalStorageHash(_this, 'isLocal'), bool);\n          }\n        }\n      }\n    });\n\n  // Are we a root level GUI?\n  if (common.isUndefined(params.parent)) {\n    this.closed = params.closed || false;\n\n    dom.addClass(this.domElement, GUI.CLASS_MAIN);\n    dom.makeSelectable(this.domElement, false);\n\n    // Are we supposed to be loading locally?\n    if (SUPPORTS_LOCAL_STORAGE) {\n      if (useLocalStorage) {\n        _this.useLocalStorage = true;\n\n        const savedGui = localStorage.getItem(getLocalStorageHash(this, 'gui'));\n\n        if (savedGui) {\n          params.load = JSON.parse(savedGui);\n        }\n      }\n    }\n\n    this.__closeButton = document.createElement('div');\n    this.__closeButton.innerHTML = GUI.TEXT_CLOSED;\n    dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BUTTON);\n    if (params.closeOnTop) {\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_TOP);\n      this.domElement.insertBefore(this.__closeButton, this.domElement.childNodes[0]);\n    } else {\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BOTTOM);\n      this.domElement.appendChild(this.__closeButton);\n    }\n\n    dom.bind(this.__closeButton, 'click', function() {\n      _this.closed = !_this.closed;\n    });\n    // Oh, you're a nested GUI!\n  } else {\n    if (params.closed === undefined) {\n      params.closed = true;\n    }\n\n    const titleRowName = document.createTextNode(params.name);\n    dom.addClass(titleRowName, 'controller-name');\n\n    titleRow = addRow(_this, titleRowName);\n\n    const onClickTitle = function(e) {\n      e.preventDefault();\n      _this.closed = !_this.closed;\n      return false;\n    };\n\n    dom.addClass(this.__ul, GUI.CLASS_CLOSED);\n\n    dom.addClass(titleRow, 'title');\n    dom.bind(titleRow, 'click', onClickTitle);\n\n    if (!params.closed) {\n      this.closed = false;\n    }\n  }\n\n  if (params.autoPlace) {\n    if (common.isUndefined(params.parent)) {\n      if (autoPlaceVirgin) {\n        autoPlaceContainer = document.createElement('div');\n        dom.addClass(autoPlaceContainer, CSS_NAMESPACE);\n        dom.addClass(autoPlaceContainer, GUI.CLASS_AUTO_PLACE_CONTAINER);\n        document.body.appendChild(autoPlaceContainer);\n        autoPlaceVirgin = false;\n      }\n\n      // Put it in the dom for you.\n      autoPlaceContainer.appendChild(this.domElement);\n\n      // Apply the auto styles\n      dom.addClass(this.domElement, GUI.CLASS_AUTO_PLACE);\n    }\n\n\n    // Make it not elastic.\n    if (!this.parent) {\n      setWidth(_this, params.width);\n    }\n  }\n\n  this.__resizeHandler = function() {\n    _this.onResizeDebounced();\n  };\n\n  dom.bind(window, 'resize', this.__resizeHandler);\n  dom.bind(this.__ul, 'webkitTransitionEnd', this.__resizeHandler);\n  dom.bind(this.__ul, 'transitionend', this.__resizeHandler);\n  dom.bind(this.__ul, 'oTransitionEnd', this.__resizeHandler);\n  this.onResize();\n\n  if (params.resizable) {\n    addResizeHandle(this);\n  }\n\n  saveToLocalStorage = function() {\n    if (SUPPORTS_LOCAL_STORAGE && localStorage.getItem(getLocalStorageHash(_this, 'isLocal')) === 'true') {\n      localStorage.setItem(getLocalStorageHash(_this, 'gui'), JSON.stringify(_this.getSaveObject()));\n    }\n  };\n\n  // expose this method publicly\n  this.saveToLocalStorageIfPossible = saveToLocalStorage;\n\n  function resetWidth() {\n    const root = _this.getRoot();\n    root.width += 1;\n    common.defer(function() {\n      root.width -= 1;\n    });\n  }\n\n  if (!params.parent) {\n    resetWidth();\n  }\n};\n\nGUI.toggleHide = function() {\n  hide = !hide;\n  common.each(hideableGuis, function(gui) {\n    gui.domElement.style.display = hide ? 'none' : '';\n  });\n};\n\nGUI.CLASS_AUTO_PLACE = 'a';\nGUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\nGUI.CLASS_MAIN = 'main';\nGUI.CLASS_CONTROLLER_ROW = 'cr';\nGUI.CLASS_TOO_TALL = 'taller-than-window';\nGUI.CLASS_CLOSED = 'closed';\nGUI.CLASS_CLOSE_BUTTON = 'close-button';\nGUI.CLASS_CLOSE_TOP = 'close-top';\nGUI.CLASS_CLOSE_BOTTOM = 'close-bottom';\nGUI.CLASS_DRAG = 'drag';\n\nGUI.DEFAULT_WIDTH = 245;\nGUI.TEXT_CLOSED = 'Close Controls';\nGUI.TEXT_OPEN = 'Open Controls';\n\nGUI._keydownHandler = function(e) {\n  if (document.activeElement.type !== 'text' &&\n    (e.which === HIDE_KEY_CODE || e.keyCode === HIDE_KEY_CODE)) {\n    GUI.toggleHide();\n  }\n};\ndom.bind(window, 'keydown', GUI._keydownHandler, false);\n\ncommon.extend(\n  GUI.prototype,\n\n  /** @lends GUI.prototype */\n  {\n\n    /**\n     * Adds a new {@link Controller} to the GUI. The type of controller created\n     * is inferred from the initial value of <code>object[property]</code>. For\n     * color properties, see {@link addColor}.\n     *\n     * @param {Object} object The object to be manipulated\n     * @param {String} property The name of the property to be manipulated\n     * @param {Number} [min] Minimum allowed value\n     * @param {Number} [max] Maximum allowed value\n     * @param {Number} [step] Increment by which to change value\n     * @returns {Controller} The controller that was added to the GUI.\n     * @instance\n     *\n     * @example\n     * // Add a string controller.\n     * var person = {name: 'Sam'};\n     * gui.add(person, 'name');\n     *\n     * @example\n     * // Add a number controller slider.\n     * var person = {age: 45};\n     * gui.add(person, 'age', 0, 100);\n     */\n    add: function(object, property) {\n      return add(\n        this,\n        object,\n        property,\n        {\n          factoryArgs: Array.prototype.slice.call(arguments, 2)\n        }\n      );\n    },\n\n    /**\n     * Adds a new color controller to the GUI.\n     *\n     * @param object\n     * @param property\n     * @returns {Controller} The controller that was added to the GUI.\n     * @instance\n     *\n     * @example\n     * var palette = {\n     *   color1: '#FF0000', // CSS string\n     *   color2: [ 0, 128, 255 ], // RGB array\n     *   color3: [ 0, 128, 255, 0.3 ], // RGB with alpha\n     *   color4: { h: 350, s: 0.9, v: 0.3 } // Hue, saturation, value\n     * };\n     * gui.addColor(palette, 'color1');\n     * gui.addColor(palette, 'color2');\n     * gui.addColor(palette, 'color3');\n     * gui.addColor(palette, 'color4');\n     */\n    addColor: function(object, property) {\n      return add(\n        this,\n        object,\n        property,\n        {\n          color: true\n        }\n      );\n    },\n\n    /**\n     * Removes the given controller from the GUI.\n     * @param {Controller} controller\n     * @instance\n     */\n    remove: function(controller) {\n      // TODO listening?\n      this.__ul.removeChild(controller.__li);\n      this.__controllers.splice(this.__controllers.indexOf(controller), 1);\n      const _this = this;\n      common.defer(function() {\n        _this.onResize();\n      });\n    },\n\n    /**\n     * Removes the root GUI from the document and unbinds all event listeners.\n     * For subfolders, use `gui.removeFolder(folder)` instead.\n     * @instance\n     */\n    destroy: function() {\n      if (this.parent) {\n        throw new Error(\n          'Only the root GUI should be removed with .destroy(). ' +\n          'For subfolders, use gui.removeFolder(folder) instead.'\n        );\n      }\n\n      if (this.autoPlace) {\n        autoPlaceContainer.removeChild(this.domElement);\n      }\n\n      const _this = this;\n      common.each(this.__folders, function(subfolder) {\n        _this.removeFolder(subfolder);\n      });\n\n      dom.unbind(window, 'keydown', GUI._keydownHandler, false);\n\n      removeListeners(this);\n    },\n\n    /**\n     * Creates a new subfolder GUI instance.\n     * @param name\n     * @returns {dat.gui.GUI} The new folder.\n     * @throws {Error} if this GUI already has a folder by the specified\n     * name\n     * @instance\n     */\n    addFolder: function(name) {\n      // We have to prevent collisions on names in order to have a key\n      // by which to remember saved values\n      if (this.__folders[name] !== undefined) {\n        throw new Error('You already have a folder in this GUI by the' +\n          ' name \"' + name + '\"');\n      }\n\n      const newGuiParams = { name: name, parent: this };\n\n      // We need to pass down the autoPlace trait so that we can\n      // attach event listeners to open/close folder actions to\n      // ensure that a scrollbar appears if the window is too short.\n      newGuiParams.autoPlace = this.autoPlace;\n\n      // Do we have saved appearance data for this folder?\n      if (this.load && // Anything loaded?\n        this.load.folders && // Was my parent a dead-end?\n        this.load.folders[name]) { // Did daddy remember me?\n        // Start me closed if I was closed\n        newGuiParams.closed = this.load.folders[name].closed;\n\n        // Pass down the loaded data\n        newGuiParams.load = this.load.folders[name];\n      }\n\n      const gui = new GUI(newGuiParams);\n      this.__folders[name] = gui;\n\n      const li = addRow(this, gui.domElement);\n      dom.addClass(li, 'folder');\n      return gui;\n    },\n\n    /**\n     * Removes a subfolder GUI instance.\n     * @param {dat.gui.GUI} folder The folder to remove.\n     * @instance\n     */\n    removeFolder: function(folder) {\n      this.__ul.removeChild(folder.domElement.parentElement);\n\n      delete this.__folders[folder.name];\n\n      // Do we have saved appearance data for this folder?\n      if (this.load && // Anything loaded?\n        this.load.folders && // Was my parent a dead-end?\n        this.load.folders[folder.name]) {\n        delete this.load.folders[folder.name];\n      }\n\n      removeListeners(folder);\n\n      const _this = this;\n\n      common.each(folder.__folders, function(subfolder) {\n        folder.removeFolder(subfolder);\n      });\n\n      common.defer(function() {\n        _this.onResize();\n      });\n    },\n\n    /**\n     * Opens the GUI.\n     */\n    open: function() {\n      this.closed = false;\n    },\n\n    /**\n     * Closes the GUI.\n     */\n    close: function() {\n      this.closed = true;\n    },\n\n    /**\n    * Hides the GUI.\n    */\n    hide: function() {\n      this.domElement.style.display = 'none';\n    },\n\n    /**\n    * Shows the GUI.\n    */\n    show: function() {\n      this.domElement.style.display = '';\n    },\n\n\n    onResize: function() {\n      // we debounce this function to prevent performance issues when rotating on tablet/mobile\n      const root = this.getRoot();\n      if (root.scrollable) {\n        const top = dom.getOffset(root.__ul).top;\n        let h = 0;\n\n        common.each(root.__ul.childNodes, function(node) {\n          if (!(root.autoPlace && node === root.__save_row)) {\n            h += dom.getHeight(node);\n          }\n        });\n\n        if (window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h) {\n          dom.addClass(root.domElement, GUI.CLASS_TOO_TALL);\n          root.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\n        } else {\n          dom.removeClass(root.domElement, GUI.CLASS_TOO_TALL);\n          root.__ul.style.height = 'auto';\n        }\n      }\n\n      if (root.__resize_handle) {\n        common.defer(function() {\n          root.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\n        });\n      }\n\n      if (root.__closeButton) {\n        root.__closeButton.style.width = root.width + 'px';\n      }\n    },\n\n    onResizeDebounced: common.debounce(function() { this.onResize(); }, 50),\n\n    /**\n     * Mark objects for saving. The order of these objects cannot change as\n     * the GUI grows. When remembering new objects, append them to the end\n     * of the list.\n     *\n     * @param {...Object} objects\n     * @throws {Error} if not called on a top level GUI.\n     * @instance\n     * @ignore\n     */\n    remember: function() {\n      if (common.isUndefined(SAVE_DIALOGUE)) {\n        SAVE_DIALOGUE = new CenteredDiv();\n        SAVE_DIALOGUE.domElement.innerHTML = saveDialogueContents;\n      }\n\n      if (this.parent) {\n        throw new Error('You can only call remember on a top level GUI.');\n      }\n\n      const _this = this;\n\n      common.each(Array.prototype.slice.call(arguments), function(object) {\n        if (_this.__rememberedObjects.length === 0) {\n          addSaveMenu(_this);\n        }\n        if (_this.__rememberedObjects.indexOf(object) === -1) {\n          _this.__rememberedObjects.push(object);\n        }\n      });\n\n      if (this.autoPlace) {\n        // Set save row width\n        setWidth(this, this.width);\n      }\n    },\n\n    /**\n     * @returns {dat.gui.GUI} the topmost parent GUI of a nested GUI.\n     * @instance\n     */\n    getRoot: function() {\n      let gui = this;\n      while (gui.parent) {\n        gui = gui.parent;\n      }\n      return gui;\n    },\n\n    /**\n     * @returns {Object} a JSON object representing the current state of\n     * this GUI as well as its remembered properties.\n     * @instance\n     */\n    getSaveObject: function() {\n      const toReturn = this.load;\n      toReturn.closed = this.closed;\n\n      // Am I remembering any values?\n      if (this.__rememberedObjects.length > 0) {\n        toReturn.preset = this.preset;\n\n        if (!toReturn.remembered) {\n          toReturn.remembered = {};\n        }\n\n        toReturn.remembered[this.preset] = getCurrentPreset(this);\n      }\n\n      toReturn.folders = {};\n      common.each(this.__folders, function(element, key) {\n        toReturn.folders[key] = element.getSaveObject();\n      });\n\n      return toReturn;\n    },\n\n    save: function() {\n      if (!this.load.remembered) {\n        this.load.remembered = {};\n      }\n\n      this.load.remembered[this.preset] = getCurrentPreset(this);\n      markPresetModified(this, false);\n      this.saveToLocalStorageIfPossible();\n    },\n\n    saveAs: function(presetName) {\n      if (!this.load.remembered) {\n        // Retain default values upon first save\n        this.load.remembered = {};\n        this.load.remembered[DEFAULT_DEFAULT_PRESET_NAME] = getCurrentPreset(this, true);\n      }\n\n      this.load.remembered[presetName] = getCurrentPreset(this);\n      this.preset = presetName;\n      addPresetOption(this, presetName, true);\n      this.saveToLocalStorageIfPossible();\n    },\n\n    revert: function(gui) {\n      common.each(this.__controllers, function(controller) {\n        // Make revert work on Default.\n        if (!this.getRoot().load.remembered) {\n          controller.setValue(controller.initialValue);\n        } else {\n          recallSavedValue(gui || this.getRoot(), controller);\n        }\n\n        // fire onFinishChange callback\n        if (controller.__onFinishChange) {\n          controller.__onFinishChange.call(controller, controller.getValue());\n        }\n      }, this);\n\n      common.each(this.__folders, function(folder) {\n        folder.revert(folder);\n      });\n\n      if (!gui) {\n        markPresetModified(this.getRoot(), false);\n      }\n    },\n\n    listen: function(controller) {\n      const init = this.__listening.length === 0;\n      this.__listening.push(controller);\n      if (init) {\n        updateDisplays(this.__listening);\n      }\n    },\n\n    updateDisplay: function() {\n      common.each(this.__controllers, function(controller) {\n        controller.updateDisplay();\n      });\n      common.each(this.__folders, function(folder) {\n        folder.updateDisplay();\n      });\n    }\n  }\n);\n\n/**\n * Add a row to the end of the GUI or before another row.\n *\n * @param gui\n * @param [newDom] If specified, inserts the dom content in the new row\n * @param [liBefore] If specified, places the new row before another row\n *\n * @ignore\n */\nfunction addRow(gui, newDom, liBefore) {\n  const li = document.createElement('li');\n  if (newDom) {\n    li.appendChild(newDom);\n  }\n\n  if (liBefore) {\n    gui.__ul.insertBefore(li, liBefore);\n  } else {\n    gui.__ul.appendChild(li);\n  }\n  gui.onResize();\n  return li;\n}\n\nfunction removeListeners(gui) {\n  dom.unbind(window, 'resize', gui.__resizeHandler);\n\n  if (gui.saveToLocalStorageIfPossible) {\n    dom.unbind(window, 'unload', gui.saveToLocalStorageIfPossible);\n  }\n}\n\nfunction markPresetModified(gui, modified) {\n  const opt = gui.__preset_select[gui.__preset_select.selectedIndex];\n\n  if (modified) {\n    opt.innerHTML = opt.value + '*';\n  } else {\n    opt.innerHTML = opt.value;\n  }\n}\n\nfunction augmentController(gui, li, controller) {\n  controller.__li = li;\n  controller.__gui = gui;\n\n  common.extend(controller, /** @lends Controller.prototype */ {\n    /**\n     * @param  {Array|Object} options\n     * @return {Controller}\n     */\n    options: function(options) {\n      if (arguments.length > 1) {\n        const nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n\n        return add(\n          gui,\n          controller.object,\n          controller.property,\n          {\n            before: nextSibling,\n            factoryArgs: [common.toArray(arguments)]\n          }\n        );\n      }\n\n      if (common.isArray(options) || common.isObject(options)) {\n        const nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n\n        return add(\n          gui,\n          controller.object,\n          controller.property,\n          {\n            before: nextSibling,\n            factoryArgs: [options]\n          }\n        );\n      }\n    },\n\n    /**\n     * Sets the name of the controller.\n     * @param  {string} name\n     * @return {Controller}\n     */\n    name: function(name) {\n      controller.__li.firstElementChild.firstElementChild.innerHTML = name;\n      return controller;\n    },\n\n    /**\n     * Sets controller to listen for changes on its underlying object.\n     * @return {Controller}\n     */\n    listen: function() {\n      controller.__gui.listen(controller);\n      return controller;\n    },\n\n    /**\n     * Removes the controller from its parent GUI.\n     * @return {Controller}\n     */\n    remove: function() {\n      controller.__gui.remove(controller);\n      return controller;\n    }\n  });\n\n  // All sliders should be accompanied by a box.\n  if (controller instanceof NumberControllerSlider) {\n    const box = new NumberControllerBox(controller.object, controller.property,\n      { min: controller.__min, max: controller.__max, step: controller.__step });\n\n    common.each(['updateDisplay', 'onChange', 'onFinishChange', 'step', 'min', 'max'], function(method) {\n      const pc = controller[method];\n      const pb = box[method];\n      controller[method] = box[method] = function() {\n        const args = Array.prototype.slice.call(arguments);\n        pb.apply(box, args);\n        return pc.apply(controller, args);\n      };\n    });\n\n    dom.addClass(li, 'has-slider');\n    controller.domElement.insertBefore(box.domElement, controller.domElement.firstElementChild);\n  } else if (controller instanceof NumberControllerBox) {\n    const r = function(returned) {\n      // Have we defined both boundaries?\n      if (common.isNumber(controller.__min) && common.isNumber(controller.__max)) {\n        // Well, then lets just replace this with a slider.\n\n        // lets remember if the old controller had a specific name or was listening\n        const oldName = controller.__li.firstElementChild.firstElementChild.innerHTML;\n        const wasListening = controller.__gui.__listening.indexOf(controller) > -1;\n\n        controller.remove();\n        const newController = add(\n          gui,\n          controller.object,\n          controller.property,\n          {\n            before: controller.__li.nextElementSibling,\n            factoryArgs: [controller.__min, controller.__max, controller.__step]\n          }\n        );\n\n        newController.name(oldName);\n        if (wasListening) newController.listen();\n\n        return newController;\n      }\n\n      return returned;\n    };\n\n    controller.min = common.compose(r, controller.min);\n    controller.max = common.compose(r, controller.max);\n  } else if (controller instanceof BooleanController) {\n    dom.bind(li, 'click', function() {\n      dom.fakeEvent(controller.__checkbox, 'click');\n    });\n\n    dom.bind(controller.__checkbox, 'click', function(e) {\n      e.stopPropagation(); // Prevents double-toggle\n    });\n  } else if (controller instanceof FunctionController) {\n    dom.bind(li, 'click', function() {\n      dom.fakeEvent(controller.__button, 'click');\n    });\n\n    dom.bind(li, 'mouseover', function() {\n      dom.addClass(controller.__button, 'hover');\n    });\n\n    dom.bind(li, 'mouseout', function() {\n      dom.removeClass(controller.__button, 'hover');\n    });\n  } else if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n    controller.updateDisplay = common.compose(function(val) {\n      li.style.borderLeftColor = controller.__color.toString();\n      return val;\n    }, controller.updateDisplay);\n\n    controller.updateDisplay();\n  }\n\n  controller.setValue = common.compose(function(val) {\n    if (gui.getRoot().__preset_select && controller.isModified()) {\n      markPresetModified(gui.getRoot(), true);\n    }\n\n    return val;\n  }, controller.setValue);\n}\n\nfunction recallSavedValue(gui, controller) {\n  // Find the topmost GUI, that's where remembered objects live.\n  const root = gui.getRoot();\n\n  // Does the object we're controlling match anything we've been told to\n  // remember?\n  const matchedIndex = root.__rememberedObjects.indexOf(controller.object);\n\n  // Why yes, it does!\n  if (matchedIndex !== -1) {\n    // Let me fetch a map of controllers for thcommon.isObject.\n    let controllerMap = root.__rememberedObjectIndecesToControllers[matchedIndex];\n\n    // Ohp, I believe this is the first controller we've created for this\n    // object. Lets make the map fresh.\n    if (controllerMap === undefined) {\n      controllerMap = {};\n      root.__rememberedObjectIndecesToControllers[matchedIndex] =\n        controllerMap;\n    }\n\n    // Keep track of this controller\n    controllerMap[controller.property] = controller;\n\n    // Okay, now have we saved any values for this controller?\n    if (root.load && root.load.remembered) {\n      const presetMap = root.load.remembered;\n\n      // Which preset are we trying to load?\n      let preset;\n\n      if (presetMap[gui.preset]) {\n        preset = presetMap[gui.preset];\n      } else if (presetMap[DEFAULT_DEFAULT_PRESET_NAME]) {\n        // Uhh, you can have the default instead?\n        preset = presetMap[DEFAULT_DEFAULT_PRESET_NAME];\n      } else {\n        // Nada.\n        return;\n      }\n\n      // Did the loaded object remember thcommon.isObject? &&  Did we remember this particular property?\n      if (preset[matchedIndex] && preset[matchedIndex][controller.property] !== undefined) {\n        // We did remember something for this guy ...\n        const value = preset[matchedIndex][controller.property];\n\n        // And that's what it is.\n        controller.initialValue = value;\n        controller.setValue(value);\n      }\n    }\n  }\n}\n\nfunction add(gui, object, property, params) {\n  if (object[property] === undefined) {\n    throw new Error(`Object \"${object}\" has no property \"${property}\"`);\n  }\n\n  let controller;\n\n  if (params.color) {\n    controller = new ColorController(object, property);\n  } else {\n    const factoryArgs = [object, property].concat(params.factoryArgs);\n    controller = ControllerFactory.apply(gui, factoryArgs);\n  }\n\n  if (params.before instanceof Controller) {\n    params.before = params.before.__li;\n  }\n\n  recallSavedValue(gui, controller);\n\n  dom.addClass(controller.domElement, 'c');\n\n  const name = document.createElement('span');\n  dom.addClass(name, 'property-name');\n  name.innerHTML = controller.property;\n\n  const container = document.createElement('div');\n  container.appendChild(name);\n  container.appendChild(controller.domElement);\n\n  const li = addRow(gui, container, params.before);\n\n  dom.addClass(li, GUI.CLASS_CONTROLLER_ROW);\n  if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n  } else {\n    dom.addClass(li, typeof controller.getValue());\n  }\n\n  augmentController(gui, li, controller);\n\n  gui.__controllers.push(controller);\n\n  return controller;\n}\n\nfunction getLocalStorageHash(gui, key) {\n  // TODO how does this deal with multiple GUI's?\n  return document.location.href + '.' + key;\n}\n\nfunction addPresetOption(gui, name, setSelected) {\n  const opt = document.createElement('option');\n  opt.innerHTML = name;\n  opt.value = name;\n  gui.__preset_select.appendChild(opt);\n  if (setSelected) {\n    gui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\n  }\n}\n\nfunction showHideExplain(gui, explain) {\n  explain.style.display = gui.useLocalStorage ? 'block' : 'none';\n}\n\nfunction addSaveMenu(gui) {\n  const div = gui.__save_row = document.createElement('li');\n\n  dom.addClass(gui.domElement, 'has-save');\n\n  gui.__ul.insertBefore(div, gui.__ul.firstChild);\n\n  dom.addClass(div, 'save-row');\n\n  const gears = document.createElement('span');\n  gears.innerHTML = '&nbsp;';\n  dom.addClass(gears, 'button gears');\n\n  // TODO replace with FunctionController\n  const button = document.createElement('span');\n  button.innerHTML = 'Save';\n  dom.addClass(button, 'button');\n  dom.addClass(button, 'save');\n\n  const button2 = document.createElement('span');\n  button2.innerHTML = 'New';\n  dom.addClass(button2, 'button');\n  dom.addClass(button2, 'save-as');\n\n  const button3 = document.createElement('span');\n  button3.innerHTML = 'Revert';\n  dom.addClass(button3, 'button');\n  dom.addClass(button3, 'revert');\n\n  const select = gui.__preset_select = document.createElement('select');\n\n  if (gui.load && gui.load.remembered) {\n    common.each(gui.load.remembered, function(value, key) {\n      addPresetOption(gui, key, key === gui.preset);\n    });\n  } else {\n    addPresetOption(gui, DEFAULT_DEFAULT_PRESET_NAME, false);\n  }\n\n  dom.bind(select, 'change', function() {\n    for (let index = 0; index < gui.__preset_select.length; index++) {\n      gui.__preset_select[index].innerHTML = gui.__preset_select[index].value;\n    }\n\n    gui.preset = this.value;\n  });\n\n  div.appendChild(select);\n  div.appendChild(gears);\n  div.appendChild(button);\n  div.appendChild(button2);\n  div.appendChild(button3);\n\n  if (SUPPORTS_LOCAL_STORAGE) {\n    const explain = document.getElementById('dg-local-explain');\n    const localStorageCheckBox = document.getElementById('dg-local-storage');\n    const saveLocally = document.getElementById('dg-save-locally');\n\n    saveLocally.style.display = 'block';\n\n    if (localStorage.getItem(getLocalStorageHash(gui, 'isLocal')) === 'true') {\n      localStorageCheckBox.setAttribute('checked', 'checked');\n    }\n\n    showHideExplain(gui, explain);\n\n    // TODO: Use a boolean controller, fool!\n    dom.bind(localStorageCheckBox, 'change', function() {\n      gui.useLocalStorage = !gui.useLocalStorage;\n      showHideExplain(gui, explain);\n    });\n  }\n\n  const newConstructorTextArea = document.getElementById('dg-new-constructor');\n\n  dom.bind(newConstructorTextArea, 'keydown', function(e) {\n    if (e.metaKey && (e.which === 67 || e.keyCode === 67)) {\n      SAVE_DIALOGUE.hide();\n    }\n  });\n\n  dom.bind(gears, 'click', function() {\n    newConstructorTextArea.innerHTML = JSON.stringify(gui.getSaveObject(), undefined, 2);\n    SAVE_DIALOGUE.show();\n    newConstructorTextArea.focus();\n    newConstructorTextArea.select();\n  });\n\n  dom.bind(button, 'click', function() {\n    gui.save();\n  });\n\n  dom.bind(button2, 'click', function() {\n    const presetName = prompt('Enter a new preset name.');\n    if (presetName) {\n      gui.saveAs(presetName);\n    }\n  });\n\n  dom.bind(button3, 'click', function() {\n    gui.revert();\n  });\n\n  // div.appendChild(button2);\n}\n\nfunction addResizeHandle(gui) {\n  let pmouseX;\n\n  gui.__resize_handle = document.createElement('div');\n\n  common.extend(gui.__resize_handle.style, {\n\n    width: '6px',\n    marginLeft: '-3px',\n    height: '200px',\n    cursor: 'ew-resize',\n    position: 'absolute'\n    // border: '1px solid blue'\n\n  });\n\n  function drag(e) {\n    e.preventDefault();\n\n    gui.width += pmouseX - e.clientX;\n    gui.onResize();\n    pmouseX = e.clientX;\n\n    return false;\n  }\n\n  function dragStop() {\n    dom.removeClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.unbind(window, 'mousemove', drag);\n    dom.unbind(window, 'mouseup', dragStop);\n  }\n\n  function dragStart(e) {\n    e.preventDefault();\n\n    pmouseX = e.clientX;\n\n    dom.addClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.bind(window, 'mousemove', drag);\n    dom.bind(window, 'mouseup', dragStop);\n\n    return false;\n  }\n\n  dom.bind(gui.__resize_handle, 'mousedown', dragStart);\n  dom.bind(gui.__closeButton, 'mousedown', dragStart);\n\n  gui.domElement.insertBefore(gui.__resize_handle, gui.domElement.firstElementChild);\n}\n\nfunction setWidth(gui, w) {\n  gui.domElement.style.width = w + 'px';\n  // Auto placed save-rows are position fixed, so we have to\n  // set the width manually if we want it to bleed to the edge\n  if (gui.__save_row && gui.autoPlace) {\n    gui.__save_row.style.width = w + 'px';\n  }\n  if (gui.__closeButton) {\n    gui.__closeButton.style.width = w + 'px';\n  }\n}\n\nfunction getCurrentPreset(gui, useInitialValues) {\n  const toReturn = {};\n\n  // For each object I'm remembering\n  common.each(gui.__rememberedObjects, function(val, index) {\n    const savedValues = {};\n\n    // The controllers I've made for thcommon.isObject by property\n    const controllerMap =\n      gui.__rememberedObjectIndecesToControllers[index];\n\n    // Remember each value for each property\n    common.each(controllerMap, function(controller, property) {\n      savedValues[property] = useInitialValues ? controller.initialValue : controller.getValue();\n    });\n\n    // Save the values for thcommon.isObject\n    toReturn[index] = savedValues;\n  });\n\n  return toReturn;\n}\n\nfunction setPresetSelectIndex(gui) {\n  for (let index = 0; index < gui.__preset_select.length; index++) {\n    if (gui.__preset_select[index].value === gui.preset) {\n      gui.__preset_select.selectedIndex = index;\n    }\n  }\n}\n\nfunction updateDisplays(controllerArray) {\n  if (controllerArray.length !== 0) {\n    requestAnimationFrame.call(window, function() {\n      updateDisplays(controllerArray);\n    });\n  }\n\n  common.each(controllerArray, function(c) {\n    c.updateDisplay();\n  });\n}\n\nexport default GUI;\n","/**\n * dat-gui JavaScript Controller Library\n * https://github.com/dataarts/dat.gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Color from './color/Color';\nimport math from './color/math';\nimport interpret from './color/interpret';\n\nimport Controller from './controllers/Controller';\nimport BooleanController from './controllers/BooleanController';\nimport OptionController from './controllers/OptionController';\nimport StringController from './controllers/StringController';\nimport NumberController from './controllers/NumberController';\nimport NumberControllerBox from './controllers/NumberControllerBox';\nimport NumberControllerSlider from './controllers/NumberControllerSlider';\nimport FunctionController from './controllers/FunctionController';\nimport ColorController from './controllers/ColorController';\n\nimport domImport from './dom/dom';\nimport GUIImport from './gui/GUI';\n\nexport const color = {\n  Color: Color,\n  math: math,\n  interpret: interpret\n};\n\nexport const controllers = {\n  Controller: Controller,\n  BooleanController: BooleanController,\n  OptionController: OptionController,\n  StringController: StringController,\n  NumberController: NumberController,\n  NumberControllerBox: NumberControllerBox,\n  NumberControllerSlider: NumberControllerSlider,\n  FunctionController: FunctionController,\n  ColorController: ColorController\n};\n\nexport const dom = { dom: domImport };\n\nexport const gui = { GUI: GUIImport };\n\nexport const GUI = GUIImport;\n\nexport default {\n  color,\n  controllers,\n  dom,\n  gui,\n  GUI\n};\n"],"names":["$55b3c5c261aa2a00$var$Global","$b63e377f8a561b77$exports","Global","$55b3c5c261aa2a00$var$localStorage","localStorage","$55b3c5c261aa2a00$var$read","key","getItem","module","exports","name","read","write","data","setItem","each","fn","i","length","remove","removeItem","clearAll","clear","$b63e377f8a561b77$var$assign","$b63e377f8a561b77$var$make_assign","$b63e377f8a561b77$var$create","$b63e377f8a561b77$var$make_create","$b63e377f8a561b77$var$trim","$b63e377f8a561b77$var$make_trim","$b63e377f8a561b77$var$Global","window","$parcel$global","Object","assign","obj","props1","props2","etc","arguments","$b63e377f8a561b77$var$each","val","create","assignProps1","assignProps2","assignArgsList","$b63e377f8a561b77$var$slice","apply","this","concat","F","prototype","String","trim","str","call","replace","$b63e377f8a561b77$var$bind","Array","slice","arr","index","$b63e377f8a561b77$var$pluck","$b63e377f8a561b77$var$map","res","$b63e377f8a561b77$var$isList","v","k","hasOwnProperty","$b63e377f8a561b77$var$isFunction","toString","$b63e377f8a561b77$var$isObject","bind","map","pluck","isList","isFunction","isObject","$9a27346c17ebc997$var$Global","$9a27346c17ebc997$var$globalStorage","$9a27346c17ebc997$var$each","_","globalStorage","$aa4a0f0382525b09$var$Global","unfixedKey","$aa4a0f0382525b09$var$disable","fixedKey","$aa4a0f0382525b09$var$fixKey","$aa4a0f0382525b09$var$_withStorageEl","storageEl","setAttribute","save","$aa4a0f0382525b09$var$storageName","getAttribute","callback","attributes","XMLDocument","documentElement","attr","removeAttribute","load","$aa4a0f0382525b09$var$doc","document","addBehavior","storageOwner","storageContainer","ActiveXObject","open","close","w","frames","createElement","e","body","storeFunction","args","unshift","appendChild","removeChild","$aa4a0f0382525b09$var$_makeIEStorageElFunction","navigator","userAgent","match","$aa4a0f0382525b09$var$forbiddenCharsRegex","RegExp","$ca53a254bb96ef40$var$Global","$ca53a254bb96ef40$var$trim","$ca53a254bb96ef40$var$_has","regexpStr","escape","unescape","$ca53a254bb96ef40$var$doc","cookie","$ca53a254bb96ef40$var$each","$ca53a254bb96ef40$var$remove","cookies","split","kvp","test","$46abab686a422357$var$Global","$46abab686a422357$var$sessionStorage","sessionStorage","$46abab686a422357$var$read","$d3df9a3b32b1c1df$var$memoryStorage","parcelRequire","JSON","rx_one","rx_two","rx_three","rx_four","rx_escapable","rx_dangerous","gap","indent","meta","rep","f","n","this_value","valueOf","quote","string","lastIndex","a","c","charCodeAt","holder","partial","mind","value","toJSON","isFinite","join","push","Date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","Boolean","Number","stringify","replacer","space","Error","parse","text","reviver","j","walk","undefined","eval","SyntaxError","$jgD1p","$b56da5de5b72d494$var$slice","$b56da5de5b72d494$var$pluck","$b56da5de5b72d494$var$each","$b56da5de5b72d494$var$bind","$b56da5de5b72d494$var$create","$b56da5de5b72d494$var$isList","$b56da5de5b72d494$var$isFunction","$b56da5de5b72d494$var$isObject","$b56da5de5b72d494$exports","createStore","$b56da5de5b72d494$var$createStore","$b56da5de5b72d494$var$storeAPI","version","enabled","get","optionalDefaultValue","storage","_namespacePrefix","_deserialize","set","_serialize","self","namespacedKey","_namespaceRegexp","hasNamespace","namespace","addPlugin","plugin","_addPlugin","plugins","$b56da5de5b72d494$var$_warn","_console","console","warn","log","storages","namespacePrefix","namespaceRegexp","_privateStoreProps","_testStorage","testStr","ok","_assignPluginFnProp","pluginFnProp","propName","oldFn","super_fn","arg","newFnArgs","strVal","defaultVal","_addStorage","plugin1","seenPlugin","pluginProperties","addStorage","store","raw","prop","$f590d80a5de1f4a7$exports","$1b5031d44df7baeb$var$plugins","$1b5031d44df7baeb$exports","$3d149cbfd3136500$export$6b7b6cff4ccb438b","muteBackgroundMusic","muteAll","$3d149cbfd3136500$var$_origPreferences","$3d149cbfd3136500$export$de31a87075fdbfcc","$3d149cbfd3136500$export$f1786e2fa4419c16","$parcel$interopDefault","$3d149cbfd3136500$export$add4fa36ca2fc569","$1b9c19121388f259$export$ef2184bd89960b14","constructor","pos","height","width","tileWidth","tileHeight","tileMap","TileMap","z","sandSprite","$cT3l2","Resources","Sand","toSprite","tile","tiles","addGraphic","$3OncY","$202a856f300cb394$export$6d3bb735c0cfe084","Actor","grid","gameOver","row","super","add","vec","default","collisionType","CollisionType","Fixed","collisionGroup","CollisionGroup","collidesWith","$1Raww","Enemy","CollisionGroupGround","CollisionGroupFlying","maxHp","sandcastle","maxHealth","currentHp","on","evt","onPostCollision","SandCastle","graphics","healthBar","$cTIIG","Healthbar","addChild","takeDamage","other","kill","origPos","clone","actions","easeTo","FxImpactCastleByEnemy","play","triggerGameOver","$de8be84271b58ead$export$be9b8cc71a71c056","level","random","possibleSpawnTiles","getTile","spawnEnemy","type","gridX","gridY","enemySpawnTile","enemy","x","y","claimTiles","spawnEnemyAtRandomTile","possible","randomYIndex","integer","spawnEnemies","count","pickSet","range","enemies","$26db8c8762619bb5$export$d97afb273a2ed2b9","_highlightedTile","selectedTowerType","$3HlYA","TowerType","towerPlacementBlockedOrDisallowed","engine","_grid","_engine","input","pointers","primary","onPointerMove","onConfirm","_highlight","ghostTower","opacity","onPostUpdate","has","_rect","strokeColor","Color","Yellow","_placeable","enemiesInTile","Red","blockedSprite","BlockedCursor","use","Green","sprite","tower","TowerPickerUI","selectedTower","updateGhostTowerVisibility","Rectangle","color","Transparent","lineWidth","lineDash","_hasSprite","showGhostTower","visible","maybeTile","getTileByPoint","worldPos","pointerType","Input","PointerType","Touch","Mouse","nativeEvent","button","Tower","$f836V","PlayerState","SubtractMoney","cost","$4TY6b","TowerBroken","removeBrokenTower","FxPlaceTower","$143290d3d7adafdc$export$75538c773353a2ee","spawner","_spawner","_random","_textActor","_text","Text","font","Font","size","family","quality","smoothing","onInitialize","_stopped","stop","_currentTime","_currentWave","_currentEnemies","_dispatched","deltaMs","waveConfig","waves","offsetList","enemyDescriptor","values","EnemyType","max","min","Crab","Seagull","Turtle","offsets","keys","enemiesComplete","offset","find","s","isBeginningOfWave","showWaveBanner","every","active","FxWaveAppear","EasingFunctions","EaseInOutCubic","delay","callMethod","$3ce5eaa42dfda069$export$5b8da01f83922c02","waveDispatcher","enemyQuery","currentScene","world","queryManager","createQuery","gameOverText","filtering","ImageFiltering","Blended","gameOverActor","screen","center","PreventCollision","restartGame$","getElementById","addEventListener","restart","getEntities","motion","MotionComponent","setTimeout","vel","Vector","Zero","blink","style","visibility","hasOwn","classNames","classes","argType","isArray","inner","$60313e3b9e75c852$exports","define","amd","$613a632b39062363$export$a62869ddf53aa3e3","static","Clank","volume","FxImpactEnemyBall","FxImpactTowerByEnemy","FxDeathCrabForCutie","FxDeathGull","FxDeathTurtle","FxHarvestTower","UiPickTower","setSoundSpecificVolume","$","unmuteBackgroundMusic","unmuteAll","r","snd","Sound","_updateMuteAllButton","SoundVolume","BackgroundAmbiance","BackgroundAmbianceVolume","loop","isPlaying","BackgroundMusic","BackgroundMusicVolume","_updateMusicButton","className","$25cac55b35f98e31$export$1832bdd7a783545e","xoffset","tiley","phaseYOffset","endPos","waterSprite","Water","originalPos","repeatForever","ctx","$84ab826914df134a$export$ca664994d1d54bff","Scene","Random","now","sandCastles","_playerWealthTick","_playerWealthGeneration","player","passiveWealthTick","_delta","AddMoney","passiveWealthAmt","startBackgroundMusic","Seed","seed","wave","wave2","enemyGenerator","tutorialDefaultTower","tutorialSandbucketTower","sandBucket","addTutorialEnemy","tutorialEnemyTimer","Timer","interval","fcn","start","towerPlacer","y1","bottomBorder","resolution","Orange","BottomBorder","sideBorder","SideBorder","display","entities","forEach","moneyResource","startingMonies","__WEBPACK_EXTERNAL_MODULE_excalibur__","require","e1","t2","e2","n2","d","PickerSystem","s2","System","types","systemType","SystemType","Update","priority","lastFrameEntityToPointers","Map","currentFrameEntityToPointers","initialize","scene","_receiver","addPointerToEntity","entity","pointerId","id","_processPointerToEntity","transform","maybeCollider","maybeGraphics","Particle","TransformComponent","ColliderComponent","geom","currentFramePointerCoords","entries","contains","coordPlane","CoordPlane","World","screenPos","GraphicsComponent","graphicBounds","localBounds","getGlobalMatrix","current","ParticleEmitter","bounds","BoundingBox","fromDimension","update","BladeApi","controller","controller_","disabled","viewProps","hidden","dispose","TpEvent","target","TpChangeEvent","presetKey","last","TpUpdateEvent","TpFoldEvent","expanded","isEmpty","deepEqualsArray","a1","a2","CREATE_MESSAGE_MAP","alreadydisposed","invalidparams","context","nomatchingcontroller","nomatchingview","params","notbindable","propertynotfound","shouldneverhappen","TpError","config","_a","message","stack","BindingTarget","opt_id","obj_","key_","presetKey_","writeProperty","valueObj","isBindable","notBindable","propertyNotFound","ButtonApi","label","props","title","valueController","eventName","handler","bh","emitter","Emitter","observers_","observers","off","filter","observer","emit","event","PREFIX","ClassName","viewName","opt_elementName","opt_modifier","extractValue","ev","rawValue","bindValue","applyValue","h1","h2","bindValueMap","valueMap","valueToClassName","elem","classList","bindValueToTextContent","textContent","className$q","ButtonView","doc","element","bindClassModifiers","buttonElem","bindDisabled","buttonElement","titleElem","ButtonController","onClick_","view","sender","BoundValue","initialValue","constraint_","constraint","equals_","equals","v1","v2","rawValue_","setRawValue","forceEmit","options","opts","constrainedValue","constrain","PrimitiveValue","value_","createValue","ValueMap","valMap_","reduce","o","core","createCore","createParamsParserBuilder","optional","succeeded","result","createParamsParserBuilders","custom","boolean","number","function","constant","object","keyToParserMap","tmp","parser","array","itemParser","parseItem","item","ParamsParsers","required","parseParams","className$p","POS_TO_CLASS_NAME_MAP","veryfirst","first","verylast","BladeController","parent_","blade","handleDispose","parentElement","parent","SVG_NS","forceReflow","offsetHeight","supportsTouch","ontouchstart","getWindowDocument","Function","ICON_ID_TO_INNER_HTML_MAP","check","dropdown","p2dpad","createSvgIconElement","iconId","createElementNS","innerHTML","insertElementAt","insertBefore","children","removeElement","removeChildElements","findNextTarget","relatedTarget","explicitOriginalTarget","className$o","LabelView","labelElem","childNodes","frag","createDocumentFragment","line","createTextNode","lineNode","labelElement","valueElem","valueElement","LabelController","ButtonBladePlugin","accept","p","fromObject","api","ValueBladeController","createBlade","positions","Foldable","coreObj","completed","expandedHeight","shouldFixHeight","temporaryExpanded","styleExpanded","styleHeight","exHeight","bindExpandedClass","expandedClassName","applyHeight","foldable","bindFoldable","folder","containerElement","t","transition","clientHeight","propertyName","RackLikeApi","rackApi","rackApi_","NestedOrderedSet","extract","items_","cache_","Set","onSubListAdd_","onSubListRemove_","extract_","items","allItems","from","includes","opt_index","shouldNeverHappen","splice","subList","root","indexOf","delete","InputBindingApi","onBindingChange_","emitter_","binding","refresh","InputBindingController","MonitorBindingApi","onBindingUpdate_","MonitorBindingController","ticker","findSubBladeApiSet","RackApi","apiSet_","getApiByController","apiSet","createBindingTarget","pool","onRackAdd_","onRackRemove_","onRackInputChange_","onRackMonitorUpdate_","pool_","rack","bc","setUpApi_","addInput","opt_params","ownerDocument","createInput","addMonitor","createMonitor","addFolder","addBlade","addButton","addSeparator","addTab","gapi","createBladeApi","bladeController","isRoot","FolderApi","rackController","RackLikeController","PlainView","findSubRack","RackController","findSubBladeControllerSet","bcSet_","BladeRack","onBladePositionsChange_","onSetAdd_","onSetRemove_","onChildDispose_","onChildPositionsChange_","onChildInputChange_","onChildMonitorUpdate_","onChildValueChange_","onChildViewPropsChange_","onDescendantLayout_","onDescendantInputChange_","onDescendantMonitorUpdate_","blade_","controllerClass","updatePositions_","visibleItems","firstVisibleItem","lastVisibleItem","ps","_ev","bcs","b","bladeContainerClassName","FolderView","className_","foldable_","titleElement","markElem","containerElem","FolderController","rc","onTitleClick_","FolderBladePlugin","LabeledValueController","SeparatorApi","className$n","SeparatorView","hrElem","SeparatorController","SeparatorBladePlugin","className$m","valueToModifier","modifier","ViewProps","opt_initialValue","_b","disposed","bindTabIndex","tabIndex","className$l","TabItemView","selected","TabItemController","TabPageController","onItemClick_","ic_","itemProps","cc_","itemController","contentController","TabPageApi","contentRackApi","TabApi","onPageAdd_","onPageRemove_","pageApiMap_","pageSet","pc","setUpPageApi_","pages","addPage","removePage","className$k","TabView","empty","itemsElem","itemsElement","contentsElem","contentsElement","TabController","cr","onPageSelectedChange_","pageSet_","empty_","applyPages_","keepSelection_","firstSelIndex","findIndex","TabBladePlugin","ManualTicker","tick","IntervalTicker","disabled_","timerId_","onTick_","doc_","interval_","setTimer_","inactive","clearTimer_","win","defaultView","clearInterval","setInterval","CompositeConstraint","constraints","findConstraint","constraintClass","tmpResult","sc","ListConstraint","RangeConstraint","maxValue","minValue","Math","StepConstraint","step","round","className$j","ListView","onValueChange_","props_","selectElem","optionElem","dataset","selectElement","update_","ListController","onSelectChange_","optElem","currentTarget","selectedOptions","itemIndex","className$i","PopupView","shows","PopupController","className$h","TextView","onChange_","inputElem","inputElement","formatter","TextController","onInputChange_","parser_","parsedValue","boolFromUnknown","BooleanFormatter","NumberLiteralNode","evaluate","BINARY_OPERATION_MAP","pow","BinaryOperationNode","operator","left","right","op","UNARY_OPERATION_MAP","UnaryOperationNode","expr","expression","combineReader","parsers","cursor","readWhitespace","m","substr","readDecimalDigits","readExponentPart","toLowerCase","si","ds","sign","sds","readDecimalIntegerLiteral","ch","nzd","readDecimalLiteral","dil","dot","dds","readNonDecimalIntegerLiteral","prefix","bds","ods","hds","readNumericLiteral","parsePrimaryExpression","num","evaluable","parseExpression","cl","readBinaryOperator","ops","startsWith","parseBinaryOperationExpression","exprParser","firstExpr","nextExpr","parseUnaryExpression","parseNumber","numberFromUnknown","pv","numberToString","createNumberFormatter","digits","toFixed","innerFormatter","formatPercentage","stringFromUnknown","formatString","fillBuffer","buffer","bufferSize","initializeBuffer","createTrimmedBuffer","connectValues","secondary","forward","backward","changing","preventFeedback","getStepForKey","baseStep","altKey","shiftKey","upKey","downKey","getVerticalStepKeys","getHorizontalStepKeys","isArrowKey","computeOffset$1","rect","getBoundingClientRect","pageX","scrollX","pageY","scrollY","top","PointerHandler","lastTouch_","onDocumentMouseMove_","onDocumentMouseUp_","onMouseDown_","onTouchEnd_","onTouchMove_","onTouchStart_","elem_","passive","computePosition_","point","preventDefault","focus","removeEventListener","touch","targetTouches","clientX","clientY","mapRange","start1","end1","start2","end2","getDecimalDigits","constrainRange","loopRange","className$g","NumberTextView","arrayPosition","onDraggingChange_","dragging_","dragging","knobElem","knobElement","guideElem","bodyElem","guideBodyElem_","headElem","guideHeadElem_","tooltipElem","tooltipElem_","aox","adx","setAttributeNS","NumberTextController","originRawValue_","onInputKeyDown_","onInputKeyUp_","onPointerDown_","onPointerMove_","onPointerUp_","baseStep_","ph","computeDraggingValue_","dx","className$f","SliderView","trackElem","trackElement","SliderController","onKeyDown_","onKeyUp_","onPointerDownOrMove_","ptHandler_","handlePointerEvent_","className$e","SliderTextView","sliderElem","sliderView_","sliderView","textElem","textView_","textView","SliderTextController","sliderC_","sliderProps","textC_","textProps","sliderController","textController","writePrimitive","parseListOptions","parsePickerLayout","parsePointDimensionParams","normalizeListOptions","createListConstraint","findListItems","getSuitableDecimalDigits","getBaseStep","getSuitableDraggingScale","base","abs","floor","log10","className$d","CheckboxView","wrapperElem","checked","CheckboxController","BooleanInputPlugin","reader","_args","lc","writer","className$c","ColorView","swatchElem","swatchElement","textElement","pickerLayout","pickerElem","pickerElement","hsvToRgb","h","hp","sp","vp","rp","gp","bp","removeAlphaComponent","comps","appendAlphaComponent","alpha","MODE_CONVERTER_MAP","hsl","l","hsv","sd","rgb","lp","g","cmax","cmin","CONSTRAINT_MAP","isRgbColorComponent","mode","mode_","comps_","toRgbaObject","isRgbColorObject","comps1","comps2","getComponents","opt_mode","components","fromMode","toMode","rgbComps","className$b","ColorPickerView","alphaViews_","hsvElem","svElem","svPaletteView_","svPaletteView","hElem","hPaletteView_","hPaletteView","rgbElem","alphaViews","palette","aElem","apElem","atElem","allFocusableElements","elems","modeSelectElement","textViews","parseColorInputParams","picker","getBaseStepForColor","forAlpha","parseCssNumberOrPercentage","parseFloat","ANGLE_TO_DEG_MAP","deg","angle","grad","rad","PI","turn","parseCssNumberOrAngle","unit","NOTATION_TO_PARSER_MAP","isNaN","mRgb","parseInt","mRrggbb","getColorNotation","notation","subparser","CompositeColorParser","hasAlphaComponent","colorFromString","cv","black","zerofill","comp","hex","colorToHexRgbString","colorToHexRgbaString","rgbaComps","colorToFunctionalRgbString","colorToFunctionalRgbaString","aFormatter","rgbFormatter","NOTATION_TO_STRINGIFIER_MAP","formatters","getColorStringifier","className$a","APaletteView","barElem","colorElem","colorElem_","markerElem","markerElem_","previewElem","previewElem_","leftColor","rightColor","gradientComps","background","backgroundColor","APaletteController","className$9","ColorTextView","modeElem","modeElem_","modeMarkerElem","textsElem","textsElem_","textViews_","applyTextViews_","colorMode","compElem","FORMATTER","MODE_TO_CONSTRAINT_MAP","createComponentController","draggingScale","ColorTextController","onModeSelectChange_","ccs_","createComponentControllers_","cc","ccs","cs","pickedMode","className$8","HPaletteView","HPaletteController","hue","className$7","SvPaletteView","canvasElem","canvasElement","getContext","hsvComps","imgData","getImageData","iy","ix","putImageData","SvPaletteController","saturation","dv","ColorPickerController","hPaletteC_","svPaletteC_","alphaIcs_","supportsAlpha","className$6","ColorSwatchView","swatchElem_","ColorSwatchController","ColorController","onButtonBlur_","onButtonClick_","onPopupChildBlur_","onPopupChildKeydown_","swatchC_","popC_","pickerC","pickerC_","nextTarget","colorFromObject","isColorObject","colorToRgbNumber","colorToRgbaNumber","colorFromRgbNumber","colorFromRgbaNumber","writeRgbaColorObject","writeRgbColorObject","shouldSupportAlpha$1","inputParams","createFormatter$1","NumberColorInputPlugin","colorToNumber","ObjectColorInputPlugin","createColorObjectWriter","isRgbaColorObject","StringColorInputPlugin","stringifier","PointNdConstraint","asm_","assembly","toComponents","fromComponents","className$5","PointNdTextView","axisElem","PointNdTextController","acs_","axes","ac","createConstraint$4","estimateSuitableRange","NumberInputPlugin","format","Point2d","toObject","Point2dAssembly","className$4","Point2dView","className$3","Point2dPickerView","onFoldableChange_","invertsY_","invertsY","maxValue_","layout","padElem","padElement","svgElem","svgElem_","xAxisElem","yAxisElem","lineElem","lineElem_","px","py","ipy","computeOffset","baseSteps","Point2dPickerController","onPadKeyDown_","onPadKeyUp_","baseSteps_","dy","Point2dController","onPadButtonBlur_","onPadButtonClick_","padC","point2dFromUnknown","writePoint2d","createDimensionConstraint$2","getSuitableMaxDimensionValue","getSuitableMaxValue","xc","yc","xr","yr","createAxis$2","shouldInvertY","yParams","inverted","Point2dInputPlugin","createConstraint$3","Point3d","Point3dAssembly","point3dFromUnknown","writePoint3d","createDimensionConstraint$1","createAxis$1","Point3dInputPlugin","createConstraint$2","Point4d","Point4dAssembly","point4dFromUnknown","writePoint4d","createDimensionConstraint","Point4dInputPlugin","createConstraint$1","createAxis","StringInputPlugin","Constants","defaultInterval","defaultLineCount","className$2","MultiLogView","onValueUpdate_","formatter_","textareaElem","lineCount","readOnly","textareaElem_","shouldScroll","scrollTop","scrollHeight","lines","MultiLogController","className$1","SingleLogView","lastValue","SingleLogController","BooleanMonitorPlugin","GraphCursor","index_","GraphLogView","onCursorChange_","minValue_","cursor_","graphElement","maxIndex","points","tx","ty","GraphLogController","onGraphMouseMove_","onGraphMouseLeave_","onGraphPointerDown_","onGraphPointerMove_","onGraphPointerUp_","offsetX","createFormatter","shouldShowGraph","NumberMonitorPlugin","defaultBufferSize","_c","StringMonitorPlugin","multiline","InputBinding","targetValue","write_","MonitorBinding","reader_","newValue","newBuffer","createTicker","PluginPool","pluginsMap_","blades","inputs","monitors","getAll","register","valueArgs","P","bindingArgs","ListApi","SliderApi","TextApi","ListBladePlugin","ic","RootApi","importPreset","preset","targets","ibc","exportPreset","mbc","RootController","SliderBladePlugin","vc","TextBladePlugin","embedStyle","css","querySelector","styleElem","tpStyle","head","VERSION","prerelease","coreComps","major","minor","patch","Pane","opt_config","containerElem_","container","usesDefaultWrapper_","setUpDefaultPlugins_","alreadyDisposed","parentElem","registerPlugin","bundle","embedPluginStyle_","defineProperty","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","definition","enumerable","Symbol","toStringTag","s1","i1","DevTool","o3","t105","e52","n23","pointerPos","highlightedEntities","selectedEntity","selectedEntityId","pane","innerText","_buildMain","tabs","selectedEntityTab","screenTab","cameraTab","clockTab","timerTab","physicsTab","debugTab","_installPickerSystemIfNeeded","debug","showPosition","showName","selectedEntityFolder","_buildScreenTab","_buildCameraTab","_buildClockTab","_buildTimersTab","_buildPhysicsTab","_buildDebugSettingsTab","addListeners","canvas","selectEntityById","game","entityManager","getById","_buildEntityUI","transformComponent","_buildTransformUI","motionComponent","_buildMotionUI","_buildParticleEmitterUI","graphicsComponent","_buildGraphicsUI","colliderComponent","bodyComponent","BodyComponent","_buildColliderUI","devtool","lastWorldPos","pointerPosInput","entityIds","pickerSystem","useFilter","ids","currentResolution","currentViewport","viewport","resolutionText","viewportText","screenFolder","systemManager","addSystem","toggleDebug","clock","fpsSampler","numberEntitiesBlade","currentSceneName","scenes","goToScene","tags","n24","collider","Active","Passive","All","CollisionGroupManager","groups","group","particles","particlesFolder","allGraphics","currentGfx","graphic","namedGfx","gfxIndex","anonIndex","e55","Screen","rot","scale","globalTx","globalRot","globalScale","goFullScreen","colorBlindness","ColorBlindnessMode","Deuteranope","Protanope","Tritanope","shouldSimulate","simulate","colorBlindMode","correct","cameraFolder","camera","usingTestClock","TestClock","stepMs","useTestClock","useStandardClock","stopGameButton","startGameButton","_timersFolder","timer","timers","status","repeats","maxNumberOfRepeats","_numberOfTicks","isRunning","complete","timeToNextAction","physics","physicsSettings","Physics","solverInput","useArcadePhysics","collisionResolutionStrategy","useRealisticPhysics","bodiesCanSleepByDefault","warmStart","sleepEpsilon","wakeThreshold","positionIterations","velocityIterations","checkForFastBodies","option","toLocaleLowerCase","$a4c493de23d91c5d$var$colorToString","forceCSSHex","colorFormat","__state","conversionName","ARR_EACH","ARR_SLICE","Common","BREAK","extend","isUndefined","defaults","compose","toCall","itr","scope","defer","fnc","debounce","func","threshold","callImmediately","timeout","delayed","callNow","toArray","isNull","isNumber","isString","isBoolean","INTERPRETATIONS","common","conversions","THREE_CHAR_HEX","original","SIX_CHAR_HEX","CSS_RGB","CSS_RGBA","HEX","RGB_ARRAY","RGBA_ARRAY","RGBA_OBJ","RGB_OBJ","HSVA_OBJ","HSV_OBJ","toReturn","interpret","$a4c493de23d91c5d$var$toReturn","litmus","conversion","tmpComponent","ColorMath","hsv_to_rgb","hi","q","rgb_to_hsv","delta","NaN","rgb_to_hex","hex_with_component","component_from_hex","componentIndex","colorToString","defineRGBComponent","component","componentHexIndex","recalculateRGB","defineHSVComponent","recalculateHSV","math","COMPONENTS","Controller","property","domElement","__onChange","__onFinishChange","updateDisplay","getValue","EVENT_MAP","HTMLEvents","MouseEvents","KeyboardEvents","EVENT_MAP_INV","CSS_VALUE_PIXELS","cssValueToPixels","dom","makeSelectable","selectable","onselectstart","MozUserSelect","KhtmlUserSelect","unselectable","makeFullscreen","hor","vert","vertical","horizontal","position","bottom","fakeEvent","eventType","pars","aux","createEvent","initMouseEvent","bubbles","cancelable","clickCount","init","initKeyboardEvent","initKeyEvent","ctrlKey","metaKey","keyCode","charCode","initEvent","dispatchEvent","newBool","bool","attachEvent","unbind","detachEvent","addClass","removeClass","hasClass","getWidth","getComputedStyle","getHeight","getOffset","el","offsetParent","offsetLeft","offsetTop","isActive","activeElement","href","BooleanController","_this","__prev","_this2","__checkbox","onChange","setValue","OptionController","__select","opt","desiredValue","selectedIndex","StringController","__input","onBlur","blur","numDecimals","_x","NumberController","_params","__min","__max","__step","__impliedStep","LN10","__precision","_v","stepValue","roundToDecimal","decimals","tenTo","NumberControllerBox","__truncationSuspended","prevY","onFinish","onMouseDrag","diff","onMouseUp","attempted","onMouseDown","i2","o1","o2","NumberControllerSlider","bgRect","__background","onTouchMove","touches","onTouchEnd","__foreground","onTouchStart","pct","FunctionController","__button","fire","__color","__temp","__selector","__saturation_field","__field_knob","__field_knob_border","__hue_knob","__hue_field","__input_textShadow","valueField","fieldDown","setSV","fieldUpSV","fieldDownH","setH","fieldUpH","toOriginal","fieldRect","_ref","padding","boxShadow","border","borderRadius","zIndex","borderRight","marginRight","$a4c493de23d91c5d$var$hueGradient","outline","textAlign","fontWeight","textShadow","mismatch","flip","_flip","marginLeft","marginTop","toHexString","$a4c493de23d91c5d$var$linearGradient","vendors","linearGradient","vendor","cssText","hueGradient","url","indoc","link","rel","getElementsByTagName","inject","cssContent","injected","saveDialogContents","ControllerFactory","requestAnimationFrame","$a4c493de23d91c5d$var$requestAnimationFrame$1","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","CenteredDiv","backgroundElement","WebkitTransition","hide","webkitTransform","innerWidth","innerHeight","styleSheet","CSS_NAMESPACE","HIDE_KEY_CODE","CLOSE_BUTTON_HEIGHT","DEFAULT_DEFAULT_PRESET_NAME","SUPPORTS_LOCAL_STORAGE","SAVE_DIALOGUE","autoPlaceVirgin","autoPlaceContainer","hideableGuis","GUI","__ul","__folders","__controllers","__rememberedObjects","__rememberedObjectIndecesToControllers","__listening","closeOnTop","autoPlace","DEFAULT_WIDTH","hideable","resizable","scrollable","useLocalStorage","getLocalStorageHash","saveToLocalStorage","titleRow","defineProperties","getRoot","$a4c493de23d91c5d$var$setPresetSelectIndex","revert","closed","CLASS_CLOSED","onResize","__closeButton","TEXT_OPEN","TEXT_CLOSED","CLASS_MAIN","savedGui","CLASS_CLOSE_BUTTON","CLASS_CLOSE_TOP","CLASS_CLOSE_BOTTOM","titleRowName","addRow","CLASS_AUTO_PLACE_CONTAINER","$a4c493de23d91c5d$var$autoPlaceVirgin","CLASS_AUTO_PLACE","__resizeHandler","onResizeDebounced","$a4c493de23d91c5d$var$addResizeHandle","getSaveObject","saveToLocalStorageIfPossible","gui","newDom","liBefore","li","removeListeners","markPresetModified","modified","__preset_select","augmentController","__li","__gui","nextSibling","nextElementSibling","factoryArgs","firstElementChild","listen","box","method","pb","returned","oldName","wasListening","newController","stopPropagation","borderLeftColor","isModified","recallSavedValue","matchedIndex","controllerMap","remembered","presetMap","before","CLASS_CONTROLLER_ROW","$a4c493de23d91c5d$var$_typeof","location","addPresetOption","setSelected","showHideExplain","explain","addSaveMenu","div","__save_row","firstChild","gears","button2","button3","select","localStorageCheckBox","newConstructorTextArea","which","show","presetName","prompt","saveAs","addResizeHandle","pmouseX","drag","dragStop","CLASS_DRAG","dragStart","__resize_handle","setWidth","getCurrentPreset","useInitialValues","savedValues","setPresetSelectIndex","updateDisplays","controllerArray","toggleHide","$a4c493de23d91c5d$var$hide","CLASS_TOO_TALL","_keydownHandler","addColor","destroy","subfolder","removeFolder","$a4c493de23d91c5d$var$removeListeners","newGuiParams","folders","node","remember","$a4c493de23d91c5d$var$SAVE_DIALOGUE","saveDialogueContents","$a4c493de23d91c5d$var$setWidth","$a4c493de23d91c5d$var$markPresetModified","$a4c493de23d91c5d$var$addPresetOption","$a4c493de23d91c5d$var$updateDisplays","controllers","domImport","GUIImport","$a4c493de23d91c5d$var$index","$a4c493de23d91c5d$export$35e9368ef982300f","$a4c493de23d91c5d$export$a6506504f799c5d5","$a4c493de23d91c5d$export$df3a06d6289f983e","$a4c493de23d91c5d$export$6367ea12ae86a4eb","$ad2bcec7a0192558$var$getNumDigits","$ad2bcec7a0192558$var$buildGui","limit","numDigits","$a4c493de23d91c5d$export$983832d820c96993","$ad2bcec7a0192558$export$985739bfa5723e08","Engine","showDevTool","ShowDevTool","canvasElementId","displayMode","DisplayMode","FitScreen","antialiasing","startLevel","loader","Loader","resource","addResource","then","forceResize","addScene","setupDevTool","devTool","$d82f9d57af76c42b$exports","configPage","recurse","currentKey","maxDepth","newKey","$ad2bcec7a0192558$export$119d2a93e2780362","fromHex"],"version":3,"file":"index.92176c45.js.map"}